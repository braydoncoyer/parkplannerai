import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as x}from"./index.Da02gyCa.js";import{s as Y,C as z,S as F,F as B,a as K,b as U}from"./resortPairings.BcELqoxQ.js";/* empty css                      */import{c as w,p as Z,C as V,M as q}from"./parkImages.BwOBi-JW.js";import{M as G,C as X}from"./moon.Baz6JR5F.js";import{r as Q,u as J,a as ee,b as se,D as te,c as ae,d as ne,e as M,s as re,f as ie,g as W,h as le,i as oe,j as ce,Z as de,L as me,k as pe,C as ue,l as he,m as L,n as E,o as $,p as xe,R as fe,q as je,t as ve,X as Ne,Y as ge,T as ye,v as P}from"./LineChart.jpPcoxuW.js";import"./index.4ifBoAec.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ke=w("arrow-left",be);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ce=w("chevron-down",we);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Me=w("compass",Ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Pe=w("search",Le);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Se=w("users",Te);function O(s,t){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),a.push.apply(a,n)}return a}function D(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?O(Object(a),!0).forEach(function(n){We(s,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(a,n))})}return s}function We(s,t,a){return(t=Ee(t))in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function Ee(s){var t=Oe(s,"string");return typeof t=="symbol"?t:t+""}function Oe(s,t){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var n=a.call(s,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function T(){return T=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(s[n]=a[n])}return s},T.apply(null,arguments)}var De=(s,t)=>{var a;if(x.isValidElement(s))a=x.cloneElement(s,t);else if(typeof s=="function")a=s(t);else{if(!L(t.x1)||!L(t.y1)||!L(t.x2)||!L(t.y2))return null;a=x.createElement("line",T({},t,{className:"recharts-reference-line-line"}))}return a},_e=(s,t,a,n,r,c)=>{var{x:d,width:j}=c,u=r.y.apply(s,{position:a});if($(u)||t==="discard"&&!r.y.isInRange(u))return null;var l=[{x:d+j,y:u},{x:d,y:u}];return n==="left"?l.reverse():l},$e=(s,t,a,n,r,c)=>{var{y:d,height:j}=c,u=r.x.apply(s,{position:a});if($(u)||t==="discard"&&!r.x.isInRange(u))return null;var l=[{x:u,y:d+j},{x:u,y:d}];return n==="top"?l.reverse():l},He=(s,t,a,n)=>{var r=s.map(c=>n.apply(c,{position:a}));return t==="discard"&&r.some(c=>!n.isInRange(c))?null:r},Re=(s,t,a,n,r,c)=>{var{x:d,y:j,segment:u,ifOverflow:l}=c,m=E(d),h=E(j);return h?_e(j,l,a,r,s,t):m?$e(d,l,a,n,s,t):u!=null&&u.length===2?He(u,l,a,s):null};function Ie(s){var t=J();return x.useEffect(()=>(t(ee(s)),()=>{t(se(s))})),null}function Ye(s){var{xAxisId:t,yAxisId:a,shape:n,className:r,ifOverflow:c}=s,d=ae(),j=ne(),u=M(v=>re(v,t)),l=M(v=>ie(v,a)),m=M(v=>W(v,"xAxis",t,d)),h=M(v=>W(v,"yAxis",a,d)),i=le();if(!j||!i||u==null||l==null||m==null||h==null)return null;var o=oe({x:m,y:h}),f=Re(o,i,s.position,u.orientation,l.orientation,s);if(!f)return null;var[{x:p,y:N},{x:b,y:C}]=f,g=c==="hidden"?"url(#".concat(j,")"):void 0,A=D(D({clipPath:g},ce(s)),{},{x1:p,y1:N,x2:b,y2:C}),y=xe({x1:p,y1:N,x2:b,y2:C});return x.createElement(de,{zIndex:s.zIndex},x.createElement(me,{className:pe("recharts-reference-line",r)},De(n,A),x.createElement(ue,T({},y,{lowerWidth:y.width,upperWidth:y.width}),x.createElement(he,{label:s.label}),s.children)))}var ze={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:te.line};function H(s){var t=Q(s,ze);return x.createElement(x.Fragment,null,x.createElement(Ie,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),x.createElement(Ye,t))}H.displayName="ReferenceLine";const R={};for(const s of Object.values(Z))for(const[t,a]of Object.entries(s)){const n=a;n.image&&(R[Number(t)]=n.image)}const Fe="https://images.pexels.com/photos/8183994/pexels-photo-8183994.jpeg",Be={low:"Low Crowds",moderate:"Moderate",high:"Busy","very-high":"Very Busy"},Ke=["rise of the resistance","flight of passage","guardians of the galaxy","tron","hagrid","velocicoaster","forbidden journey","hagrid's","radiator springs","web slingers","incredicoaster","cosmic rewind","expedition everest","slinky dog","rock 'n' roller","tower of terror","space mountain","splash mountain","big thunder","pirates","haunted mansion","jungle cruise","matterhorn","indiana jones","millennium falcon","remy","test track","frozen ever after"];function k(s){return s<20?"low":s<40?"moderate":s<60?"high":"very-high"}function Ue(s){return s<20?"green":s<40?"amber":s<60?"orange":"red"}function Ze(s){const t=s.toLowerCase();return Ke.some(a=>t.includes(a))}function _(s){const t=s.match(/T(\d{2}):(\d{2})/);if(t){let a=parseInt(t[1],10);const n=t[2],r=a>=12?"PM":"AM";return a>12&&(a-=12),a===0&&(a=12),`${a}:${n} ${r}`}return s}const Ve={5:"America/New_York",6:"America/New_York",7:"America/New_York",8:"America/New_York",64:"America/New_York",65:"America/New_York",334:"America/New_York",16:"America/Los_Angeles",17:"America/Los_Angeles",66:"America/Los_Angeles"};function qe(s,t,a){const n=s?.timezone||Ve[t]||"America/New_York",r=new Date,c=new Date(r.toLocaleString("en-US",{timeZone:n})),d=c.getHours(),j=c.getMinutes(),l=((m,h)=>{const i=m>12?m-12:m===0?12:m,o=m>=12?"PM":"AM";return`${i}:${h.toString().padStart(2,"0")} ${o}`})(d,j);if(s){const m=d*60+j,h=s.openHour*60+s.openMinute,i=s.closeHour<s.openHour?(s.closeHour+24)*60+s.closeMinute:s.closeHour*60+s.closeMinute;return{closed:m<h||m>=i,currentTime:l,opensAt:s.openingTimeFormatted,timezone:n}}return a===0?{closed:!0,currentTime:l,opensAt:"9:00 AM",timezone:n}:{closed:!1,currentTime:"",opensAt:"",timezone:n}}function Ge(s){const t=Array.from({length:14},(h,i)=>9+i),a=new Date().getHours(),n=[.4,.6,.85,1,.95,.8,.65,.55,.7,.9,1,.85,.6,.4],r=t.filter(h=>h<=a).map((h,i)=>{const o=n[i]||.5,f=(Math.random()-.5)*10,p=Math.max(5,Math.round(s*o+f));return{hour:h,avgWaitTime:p,crowdLevel:k(p)}}),c=.85+Math.random()*.3,d=t.map((h,i)=>{const o=n[i]||.5,f=(Math.random()-.5)*8,p=Math.max(5,Math.round(s*o*c+f));return{hour:h,avgWaitTime:p,crowdLevel:k(p)}}),j=.7+Math.random()*.5,u=t.map((h,i)=>{const o=n[i]||.5,f=(Math.random()-.5)*12,p=Math.max(5,Math.round(s*o*j+f));return{hour:h,avgWaitTime:p,crowdLevel:k(p)}}),l=.9+Math.random()*.4,m=t.map((h,i)=>{const o=n[i]||.5,f=(Math.random()-.5)*15,p=Math.max(5,Math.round(s*o*l+f));return{hour:h,avgWaitTime:p,crowdLevel:k(p)}});return{today:r,lastWeek:d,lastMonth:u,lastYear:m,dataCollectionStarted:new Date(Date.now()-365*24*60*60*1e3).toISOString(),daysUntilWeeklyData:0}}function Xe({parkId:s,parkName:t,operator:a}){const n=R[s]||Fe,r=Y(s),c=()=>{window.location.href="/"},d=()=>{window.location.href=`/plan?park=${s}`};return e.jsxs("div",{className:"pd-hero",children:[e.jsx("div",{className:"pd-hero-image",style:{backgroundImage:`url(${n})`}}),e.jsx("div",{className:"pd-hero-overlay"}),e.jsxs("button",{onClick:c,className:"pd-back-link",children:[e.jsx(ke,{size:18}),"Back"]}),e.jsxs("div",{className:"pd-hero-content",children:[e.jsxs("div",{className:"pd-hero-badges",children:[e.jsx("span",{className:"pd-operator-badge",children:a}),e.jsxs("span",{className:"pd-live-badge",children:[e.jsx("span",{className:"pd-live-dot"}),"Live Data"]})]}),e.jsx("h1",{className:"pd-hero-title",children:t}),r&&e.jsxs("button",{onClick:d,className:"pd-create-plan-btn",children:[e.jsx("span",{className:"pd-plan-btn-icon",children:e.jsx(Me,{size:18})}),e.jsxs("span",{className:"pd-plan-btn-text",children:[e.jsx("span",{className:"pd-plan-btn-label",children:"Create Your Day"}),e.jsxs("span",{className:"pd-plan-btn-sublabel",children:["Start planning from ",t.split(" ")[0]]})]})]})]})]})}function Qe({currentTime:s,opensAt:t,timezone:a}){const n=r=>r.includes("New_York")?"ET":r.includes("Los_Angeles")?"PT":r.includes("Chicago")?"CT":r.split("/")[1]?.replace("_"," ")||r;return e.jsxs("div",{className:"pd-closed-banner",children:[e.jsx("div",{className:"pd-closed-icon",children:e.jsx(G,{size:24})}),e.jsxs("div",{className:"pd-closed-content",children:[e.jsx("h3",{className:"pd-closed-title",children:"Park Currently Closed"}),e.jsxs("p",{className:"pd-closed-text",children:["It's ",s," ",n(a)," at the park. Opens at ",t,"."]})]})]})}function Je({stats:s,hours:t,crowdLevel:a}){const n=s.totalRides>0?Math.round(s.ridesOpen/s.totalRides*100):0;return e.jsxs("div",{className:"pd-stats-grid",children:[e.jsxs("div",{className:`pd-stat-card crowd-${a}`,children:[e.jsxs("div",{className:"pd-stat-header",children:[e.jsx("div",{className:"pd-stat-icon",children:e.jsx(Se,{size:18})}),e.jsx("span",{className:"pd-stat-label",children:"Crowd Level"})]}),e.jsx("div",{className:"pd-stat-value",children:Be[a]}),e.jsx("div",{className:"pd-stat-sublabel",children:"Based on current wait times"})]}),e.jsxs("div",{className:"pd-stat-card",children:[e.jsxs("div",{className:"pd-stat-header",children:[e.jsx("div",{className:"pd-stat-icon",children:e.jsx(V,{size:18})}),e.jsx("span",{className:"pd-stat-label",children:"Avg Wait"})]}),e.jsxs("div",{className:"pd-stat-value",children:[s.avgWaitTime," min"]}),e.jsxs("div",{className:"pd-stat-sublabel",children:["Peak: ",s.maxWaitTime," min"]})]}),e.jsxs("div",{className:"pd-stat-card",children:[e.jsxs("div",{className:"pd-stat-header",children:[e.jsx("div",{className:"pd-stat-icon",children:e.jsx(q,{size:18})}),e.jsx("span",{className:"pd-stat-label",children:"Rides Open"})]}),e.jsxs("div",{className:"pd-stat-value",children:[s.ridesOpen," / ",s.totalRides]}),e.jsx("div",{className:"pd-stat-progress",children:e.jsx("div",{className:"pd-stat-progress-bar",style:{width:`${n}%`}})})]}),e.jsxs("div",{className:"pd-stat-card",children:[e.jsxs("div",{className:"pd-stat-header",children:[e.jsx("div",{className:"pd-stat-icon",children:e.jsx(z,{size:18})}),e.jsx("span",{className:"pd-stat-label",children:"Park Hours"})]}),e.jsx("div",{className:"pd-stat-value",children:t?.openingTimeFormatted||"9:00 AM"}),e.jsxs("div",{className:"pd-stat-sublabel",children:["Closes ",t?.closingTimeFormatted||"9:00 PM"]})]})]})}function es({historicalData:s}){const[t,a]=x.useState({today:!0,lastWeek:!0,lastMonth:!0,lastYear:!0}),n=new Date().getHours(),r=s&&(s.lastWeek||s.lastMonth||s.lastYear),c=l=>{a(m=>({...m,[l]:!m[l]}))};if(!r){const l=s?.daysUntilWeeklyData??7,m=Math.max(0,(7-l)/7*100);return e.jsxs("div",{className:"pd-timeline-section pd-section",children:[e.jsx("div",{className:"pd-timeline-header",children:e.jsx("h2",{className:"pd-timeline-title",children:"Crowd Comparison"})}),e.jsxs("div",{className:"pd-timeline-empty",children:[e.jsx(X,{className:"pd-timeline-empty-icon",size:48}),e.jsx("h3",{className:"pd-timeline-empty-title",children:"Collecting Historical Data"}),e.jsx("p",{className:"pd-timeline-empty-text",children:"We're gathering crowd patterns for this park. Check back soon for comparisons to last week, month, and year."}),e.jsxs("div",{className:"pd-timeline-empty-progress",children:[e.jsx("div",{className:"pd-timeline-empty-progress-bar",children:e.jsx("div",{className:"pd-timeline-empty-progress-fill",style:{width:`${m}%`}})}),e.jsxs("span",{className:"pd-timeline-empty-progress-text",children:[l," days until weekly data"]})]})]})]})}const j=Array.from({length:14},(l,m)=>9+m).map(l=>{const m=p=>p>12?`${p-12}pm`:p===12?"12pm":`${p}am`,h=s?.today?.find(p=>p.hour===l),i=s?.lastWeek?.find(p=>p.hour===l),o=s?.lastMonth?.find(p=>p.hour===l),f=s?.lastYear?.find(p=>p.hour===l);return{hour:l,label:m(l),today:h?.avgWaitTime??null,lastWeek:i?.avgWaitTime??null,lastMonth:o?.avgWaitTime??null,lastYear:f?.avgWaitTime??null}}),u=({active:l,payload:m,label:h})=>!l||!m?.length?null:e.jsxs("div",{className:"pd-chart-tooltip",children:[e.jsx("p",{className:"pd-chart-tooltip-label",children:h}),m.map((i,o)=>i.value!==null&&e.jsxs("p",{style:{color:i.color},className:"pd-chart-tooltip-value",children:[i.name,": ",i.value," min"]},o))]});return e.jsxs("div",{className:"pd-timeline-section pd-section",children:[e.jsxs("div",{className:"pd-timeline-header",children:[e.jsx("h2",{className:"pd-timeline-title",children:"Crowd Comparison"}),e.jsxs("div",{className:"pd-timeline-legend",children:[e.jsxs("button",{className:`pd-legend-item ${t.today?"":"disabled"}`,onClick:()=>c("today"),children:[e.jsx("span",{className:"pd-legend-line today"}),"Today"]}),e.jsxs("button",{className:`pd-legend-item ${t.lastWeek?"":"disabled"}`,onClick:()=>c("lastWeek"),children:[e.jsx("span",{className:"pd-legend-line last-week"}),"Last Week"]}),e.jsxs("button",{className:`pd-legend-item ${t.lastMonth?"":"disabled"}`,onClick:()=>c("lastMonth"),children:[e.jsx("span",{className:"pd-legend-line last-month"}),"Last Month"]}),e.jsxs("button",{className:`pd-legend-item ${t.lastYear?"":"disabled"}`,onClick:()=>c("lastYear"),children:[e.jsx("span",{className:"pd-legend-line last-year"}),"Last Year"]})]})]}),e.jsx("div",{className:"pd-timeline-chart",children:e.jsx(fe,{width:"100%",height:220,children:e.jsxs(je,{data:j,margin:{top:20,right:20,bottom:20,left:0},children:[e.jsx(ve,{strokeDasharray:"3 3",stroke:"#e2e8f0",vertical:!1}),e.jsx(Ne,{dataKey:"label",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},interval:1}),e.jsx(ge,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},tickFormatter:l=>`${l}m`,domain:[0,"auto"],width:40}),e.jsx(ye,{content:e.jsx(u,{})}),n>=9&&n<=22&&e.jsx(H,{x:n>12?`${n-12}pm`:n===12?"12pm":`${n}am`,stroke:"#c2410c",strokeDasharray:"4 4",label:{value:"Now",position:"top",fill:"#c2410c",fontSize:11}}),t.lastYear&&e.jsx(P,{type:"monotone",dataKey:"lastYear",name:"Last Year",stroke:"#e2e8f0",strokeWidth:2,strokeDasharray:"2 4",dot:!1,connectNulls:!0}),t.lastMonth&&e.jsx(P,{type:"monotone",dataKey:"lastMonth",name:"Last Month",stroke:"#cbd5e1",strokeWidth:2,strokeDasharray:"4 4",dot:!1,connectNulls:!0}),t.lastWeek&&e.jsx(P,{type:"monotone",dataKey:"lastWeek",name:"Last Week",stroke:"#94a3b8",strokeWidth:2,strokeDasharray:"6 3",dot:!1,connectNulls:!0}),t.today&&e.jsx(P,{type:"monotone",dataKey:"today",name:"Today",stroke:"#c2410c",strokeWidth:3,dot:{fill:"#c2410c",strokeWidth:0,r:3},activeDot:{r:5,fill:"#c2410c"},connectNulls:!0})]})})})]})}function ss({entertainment:s}){if(!s)return null;const{nighttimeSpectacular:t,parade:a}=s;return!t&&!a?null:e.jsxs("div",{className:"pd-section",children:[e.jsx("h2",{className:"pd-section-title",children:"Entertainment Highlights"}),e.jsxs("div",{className:"pd-entertainment-grid",children:[t&&e.jsxs("div",{className:"pd-entertainment-card",children:[e.jsxs("div",{className:"pd-entertainment-header",children:[e.jsx("div",{className:"pd-entertainment-icon",children:e.jsx(F,{size:20})}),e.jsxs("div",{className:"pd-entertainment-info",children:[e.jsx("span",{className:"pd-entertainment-type",children:t.isFireworks?"Fireworks":"Nighttime Show"}),e.jsx("h3",{className:"pd-entertainment-name",children:t.name})]})]}),e.jsx("div",{className:"pd-entertainment-times",children:t.showTimes.slice(0,3).map((n,r)=>e.jsxs("span",{className:`pd-entertainment-time ${r===0?"next":""}`,children:[_(n.startTime),r===0&&e.jsx("span",{className:"pd-today-badge",children:"Next"})]},r))})]}),a&&e.jsxs("div",{className:"pd-entertainment-card",children:[e.jsxs("div",{className:"pd-entertainment-header",children:[e.jsx("div",{className:"pd-entertainment-icon",children:e.jsx(B,{size:20})}),e.jsxs("div",{className:"pd-entertainment-info",children:[e.jsx("span",{className:"pd-entertainment-type",children:"Parade"}),e.jsx("h3",{className:"pd-entertainment-name",children:a.name})]})]}),e.jsx("div",{className:"pd-entertainment-times",children:a.showTimes.slice(0,3).map((n,r)=>e.jsxs("span",{className:`pd-entertainment-time ${r===0?"next":""}`,children:[_(n.startTime),r===0&&e.jsx("span",{className:"pd-today-badge",children:"Next"})]},r))})]})]})]})}function ts({ride:s}){const t=Ze(s.name),a=s.waitTime!==null?Ue(s.waitTime):null;return e.jsxs("div",{className:"pd-ride-card",children:[e.jsx("div",{className:"pd-ride-info",children:e.jsxs("h4",{className:"pd-ride-name",children:[s.name,t&&e.jsxs("span",{className:"pd-headliner-badge",children:[e.jsx(U,{size:10}),"Headliner"]})]})}),s.status==="open"&&s.waitTime!==null?e.jsxs("span",{className:`pd-ride-wait ${a}`,children:[s.waitTime," min"]}):e.jsx("span",{className:"pd-ride-wait closed",children:s.status==="down"?"Down":"Closed"})]})}function as({landName:s,rides:t,defaultExpanded:a=!0}){const[n,r]=x.useState(a),c=t.filter(d=>d.status==="open").length;return e.jsxs("div",{className:`pd-land-group ${n?"":"collapsed"}`,children:[e.jsxs("button",{className:"pd-land-header",onClick:()=>r(!n),children:[e.jsxs("div",{children:[e.jsx("h3",{className:"pd-land-name",children:s}),e.jsxs("span",{className:"pd-land-count",children:[c," of ",t.length," open"]})]}),e.jsx("span",{className:"pd-land-toggle",children:n?e.jsx(K,{size:20}):e.jsx(Ce,{size:20})})]}),e.jsx("div",{className:"pd-land-rides",children:t.map(d=>e.jsx(ts,{ride:d},d.id))})]})}function ns({rides:s,lands:t}){const[a,n]=x.useState(""),[r,c]=x.useState("wait-desc"),[d,j]=x.useState("all"),u=x.useMemo(()=>{let i=[...s];if(a){const o=a.toLowerCase();i=i.filter(f=>f.name.toLowerCase().includes(o)||f.land.toLowerCase().includes(o))}return d==="open"?i=i.filter(o=>o.status==="open"):d==="closed"&&(i=i.filter(o=>o.status!=="open")),i.sort((o,f)=>{switch(r){case"wait-desc":return(f.waitTime||0)-(o.waitTime||0);case"wait-asc":return(o.waitTime||0)-(f.waitTime||0);case"name-asc":return o.name.localeCompare(f.name);case"name-desc":return f.name.localeCompare(o.name);default:return 0}}),i},[s,a,r,d]),l=x.useMemo(()=>{const i={};for(const o of t)i[o.name]=u.filter(f=>f.land===o.name);return i},[u,t]),m=s.filter(i=>i.status==="open").length,h=s.length-m;return e.jsxs("div",{className:"pd-waits-section pd-section",children:[e.jsxs("div",{className:"pd-waits-header",children:[e.jsx("h2",{className:"pd-waits-title",children:"Live Wait Times"}),e.jsxs("div",{className:"pd-filter-bar",children:[e.jsxs("div",{className:"pd-search-wrapper",children:[e.jsx(Pe,{size:18,className:"pd-search-icon"}),e.jsx("input",{type:"text",className:"pd-search-input",placeholder:"Search rides...",value:a,onChange:i=>n(i.target.value)})]}),e.jsxs("select",{className:"pd-sort-select",value:r,onChange:i=>c(i.target.value),children:[e.jsx("option",{value:"wait-desc",children:"Longest Wait"}),e.jsx("option",{value:"wait-asc",children:"Shortest Wait"}),e.jsx("option",{value:"name-asc",children:"Name A-Z"}),e.jsx("option",{value:"name-desc",children:"Name Z-A"})]}),e.jsxs("div",{className:"pd-status-tabs",children:[e.jsx("button",{className:`pd-status-tab ${d==="all"?"active":""}`,onClick:()=>j("all"),children:"All"}),e.jsxs("button",{className:`pd-status-tab ${d==="open"?"active":""}`,onClick:()=>j("open"),children:["Open (",m,")"]}),e.jsxs("button",{className:`pd-status-tab ${d==="closed"?"active":""}`,onClick:()=>j("closed"),children:["Closed (",h,")"]})]})]})]}),t.map(i=>{const o=l[i.name];return!o||o.length===0?null:e.jsx(as,{landName:i.name,rides:o,defaultExpanded:!0},i.name)}),u.length===0&&e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#94a3b8"},children:"No rides found matching your search."})]})}function rs({rides:s}){const t=s.filter(r=>r.status==="open"&&r.waitTime!==null),a=[{label:"< 20 min",color:"green",count:0},{label:"20-40",color:"amber",count:0},{label:"40-60",color:"orange",count:0},{label:"60+ min",color:"red",count:0}];for(const r of t){const c=r.waitTime||0;c<20?a[0].count++:c<40?a[1].count++:c<60?a[2].count++:a[3].count++}const n=Math.max(...a.map(r=>r.count),1);return e.jsxs("div",{className:"pd-distribution-section pd-section",children:[e.jsx("h2",{className:"pd-distribution-title",children:"Wait Time Distribution"}),e.jsx("div",{className:"pd-distribution-chart",children:a.map((r,c)=>e.jsxs("div",{className:"pd-distribution-bar",children:[e.jsx("span",{className:"pd-distribution-count",children:r.count}),e.jsx("div",{className:`pd-distribution-bar-fill ${r.color}`,style:{height:`${r.count/n*100}%`}}),e.jsx("span",{className:"pd-distribution-label",children:r.label})]},c))})]})}function is(){return e.jsxs("div",{className:"pd-container",children:[e.jsx("div",{className:"pd-skeleton pd-skeleton-hero"}),e.jsxs("div",{className:"pd-content",children:[e.jsx("div",{className:"pd-stats-grid",children:[1,2,3,4].map(s=>e.jsx("div",{className:"pd-skeleton pd-skeleton-stat"},s))}),e.jsx("div",{className:"pd-waits-section",children:[1,2,3,4,5,6].map(s=>e.jsx("div",{className:"pd-skeleton pd-skeleton-ride"},s))})]})]})}function xs({parkId:s,parkName:t,operator:a}){const[n,r]=x.useState(null),[c,d]=x.useState(null),[j,u]=x.useState(null),[l,m]=x.useState(null),[h,i]=x.useState(!0),[o,f]=x.useState(null);if(x.useEffect(()=>{async function b(){i(!0),f(null);try{const[g,A,y]=await Promise.all([fetch(`/api/parks/${s}.json`),fetch(`/api/park-hours/${s}.json`).catch(()=>null),fetch(`/api/entertainment/${s}.json`).catch(()=>null)]);if(!g.ok)throw new Error("Failed to fetch park data");const v=await g.json();if(r(v),A?.ok){const S=await A.json();d(S)}if(y?.ok){const S=await y.json();u(S)}const I=Ge(v.stats.avgWaitTime);m(I)}catch(g){f(g instanceof Error?g.message:"Unknown error")}finally{i(!1)}}b();const C=setInterval(b,300*1e3);return()=>clearInterval(C)},[s]),h)return e.jsx(is,{});if(o||!n)return e.jsx("div",{className:"pd-container",children:e.jsxs("div",{className:"pd-content",style:{textAlign:"center",padding:"80px 20px"},children:[e.jsx("h2",{style:{marginBottom:"16px",color:"#1e293b"},children:"Unable to load park data"}),e.jsx("p",{style:{color:"#64748b",marginBottom:"24px"},children:o}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"12px 24px",background:"#c2410c",color:"#fff",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Try Again"})]})});const p=k(n.stats.avgWaitTime),N=qe(c,Number(s),n.stats.ridesOpen);return e.jsxs("div",{className:"pd-container",children:[e.jsx(Xe,{parkId:Number(s),parkName:t,operator:a}),e.jsxs("div",{className:"pd-content",children:[N.closed&&e.jsx(Qe,{currentTime:N.currentTime,opensAt:N.opensAt,timezone:N.timezone}),e.jsx(Je,{stats:n.stats,hours:c,crowdLevel:p}),e.jsx(es,{historicalData:l}),e.jsx(ss,{entertainment:j}),e.jsx(ns,{rides:n.rides,lands:n.lands}),e.jsx(rs,{rides:n.rides})]})]})}export{xs as default};
