import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{a as ea,b as zi,C as Li}from"./api.BwuCBAwO.js";import{r as C}from"./index.Da02gyCa.js";import{c as ue,p as Bi,M as xt,C as oa}from"./parkImages.BwOBi-JW.js";import{s as Ht,g as ta,c as qa,C as Ut,d as Fi,T as Oi,S as Qe,b as Ye,a as _i,e as Ea,F as Gi}from"./resortPairings.BcELqoxQ.js";import{R as Ka,C as Ui,T as Ya,Z as kt}from"./zap.Vi7uFTV2.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ki=ue("arrow-right",qi);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ft=ue("award",Yi);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ae=ue("check",Vi);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Va=ue("chevron-left",Ji);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ot=ue("coffee",Qi);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xi=ue("download",Zi);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],ts=ue("droplets",es);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],is=ue("flame",as);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ca=ue("lightbulb",ss);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ns=ue("pause",rs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],ha=ue("route",os);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ls=ue("save",cs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ja=ue("sun",ds);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],Qa=ue("sunset",ps);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ms=ue("timer",hs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Za=ue("trash-2",us);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],ys=ue("trending-down",gs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],ws=ue("utensils",fs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vs=ue("x",ks),bs=["2025-01-01","2025-01-20","2025-02-17","2025-05-26","2025-07-04","2025-09-01","2025-10-13","2025-11-27","2025-11-28","2025-12-24","2025-12-25","2025-12-31","2026-01-01","2026-01-19","2026-02-16","2026-05-25","2026-07-03","2026-07-04","2026-09-07","2026-10-12","2026-11-26","2026-11-27","2026-12-24","2026-12-25","2026-12-31"],xs=[{start:"03-10",end:"04-20"},{start:"06-01",end:"08-20"},{start:"11-20",end:"12-01"},{start:"12-18",end:"01-05"}];function js(t,a,i){return a>i?t>=a||t<=i:t>=a&&t<=i}function Ze(t){const a=typeof t=="string"?new Date(t):t,i=a.toISOString().split("T")[0],s=a.getDay(),r=i.slice(5);return bs.includes(i)?"holiday":xs.some(p=>js(r,p.start,p.end))?s===0||s===6?"holiday":"weekend":s===0||s===6?"weekend":"weekday"}const Ns={weekday:[.7,.75,.9,1.1,1.2,1.15,1,.9,.95,1.05,.85,.7,.55],weekend:[.85,.95,1.1,1.3,1.4,1.35,1.15,1.05,1.1,1.25,1.05,.85,.65],holiday:[1,1.15,1.35,1.55,1.7,1.6,1.4,1.25,1.35,1.5,1.25,1,.8]},Ds={headliner:105,popular:55,moderate:30,low:12};function Ha(t,a){const i=Math.max(0,Math.min(12,t-9));return Ns[a][i]??1}function Rs(t){return Ds[t]}function Ss(t,a,i,s){const r=Rs(t),l=Ha(a,i);let p=r*l;if(s!=null&&s>0){const o=new Date().getHours(),n=r*Ha(o,i);if(n>0){const c=s/n;p=p*(.6+.4*c)}}return Math.round(p)}function ma(t,a,i){const s=[];for(let r=9;r<=21;r++)s.push(Ss(t,r,a,i));return s}const Ts={1:1.5,52:1.6,51:1.4,10:1.2,11:1.3,12:1.4,13:1.5,14:1.4,15:1.3,16:1.2,21:1.2,22:1.3,23:1.2,24:1.3,25:1.4,26:1.5,27:1.5,28:1.4,29:1.3,30:1.2,31:1.1,35:1.2,36:1.1,37:.9,38:.9,39:.9,40:.95,41:1,42:1.1,43:1.2,47:1.4,48:1.2};function Ms(t){const a=new Date(t.getFullYear(),0,1),i=t.getTime()-a.getTime(),s=10080*60*1e3;return Math.ceil((i+1)/s)}function Ps(t){const a=Ms(t);return Ts[a]??1}const As=2,Je={SAME_DAY_OF_WEEK:.5,YEAR_OVER_YEAR:.25,LIVE_DATA:.15,HARDCODED:.1};async function $s(t,a,i,s,r){try{const l=await t.query(ea.queries.predictions.getDataAvailability,{rideExternalId:a});if(!l||l.totalDaysOfData<As*7)return aa(s,i,r);const p=typeof i=="string"?new Date(i):i,o=p.getDay(),n=Ze(i),c=await t.query(ea.queries.predictions.getPredictionData,{rideExternalId:a,targetDate:p.toISOString().split("T")[0],targetDayOfWeek:o,weeksBack:4});let b=null;if(l.hasYearOverYearData){const k=await t.query(ea.queries.predictions.getYearOverYearData,{rideExternalId:a,targetDate:p.toISOString().split("T")[0]});k&&(b={hourlyAverages:k.hourlyAverages,sampleCount:k.sampleCount})}return!c||c.sampleCount===0?aa(s,i,r):Cs({sameDayData:{hourlyAverages:c.hourlyAverages,sampleCount:c.sampleCount,datesCount:c.datesCount,datesCovered:c.datesCovered,confidence:c.confidence},yearOverYearData:b,currentWaitTime:r??null,dayType:n,popularity:s,targetDate:p})}catch(l){return console.warn("Convex prediction failed, using fallback:",l),aa(s,i,r)}}function aa(t,a,i){const s=Ze(a);return{hourlyPredictions:ma(t,s,i),confidence:"fallback",dataSource:"hardcoded",reasoning:"Using pattern-based predictions. Historical data is still being collected."}}function Cs(t){const{sameDayData:a,yearOverYearData:i,currentWaitTime:s,dayType:r,popularity:l,targetDate:p}=t,o=Ps(p),n=ma(l,r,null),c=[];for(let w=9;w<=21;w++){let v=0,M=0;if(a.hourlyAverages[w]!==void 0&&(v+=a.hourlyAverages[w]*Je.SAME_DAY_OF_WEEK,M+=Je.SAME_DAY_OF_WEEK),i&&i.hourlyAverages[w]!==void 0&&(v+=i.hourlyAverages[w]*Je.YEAR_OVER_YEAR,M+=Je.YEAR_OVER_YEAR),s!==null&&s>0){const H=new Date().getHours(),S=a.hourlyAverages[H]??n[H-9];if(S>0){const Y=s/S,h=(a.hourlyAverages[w]??n[w-9])*Y;v+=h*Je.LIVE_DATA,M+=Je.LIVE_DATA}}const E=n[w-9]??30;v+=E*Je.HARDCODED,M+=Je.HARDCODED,M>0?v=v/M:v=E,v=v*o,c.push(Math.max(0,Math.round(v)))}let b="low";a.datesCount>=4&&i&&s!==null?b="high":a.datesCount>=2&&(b="medium");const k=i||s!==null?"blended":"convex",d=[];if(d.push(`Based on ${a.datesCount} ${Ws(p.getDay())}s of historical data`),i&&d.push("with year-over-year comparison"),s!==null&&d.push("adjusted for current conditions"),o!==1){const w=o>1?"busier season":"quieter season";d.push(`(${w})`)}return{hourlyPredictions:c,confidence:b,dataSource:k,reasoning:d.join(" ")+".",metadata:{datesUsed:a.datesCovered,sampleCount:a.sampleCount,hasYearOverYearData:i!==null}}}function Ws(t){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]}const Is=[{namePatterns:["battle at the ministry","ministry of magic"],popularity:"headliner",category:"thrill",duration:5},{namePatterns:["hagrid's magical creatures","hagrid's motorbike"],popularity:"headliner",category:"thrill",duration:3},{namePatterns:["velocicoaster"],popularity:"headliner",category:"thrill",duration:3},{namePatterns:["forbidden journey","harry potter and the forbidden"],popularity:"headliner",category:"thrill",duration:5},{namePatterns:["seven dwarfs mine train","seven dwarfs"],popularity:"headliner",category:"family",duration:3},{namePatterns:["tron lightcycle","tron"],popularity:"headliner",category:"thrill",duration:3},{namePatterns:["rise of the resistance","star wars rise"],popularity:"headliner",category:"thrill",duration:18},{namePatterns:["slinky dog dash","slinky dog"],popularity:"headliner",category:"family",duration:2},{namePatterns:["flight of passage","avatar flight"],popularity:"headliner",category:"thrill",duration:5},{namePatterns:["guardians of the galaxy","cosmic rewind"],popularity:"headliner",category:"thrill",duration:3},{namePatterns:["remy","remy's ratatouille","ratatouille"],popularity:"headliner",category:"family",duration:4},{namePatterns:["escape from gringotts","gringotts"],popularity:"popular",category:"thrill",duration:5},{namePatterns:["revenge of the mummy","mummy"],popularity:"popular",category:"thrill",duration:4},{namePatterns:["hollywood rip ride rockit","rip ride"],popularity:"popular",category:"thrill",duration:2},{namePatterns:["incredible hulk","hulk coaster"],popularity:"popular",category:"thrill",duration:2},{namePatterns:["jurassic world velocicoaster"],popularity:"popular",category:"thrill",duration:3},{namePatterns:["space mountain"],popularity:"popular",category:"thrill",duration:3},{namePatterns:["big thunder mountain","big thunder"],popularity:"popular",category:"thrill",duration:4},{namePatterns:["splash mountain"],popularity:"popular",category:"thrill",duration:11},{namePatterns:["peter pan's flight","peter pan"],popularity:"popular",category:"family",duration:3},{namePatterns:["tower of terror","twilight zone tower"],popularity:"popular",category:"thrill",duration:5},{namePatterns:["rock 'n' roller","rock n roller","aerosmith"],popularity:"popular",category:"thrill",duration:2},{namePatterns:["millennium falcon","smugglers run"],popularity:"popular",category:"thrill",duration:5},{namePatterns:["toy story mania"],popularity:"popular",category:"family",duration:7},{namePatterns:["expedition everest","everest"],popularity:"popular",category:"thrill",duration:3},{namePatterns:["na'vi river journey","navi river"],popularity:"popular",category:"family",duration:5},{namePatterns:["kilimanjaro safaris","safari"],popularity:"popular",category:"family",duration:22},{namePatterns:["test track"],popularity:"popular",category:"thrill",duration:5},{namePatterns:["frozen ever after","frozen"],popularity:"popular",category:"family",duration:5},{namePatterns:["soarin"],popularity:"popular",category:"family",duration:5},{namePatterns:["men in black","alien attack"],popularity:"moderate",category:"family",duration:5},{namePatterns:["simpsons ride","simpsons"],popularity:"moderate",category:"family",duration:5},{namePatterns:["transformers","3d battle"],popularity:"moderate",category:"thrill",duration:5},{namePatterns:["spider-man","amazing adventures"],popularity:"moderate",category:"thrill",duration:5},{namePatterns:["jurassic park river","jurassic world"],popularity:"moderate",category:"family",duration:7},{namePatterns:["pirates of the caribbean","pirates"],popularity:"moderate",category:"family",duration:8},{namePatterns:["haunted mansion"],popularity:"moderate",category:"family",duration:8},{namePatterns:["jungle cruise"],popularity:"moderate",category:"family",duration:10},{namePatterns:["buzz lightyear's space ranger","buzz lightyear"],popularity:"moderate",category:"family",duration:5},{namePatterns:["winnie the pooh","many adventures"],popularity:"moderate",category:"kids",duration:4},{namePatterns:["spaceship earth"],popularity:"moderate",category:"family",duration:15},{namePatterns:["living with the land","living seas"],popularity:"moderate",category:"family",duration:14},{namePatterns:["journey into imagination","figment"],popularity:"moderate",category:"family",duration:8},{namePatterns:["star tours"],popularity:"moderate",category:"thrill",duration:5},{namePatterns:["runaway railway","mickey & minnie"],popularity:"moderate",category:"family",duration:5},{namePatterns:["dinosaur"],popularity:"moderate",category:"thrill",duration:4},{namePatterns:["kali river rapids","kali river"],popularity:"moderate",category:"thrill",duration:5},{namePatterns:["carousel","cinderella","prince charming"],popularity:"low",category:"kids",duration:2},{namePatterns:["dumbo","flying elephants"],popularity:"low",category:"kids",duration:2},{namePatterns:["small world","it's a small world"],popularity:"low",category:"family",duration:15},{namePatterns:["tiki room","enchanted tiki"],popularity:"low",category:"show",duration:15},{namePatterns:["country bear","country bears"],popularity:"low",category:"show",duration:15},{namePatterns:["peoplemover","tomorrowland transit"],popularity:"low",category:"family",duration:10},{namePatterns:["astro orbiter"],popularity:"low",category:"kids",duration:2},{namePatterns:["magic carpets","aladdin"],popularity:"low",category:"kids",duration:2},{namePatterns:["one fish two fish","seuss"],popularity:"low",category:"kids",duration:3},{namePatterns:["cat in the hat"],popularity:"low",category:"kids",duration:4},{namePatterns:["caro-seuss-el"],popularity:"low",category:"kids",duration:2}];function ua(t){const a=t.toLowerCase().trim();for(const i of Is)for(const s of i.namePatterns)if(a.includes(s.toLowerCase()))return i;return null}function Es(t,a){const i=ua(t);return i?i.popularity:a==null?"moderate":a>=60?"headliner":a>=35?"popular":a>=15?"moderate":"low"}function Hs(t){return ua(t)?.category??"other"}function zs(t){return ua(t)?.duration??5}function Xa(t){return{id:t.id,name:t.name,land:t.land,isOpen:t.isOpen??!0,currentWaitTime:t.waitTime??null,popularity:Es(t.name,t.waitTime),category:Hs(t.name),duration:zs(t.name)}}function ei(t,a){const i=Xa(t),s=Ze(a),r=ma(i.popularity,s,i.currentWaitTime);return{...i,hourlyPredictions:r}}function Re(t,a){const i=Math.max(0,Math.min(12,a-9));return t.hourlyPredictions[i]??30}async function Ls(t,a,i){const s=Xa(a);if(t)try{const r=await $s(t,String(a.id),i,s.popularity,s.currentWaitTime);return{...s,hourlyPredictions:r.hourlyPredictions,predictionConfidence:r.confidence,predictionSource:r.dataSource}}catch(r){console.warn("Convex prediction failed, using fallback:",r)}return ei(a,i)}async function Bs(t,a,i){return await Promise.all(a.map(r=>Ls(t,r,i)))}function _t(t,a){const i=t>12?t-12:t===0?12:t,s=t>=12?"PM":"AM";return`${i}:${a.toString().padStart(2,"0")} ${s}`}function Fs(t){if(t==="rope-drop")return 9;const a=t.match(/(\d+)(am|pm)?/i);if(a){let i=parseInt(a[1],10);const s=a[2]?.toLowerCase();return s==="pm"&&i<12?i+=12:s==="am"&&i===12&&(i=0),i}return 9}const Os=22;function _s(t,a,i=Os){return a==="half-day"?Math.min(t+6,i):i}function ia(t,a,i){let s=a+i,r=t;for(;s>=60;)s-=60,r++;for(;s<0;)s+=60,r--;return{hour:r,minute:s}}function jt(t){return t.reduce((a,i)=>a+i,0)}function sa(t){return t.length===0?0:jt(t)/t.length}const za={"super nintendo world":{dining:[{name:"Toadstool Cafe",type:"quick-service",cuisine:"Japanese-Italian fusion",specialty:"Mushroom-themed dishes, Mario-inspired meals",priceRange:"$$",image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400&h=300&fit=crop"},{name:"1-UP Factory",type:"snack",specialty:"Interactive treats and themed snacks",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"}],shopping:[{name:"1-UP Factory",type:"merchandise",highlights:"Power-Up Bands, Mario merchandise, Nintendo collectibles",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[{name:"Power-Up Band Activities",type:"interactive",duration:15},{name:"Key Challenges",type:"interactive",duration:10}]},"the wizarding world of harry potter - ministry of magic":{dining:[{name:"Le Cirque Arcanus",type:"table-service",cuisine:"French",specialty:"Parisian-inspired magical dining",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Cafe LEstrange",type:"quick-service",specialty:"French pastries and magical beverages",priceRange:"$$",image:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400&h=300&fit=crop"}],shopping:[{name:"Wands by Gregorovitch",type:"specialty",highlights:"Interactive wands, wand customization",image:"https://images.unsplash.com/photo-1551269901-5c5e14c25df7?w=400&h=300&fit=crop"},{name:"Les Galeries Mirifiques",type:"merchandise",highlights:"Wizarding robes, magical artifacts",image:"https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=400&h=300&fit=crop"}],entertainment:[{name:"Interactive Wand Experiences",type:"interactive",duration:20}]},"ministry of magic":{dining:[{name:"Le Cirque Arcanus",type:"table-service",cuisine:"French",specialty:"Parisian-inspired magical dining",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Cafe LEstrange",type:"quick-service",specialty:"French pastries and magical beverages",priceRange:"$$",image:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400&h=300&fit=crop"}],shopping:[{name:"Wands by Gregorovitch",type:"specialty",highlights:"Interactive wands, wand customization",image:"https://images.unsplash.com/photo-1551269901-5c5e14c25df7?w=400&h=300&fit=crop"}],entertainment:[{name:"Interactive Wand Experiences",type:"interactive",duration:20}]},"dark universe":{dining:[{name:"Das Stakehaus",type:"quick-service",cuisine:"German",specialty:"Grilled meats and hearty fare",priceRange:"$$",image:"https://images.unsplash.com/photo-1544025162-d76694265947?w=400&h=300&fit=crop"},{name:"Monsters Cafe",type:"snack",specialty:"Monster-themed treats",priceRange:"$",image:"https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=400&h=300&fit=crop"}],shopping:[{name:"Dark Arts Curiosities",type:"specialty",highlights:"Classic monster merchandise, horror collectibles",image:"https://images.unsplash.com/photo-1509557965875-b88c97052f0e?w=400&h=300&fit=crop"}],entertainment:[{name:"Monster Character Encounters",type:"character-meet",duration:10}]},"how to train your dragon - isle of berk":{dining:[{name:"Mead Hall",type:"table-service",cuisine:"Viking-inspired",specialty:"Hearty Viking feasts, roasted meats",priceRange:"$$",image:"https://images.unsplash.com/photo-1432139555190-58524dae6a55?w=400&h=300&fit=crop"},{name:"The Rookery",type:"quick-service",specialty:"Dragon-themed snacks and drinks",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"}],shopping:[{name:"Hiccups Workshop",type:"merchandise",highlights:"Dragon toys, Viking gear, Toothless merchandise",image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop"}],entertainment:[{name:"Dragon Training",type:"interactive",duration:15},{name:"Meet Toothless",type:"character-meet",duration:10}]},"isle of berk":{dining:[{name:"Mead Hall",type:"table-service",cuisine:"Viking-inspired",specialty:"Hearty Viking feasts",priceRange:"$$",image:"https://images.unsplash.com/photo-1432139555190-58524dae6a55?w=400&h=300&fit=crop"}],shopping:[{name:"Hiccups Workshop",type:"merchandise",highlights:"Dragon toys, Viking gear",image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop"}],entertainment:[{name:"Meet Toothless",type:"character-meet",duration:10}]},"celestial park":{dining:[{name:"Starfall Racers Cafe",type:"quick-service",specialty:"Cosmic-themed dining",priceRange:"$$",image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop"},{name:"Galaxy Sweets",type:"snack",specialty:"Space-themed desserts and treats",priceRange:"$",image:"https://images.unsplash.com/photo-1488477181946-6428a0291777?w=400&h=300&fit=crop"}],shopping:[{name:"Celestial Gifts",type:"souvenirs",highlights:"Epic Universe merchandise, park souvenirs",image:"https://images.unsplash.com/photo-1472851294608-062f824d29cc?w=400&h=300&fit=crop"}],entertainment:[{name:"Celestial Park Shows",type:"show",duration:20}]},"the wizarding world of harry potter - hogsmeade":{dining:[{name:"Three Broomsticks",type:"quick-service",cuisine:"British",specialty:"Fish and chips, shepherds pie, Butterbeer",priceRange:"$$",image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop"},{name:"Hogs Head",type:"bar",specialty:"Butterbeer, specialty drinks",priceRange:"$$",image:"https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=300&fit=crop"}],shopping:[{name:"Ollivanders",type:"specialty",highlights:"Interactive wands, wand selection experience",image:"https://images.unsplash.com/photo-1551269901-5c5e14c25df7?w=400&h=300&fit=crop"},{name:"Honeydukes",type:"specialty",highlights:"Chocolate Frogs, Bertie Botts, wizarding sweets",image:"https://images.unsplash.com/photo-1499195333224-3ce974eecb47?w=400&h=300&fit=crop"},{name:"Filchs Emporium",type:"merchandise",highlights:"House robes, Dark Arts items, Hogwarts merchandise",image:"https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=400&h=300&fit=crop"}],entertainment:[{name:"Frog Choir",type:"show",duration:15},{name:"Interactive Wand Spells",type:"interactive",duration:20}]},hogsmeade:{dining:[{name:"Three Broomsticks",type:"quick-service",cuisine:"British",specialty:"Butterbeer, British fare",priceRange:"$$",image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop"}],shopping:[{name:"Ollivanders",type:"specialty",highlights:"Interactive wands",image:"https://images.unsplash.com/photo-1551269901-5c5e14c25df7?w=400&h=300&fit=crop"},{name:"Honeydukes",type:"specialty",highlights:"Wizarding sweets",image:"https://images.unsplash.com/photo-1499195333224-3ce974eecb47?w=400&h=300&fit=crop"}],entertainment:[{name:"Frog Choir",type:"show",duration:15}]},"jurassic park":{dining:[{name:"Thunder Falls Terrace",type:"quick-service",cuisine:"American",specialty:"Rotisserie chicken, ribs, views of the river ride",priceRange:"$$",image:"https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?w=400&h=300&fit=crop"},{name:"The Watering Hole",type:"snack",specialty:"Tropical drinks and snacks",priceRange:"$",image:"https://images.unsplash.com/photo-1497534446932-c925b458314e?w=400&h=300&fit=crop"}],shopping:[{name:"Jurassic Outfitters",type:"merchandise",highlights:"Dinosaur toys, Jurassic Park gear",image:"https://images.unsplash.com/photo-1567401893414-76b7b1e5a7a5?w=400&h=300&fit=crop"},{name:"Dinostore",type:"souvenirs",highlights:"Dinosaur fossils, educational items",image:"https://images.unsplash.com/photo-1557682250-33bd709cbe85?w=400&h=300&fit=crop"}],entertainment:[{name:"Raptor Encounter",type:"character-meet",duration:10}]},"marvel super hero island":{dining:[{name:"Cafe 4",type:"quick-service",cuisine:"Italian",specialty:"Pizza, pasta, in Fantastic Four setting",priceRange:"$$",image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400&h=300&fit=crop"},{name:"Captain America Diner",type:"quick-service",cuisine:"American",specialty:"Burgers, all-American fare",priceRange:"$$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"}],shopping:[{name:"Marvel Alterniverse Store",type:"merchandise",highlights:"Marvel Comics, superhero merchandise",image:"https://images.unsplash.com/photo-1612036782180-6f0b6cd846fe?w=400&h=300&fit=crop"},{name:"Spider-Man Shop",type:"specialty",highlights:"Spider-Man exclusive merchandise",image:"https://images.unsplash.com/photo-1635863138275-d9b33299680b?w=400&h=300&fit=crop"}],entertainment:[{name:"Meet Spider-Man",type:"character-meet",duration:10},{name:"Meet Captain America",type:"character-meet",duration:10}]},"seuss landing":{dining:[{name:"Green Eggs and Ham Cafe",type:"quick-service",specialty:"Green eggs and ham, kid-friendly options",priceRange:"$",image:"https://images.unsplash.com/photo-1525351484163-7529414344d8?w=400&h=300&fit=crop"},{name:"Circus McGurkus",type:"quick-service",cuisine:"American",specialty:"Pizza, pasta, fried chicken",priceRange:"$",image:"https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400&h=300&fit=crop"}],shopping:[{name:"All the Books You Can Read",type:"specialty",highlights:"Dr. Seuss books, Seuss character toys",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop"}],entertainment:[{name:"Oh! The Stories Youll Hear!",type:"show",duration:15}]},"the wizarding world of harry potter - diagon alley":{dining:[{name:"Leaky Cauldron",type:"quick-service",cuisine:"British",specialty:"Bangers and mash, fish and chips, Butterbeer",priceRange:"$$",image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop"},{name:"Florean Fortescues Ice Cream",type:"snack",specialty:"Magical ice cream flavors",priceRange:"$",image:"https://images.unsplash.com/photo-1501443762994-82bd5dace89a?w=400&h=300&fit=crop"}],shopping:[{name:"Ollivanders",type:"specialty",highlights:"Interactive wands",image:"https://images.unsplash.com/photo-1551269901-5c5e14c25df7?w=400&h=300&fit=crop"},{name:"Weasleys Wizard Wheezes",type:"specialty",highlights:"Joke products, Pygmy Puffs",image:"https://images.unsplash.com/photo-1513542789411-b6a5d4f31634?w=400&h=300&fit=crop"},{name:"Madam Malkins",type:"specialty",highlights:"Hogwarts robes, house merchandise",image:"https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=400&h=300&fit=crop"},{name:"Quality Quidditch Supplies",type:"specialty",highlights:"Quidditch gear, house team items",image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=400&h=300&fit=crop"}],entertainment:[{name:"Celestina Warbeck",type:"show",duration:15},{name:"Interactive Wand Spells",type:"interactive",duration:20},{name:"Gringotts Money Exchange",type:"interactive",duration:5}]},"diagon alley":{dining:[{name:"Leaky Cauldron",type:"quick-service",specialty:"British fare, Butterbeer",priceRange:"$$",image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop"}],shopping:[{name:"Ollivanders",type:"specialty",highlights:"Interactive wands",image:"https://images.unsplash.com/photo-1551269901-5c5e14c25df7?w=400&h=300&fit=crop"},{name:"Weasleys Wizard Wheezes",type:"specialty",highlights:"Joke products",image:"https://images.unsplash.com/photo-1513542789411-b6a5d4f31634?w=400&h=300&fit=crop"}],entertainment:[{name:"Interactive Wand Spells",type:"interactive",duration:20}]},springfield:{dining:[{name:"Krusty Burger",type:"quick-service",specialty:"Krusty Burger, Clogger burger",priceRange:"$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"},{name:"Moes Tavern",type:"bar",specialty:"Duff Beer, Flaming Moe",priceRange:"$$",image:"https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=300&fit=crop"},{name:"Lard Lad Donuts",type:"snack",specialty:"Giant pink donuts",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"}],shopping:[{name:"Kwik-E-Mart",type:"specialty",highlights:"Simpsons merchandise, Squishees",image:"https://images.unsplash.com/photo-1604719312566-8912e9227c6a?w=400&h=300&fit=crop"}],entertainment:[]},adventureland:{dining:[{name:"Jungle Navigation Co.",type:"quick-service",specialty:"Plant-based bowls, global flavors",priceRange:"$$",image:"https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400&h=300&fit=crop"},{name:"Aloha Isle",type:"snack",specialty:"Dole Whip",priceRange:"$",image:"https://images.unsplash.com/photo-1488477181946-6428a0291777?w=400&h=300&fit=crop"}],shopping:[{name:"Agrabah Bazaar",type:"merchandise",highlights:"Aladdin merchandise, exotic items",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"Pirates League",type:"interactive",duration:30}]},fantasyland:{dining:[{name:"Be Our Guest Restaurant",type:"table-service",cuisine:"French",specialty:"French cuisine in the Beast castle",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Pinocchio Village Haus",type:"quick-service",cuisine:"Italian",specialty:"Pizza, pasta",priceRange:"$",image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400&h=300&fit=crop"},{name:"Storybook Treats",type:"snack",specialty:"Soft-serve, specialty sundaes",priceRange:"$",image:"https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=400&h=300&fit=crop"}],shopping:[{name:"Bibbidi Bobbidi Boutique",type:"specialty",highlights:"Princess makeovers",image:"https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=400&h=300&fit=crop"},{name:"Castle Couture",type:"merchandise",highlights:"Princess merchandise",image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop"}],entertainment:[{name:"Meet Princesses at Fairytale Hall",type:"character-meet",duration:15}]},tomorrowland:{dining:[{name:"Cosmic Rays Starlight Cafe",type:"quick-service",cuisine:"American",specialty:"Burgers, chicken, rotisserie",priceRange:"$",image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop"},{name:"Auntie Gravitys Galactic Goodies",type:"snack",specialty:"Soft-serve, floats",priceRange:"$",image:"https://images.unsplash.com/photo-1488477181946-6428a0291777?w=400&h=300&fit=crop"}],shopping:[{name:"Tomorrowland Light & Power Co.",type:"merchandise",highlights:"Space Mountain merchandise, futuristic items",image:"https://images.unsplash.com/photo-1472851294608-062f824d29cc?w=400&h=300&fit=crop"}],entertainment:[{name:"Monsters Inc. Laugh Floor",type:"show",duration:15}]},"liberty square":{dining:[{name:"Liberty Tree Tavern",type:"table-service",cuisine:"American",specialty:"Thanksgiving feast, colonial atmosphere",priceRange:"$$",image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop"},{name:"Sleepy Hollow",type:"snack",specialty:"Waffle sandwiches, funnel cakes",priceRange:"$",image:"https://images.unsplash.com/photo-1562376552-0d160a2f238d?w=400&h=300&fit=crop"}],shopping:[{name:"Memento Mori",type:"specialty",highlights:"Haunted Mansion merchandise",image:"https://images.unsplash.com/photo-1509557965875-b88c97052f0e?w=400&h=300&fit=crop"}],entertainment:[]},frontierland:{dining:[{name:"Pecos Bill Tall Tale Inn",type:"quick-service",cuisine:"Tex-Mex",specialty:"Fajitas, nachos, burgers",priceRange:"$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"}],shopping:[{name:"Frontier Trading Post",type:"merchandise",highlights:"Western wear, cowboy items",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"Country Bear Jamboree",type:"show",duration:15}]},"new orleans square":{dining:[{name:"Blue Bayou Restaurant",type:"table-service",cuisine:"Cajun/Creole",specialty:"Fine dining inside Pirates of the Caribbean",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Café Orleans",type:"table-service",cuisine:"Cajun/Creole",specialty:"Monte Cristo sandwiches, beignets",priceRange:"$$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"},{name:"French Market",type:"quick-service",cuisine:"Southern",specialty:"Jambalaya, fried chicken, gumbo",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Mint Julep Bar",type:"snack",specialty:"Mint juleps, Mickey beignets",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"}],shopping:[{name:"Pieces of Eight",type:"specialty",highlights:"Pirate merchandise, exit shop for Pirates ride",image:"https://images.unsplash.com/photo-1509557965875-b88c97052f0e?w=400&h=300&fit=crop"},{name:"Cristal d'Orleans",type:"specialty",highlights:"Glass figurines, collectibles",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[]},"critter country":{dining:[{name:"Hungry Bear Restaurant",type:"quick-service",cuisine:"American",specialty:"Burgers, fried chicken, plant-based options",priceRange:"$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"}],shopping:[{name:"Pooh Corner",type:"merchandise",highlights:"Winnie the Pooh merchandise, candy",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[]},"star wars: galaxy's edge":{dining:[{name:"Docking Bay 7 Food and Cargo",type:"quick-service",cuisine:"Galactic",specialty:"Smoked Kaadu Ribs, Fried Endorian Tip-Yip",priceRange:"$$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Oga's Cantina",type:"bar",specialty:"Exotic galactic cocktails and snacks",priceRange:"$$",image:"https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop"},{name:"Ronto Roasters",type:"quick-service",specialty:"Ronto Wraps, grilled sausages",priceRange:"$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"},{name:"Milk Stand",type:"snack",specialty:"Blue and Green Milk",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"}],shopping:[{name:"Savi's Workshop",type:"specialty",highlights:"Build your own lightsaber experience",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"},{name:"Droid Depot",type:"specialty",highlights:"Build your own droid, Star Wars collectibles",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"},{name:"Toydarian Toymaker",type:"merchandise",highlights:"Handcrafted toys and plush",image:"https://images.unsplash.com/photo-1509557965875-b88c97052f0e?w=400&h=300&fit=crop"}],entertainment:[{name:"Character Encounters",type:"character-meet",duration:10}]},"mickey's toontown":{dining:[{name:"Café Daisy",type:"quick-service",cuisine:"American",specialty:"Kid-friendly meals, specialty drinks",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Good Boy! Grocers",type:"snack",specialty:"Churros, treats, cold drinks",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"}],shopping:[{name:"Gag Factory",type:"merchandise",highlights:"Classic Disney character merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[{name:"Mickey's House",type:"character-meet",duration:15},{name:"Minnie's House",type:"character-meet",duration:15},{name:"CenTOONial Park",type:"interactive",duration:20}]},"buena vista street":{dining:[{name:"Carthay Circle Restaurant",type:"table-service",cuisine:"American",specialty:"Upscale California cuisine, signature fried biscuits",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Fiddler, Fifer & Practical Café",type:"quick-service",cuisine:"American",specialty:"Starbucks coffee, pastries, sandwiches",priceRange:"$",image:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400&h=300&fit=crop"},{name:"Clarabelle's Hand-Scooped Ice Cream",type:"snack",specialty:"Hand-scooped ice cream, sundaes",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"}],shopping:[{name:"Elias & Co.",type:"merchandise",highlights:"Main gift shop, Disney merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"},{name:"Julius Katz & Sons",type:"specialty",highlights:"Home goods, kitchen items",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"Five & Dime",type:"show",duration:15}]},"hollywood land":{dining:[{name:"Award Wieners",type:"quick-service",specialty:"Gourmet hot dogs, loaded fries",priceRange:"$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"},{name:"Hollywood Lounge",type:"bar",specialty:"Craft cocktails, appetizers",priceRange:"$$",image:"https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop"}],shopping:[{name:"Off the Page",type:"specialty",highlights:"Disney animation art, collectibles",image:"https://images.unsplash.com/photo-1509557965875-b88c97052f0e?w=400&h=300&fit=crop"}],entertainment:[{name:"Disney Junior Dance Party!",type:"show",duration:25}]},"avengers campus":{dining:[{name:"Pym Test Kitchen",type:"quick-service",cuisine:"American",specialty:"Giant/tiny themed food, Quantum Pretzel",priceRange:"$$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Pym Tasting Lab",type:"bar",specialty:"Craft beers, specialty cocktails",priceRange:"$$",image:"https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop"},{name:"Shawarma Palace",type:"quick-service",specialty:"Shawarma wraps (like the Avengers!)",priceRange:"$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"}],shopping:[{name:"Avengers Headquarters",type:"merchandise",highlights:"Marvel merchandise, superhero gear",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"},{name:"WEB Suppliers",type:"specialty",highlights:"Spider-Man merchandise, WEB Shooters",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"Avengers Character Encounters",type:"character-meet",duration:10},{name:"Spider-Man Stunts",type:"show",duration:5}]},"cars land":{dining:[{name:"Flo's V8 Café",type:"quick-service",cuisine:"American",specialty:"Slow-cooked ribs, pot roast, Route 66 cuisine",priceRange:"$$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Cozy Cone Motel",type:"snack",specialty:"Cone-shaped treats, churros, ice cream",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"},{name:"Fillmore's Taste-In",type:"snack",specialty:"Organic snacks, fresh fruit, smoothies",priceRange:"$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"}],shopping:[{name:"Ramone's House of Body Art",type:"merchandise",highlights:"Cars merchandise, die-cast vehicles",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"},{name:"Sarge's Surplus Hut",type:"merchandise",highlights:"Cars merchandise, Route 66 souvenirs",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[]},"pacific wharf":{dining:[{name:"Pacific Wharf Café",type:"quick-service",cuisine:"American",specialty:"Sourdough bread bowls, clam chowder",priceRange:"$$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Cocina Cucamonga Mexican Grill",type:"quick-service",cuisine:"Mexican",specialty:"Street tacos, burritos, nachos",priceRange:"$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"},{name:"Rita's Baja Blenders",type:"bar",specialty:"Frozen margaritas, tropical drinks",priceRange:"$$",image:"https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop"}],shopping:[{name:"Bing Bong's Sweet Stuff",type:"specialty",highlights:"Candy, Pixar merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[]},"paradise gardens park":{dining:[{name:"Paradise Garden Grill",type:"quick-service",cuisine:"Mediterranean",specialty:"Gyros, kebabs, falafel",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Boardwalk Pizza & Pasta",type:"quick-service",cuisine:"Italian",specialty:"Pizza, pasta, breadsticks",priceRange:"$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"}],shopping:[{name:"Seaside Souvenirs",type:"souvenirs",highlights:"DCA merchandise, park memorabilia",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"The Little Mermaid - Ariel's Undersea Adventure",type:"show",duration:6}]},"pixar pier":{dining:[{name:"Lamplight Lounge",type:"table-service",cuisine:"American",specialty:"Gastropub fare, Pixar Ball-shaped desserts",priceRange:"$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Angry Dogs",type:"quick-service",specialty:"Hot dogs inspired by Anger from Inside Out",priceRange:"$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"},{name:"Adorable Snowman Frosted Treats",type:"snack",specialty:"Soft serve, lemon-flavored treats",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"}],shopping:[{name:"Knick's Knacks",type:"merchandise",highlights:"Pixar merchandise, Inside Out items",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"},{name:"Bing Bong's Sweet Stuff",type:"specialty",highlights:"Candy, memory orbs, Pixar collectibles",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[]},"grizzly peak":{dining:[{name:"Smokejumpers Grill",type:"quick-service",cuisine:"American",specialty:"Burgers, BBQ, craft beers",priceRange:"$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"}],shopping:[{name:"Rushin' River Outfitters",type:"merchandise",highlights:"Outdoor gear, Grizzly River Run merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[]},"upper lot":{dining:[{name:"Krusty Burger",type:"quick-service",cuisine:"American",specialty:"Simpsons-themed burgers and snacks",priceRange:"$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"},{name:"Three Broomsticks",type:"quick-service",cuisine:"British",specialty:"Fish and chips, shepherd's pie, butterbeer",priceRange:"$$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Hog's Head",type:"bar",specialty:"Butterbeer, Hog's Head Brew",priceRange:"$$",image:"https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop"}],shopping:[{name:"Ollivanders",type:"specialty",highlights:"Interactive wands, Harry Potter merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"},{name:"Universal Studio Store",type:"merchandise",highlights:"Park merchandise, souvenirs",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"WaterWorld",type:"show",duration:20}]},"lower lot":{dining:[{name:"Jurassic Café",type:"quick-service",cuisine:"American",specialty:"Burgers, chicken tenders, dinosaur-themed items",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"}],shopping:[{name:"Jurassic Outfitters",type:"merchandise",highlights:"Jurassic World merchandise, dinosaur toys",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[]},"world celebration":{dining:[{name:"Connections Eatery",type:"quick-service",cuisine:"American",specialty:"Pizza, pasta, salads",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Connections Café",type:"quick-service",specialty:"Starbucks coffee, pastries",priceRange:"$",image:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400&h=300&fit=crop"}],shopping:[{name:"Creations Shop",type:"merchandise",highlights:"EPCOT merchandise, Figment items",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[]},"world nature":{dining:[{name:"Sunshine Seasons",type:"quick-service",cuisine:"American",specialty:"Rotisserie chicken, fresh salads, grilled fish",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Garden Grill",type:"table-service",cuisine:"American",specialty:"Character dining with Chip & Dale, family-style meal",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Coral Reef Restaurant",type:"table-service",cuisine:"Seafood",specialty:"Fine seafood with aquarium views",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"}],shopping:[{name:"The Land Cart",type:"merchandise",highlights:"Nature-themed merchandise",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"Awesome Planet",type:"show",duration:10}]},"world discovery":{dining:[{name:"Space 220 Restaurant",type:"table-service",cuisine:"American",specialty:"Fine dining with space station views",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Space 220 Lounge",type:"bar",specialty:"Space-themed cocktails, appetizers",priceRange:"$$",image:"https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop"}],shopping:[{name:"Mission: SPACE Cargo Bay",type:"merchandise",highlights:"Space and astronaut merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[]},"world showcase":{dining:[{name:"Le Cellier Steakhouse",type:"table-service",cuisine:"Steakhouse",specialty:"Premium steaks, Canadian cheddar soup",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"San Angel Inn",type:"table-service",cuisine:"Mexican",specialty:"Authentic Mexican inside Mexico pyramid",priceRange:"$$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"},{name:"Teppan Edo",type:"table-service",cuisine:"Japanese",specialty:"Hibachi dining experience",priceRange:"$$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Les Halles Boulangerie-Patisserie",type:"quick-service",cuisine:"French",specialty:"Authentic French pastries, sandwiches",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"},{name:"Yorkshire County Fish Shop",type:"quick-service",cuisine:"British",specialty:"Fish and chips",priceRange:"$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"}],shopping:[{name:"Mitsukoshi",type:"specialty",highlights:"Japanese goods, pick-a-pearl",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"},{name:"Der Teddybär",type:"specialty",highlights:"German cuckoo clocks, Steiff bears",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[{name:"Voices of Liberty",type:"show",duration:15}]},"hollywood boulevard":{dining:[{name:"The Hollywood Brown Derby",type:"table-service",cuisine:"American",specialty:"Famous Cobb salad, grapefruit cake",priceRange:"$$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Catalina Eddie's",type:"quick-service",cuisine:"American",specialty:"Pizza, salads",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"}],shopping:[{name:"Celebrity 5 & 10",type:"merchandise",highlights:"Main gift shop, Hollywood Studios merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"},{name:"Keystone Clothiers",type:"merchandise",highlights:"Disney apparel, accessories",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[]},"sunset boulevard":{dining:[{name:"Hollywood Scoops",type:"snack",specialty:"Ice cream, sundaes",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"},{name:"Anaheim Produce",type:"snack",specialty:"Fresh fruit, healthy snacks",priceRange:"$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"}],shopping:[{name:"Tower Hotel Gifts",type:"merchandise",highlights:"Tower of Terror merchandise",image:"https://images.unsplash.com/photo-1509557965875-b88c97052f0e?w=400&h=300&fit=crop"},{name:"Rock Around the Shop",type:"merchandise",highlights:"Rock 'n' Roller Coaster merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[{name:"Fantasmic!",type:"show",duration:30}]},"echo lake":{dining:[{name:"50's Prime Time Café",type:"table-service",cuisine:"American",specialty:"Retro comfort food, mom's rules!",priceRange:"$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Hollywood & Vine",type:"table-service",cuisine:"American",specialty:"Character dining buffet",priceRange:"$$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Backlot Express",type:"quick-service",cuisine:"American",specialty:"Burgers, chicken, salads",priceRange:"$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"}],shopping:[{name:"Indiana Jones Adventure Outpost",type:"merchandise",highlights:"Indiana Jones merchandise",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"Indiana Jones Epic Stunt Spectacular!",type:"show",duration:35}]},"toy story land":{dining:[{name:"Woody's Lunch Box",type:"quick-service",cuisine:"American",specialty:"Totchos, grilled cheese, lunch box tarts",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"}],shopping:[{name:"Toy Story Land merchandise cart",type:"merchandise",highlights:"Toy Story character merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[]},"discovery island":{dining:[{name:"Flame Tree Barbecue",type:"quick-service",cuisine:"BBQ",specialty:"Smoked ribs, pulled pork, brisket",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Pizzafari",type:"quick-service",cuisine:"Italian",specialty:"Pizza, pasta, salads",priceRange:"$",image:"https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop"}],shopping:[{name:"Island Mercantile",type:"merchandise",highlights:"Main Animal Kingdom gift shop",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"},{name:"Disney Outfitters",type:"merchandise",highlights:"Safari and animal-themed merchandise",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"It's Tough to be a Bug!",type:"show",duration:10}]},africa:{dining:[{name:"Tusker House Restaurant",type:"table-service",cuisine:"African",specialty:"Character dining buffet, African flavors",priceRange:"$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Harambe Market",type:"quick-service",cuisine:"African",specialty:"Ribs, chicken, sausages from open-air stalls",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Dawa Bar",type:"bar",specialty:"African-inspired cocktails",priceRange:"$$",image:"https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop"}],shopping:[{name:"Mombasa Marketplace",type:"merchandise",highlights:"African crafts, animal merchandise",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[{name:"Festival of the Lion King",type:"show",duration:30}]},asia:{dining:[{name:"Yak & Yeti Restaurant",type:"table-service",cuisine:"Asian",specialty:"Pan-Asian cuisine, ahi tuna nachos",priceRange:"$$",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop"},{name:"Yak & Yeti Local Food Cafes",type:"quick-service",cuisine:"Asian",specialty:"Asian bowls, egg rolls",priceRange:"$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"}],shopping:[{name:"Serka Zong Bazaar",type:"merchandise",highlights:"Expedition Everest merchandise",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[{name:"Feathered Friends in Flight!",type:"show",duration:25}]},"pandora - the world of avatar":{dining:[{name:"Satu'li Canteen",type:"quick-service",cuisine:"Alien",specialty:"Customizable bowls, unique alien cuisine",priceRange:"$$",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop"},{name:"Pongu Pongu",type:"bar",specialty:"Night Blossom frozen drink, Mo'ara Margarita",priceRange:"$$",image:"https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop"}],shopping:[{name:"Windtraders",type:"specialty",highlights:"Banshee adoption, Avatar merchandise, Na'vi collectibles",image:"https://images.unsplash.com/photo-1531525645387-7f14be1bdbbd?w=400&h=300&fit=crop"}],entertainment:[]},"dinoland u.s.a.":{dining:[{name:"Restaurantosaurus",type:"quick-service",cuisine:"American",specialty:"Burgers, chicken nuggets, kids meals",priceRange:"$",image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"},{name:"Dino-Bite Snacks",type:"snack",specialty:"Churros, pretzels, ice cream",priceRange:"$",image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400&h=300&fit=crop"}],shopping:[{name:"Chester & Hester's Dinosaur Treasures",type:"merchandise",highlights:"Dinosaur toys, DinoLand souvenirs",image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=400&h=300&fit=crop"}],entertainment:[]}};function Lt(t){const a=t.toLowerCase().trim();for(const[i,s]of Object.entries(za))if(i.toLowerCase()===a)return s;for(const[i,s]of Object.entries(za))if(a.includes(i.toLowerCase())||i.toLowerCase().includes(a))return s;return null}function Gs(t,a,i){const s=Lt(a);if(!s)return t==="meal"?i>=17?"Perfect time for dinner while peak crowds thin out.":"Great time for lunch! Crowds will ease by the time you finish.":"Take a break and explore the area - grab a snack and browse the shops.";const r=[];if(s.dining.length>0){const l=t==="meal"?s.dining.find(p=>p.type==="table-service"||p.type==="quick-service"):s.dining.find(p=>p.type==="snack"||p.type==="bar");if(l){const p=l.specialty?` - ${l.specialty}`:"";r.push(`Try ${l.name}${p}`)}}if(s.shopping.length>0){const l=s.shopping[0],p=l.highlights?` for ${l.highlights}`:"";r.push(`Browse ${l.name}${p}`)}if(t==="rest"&&s.entertainment.length>0){const l=s.entertainment[0];r.push(`Check out ${l.name}`)}return r.length===0?"Take a break and explore the area.":r.join(". ")+"."}function Us(t,a,i,s=null){const r={shouldBreak:!1,reason:"",breakType:"snack",breakDuration:0,resumeAtHour:a,waitTimeSavings:0,suggestion:""};if(!i||t.length===0)return{...r,reason:"Breaks disabled or no remaining rides"};const l=t.filter(S=>S.popularity==="headliner"),p=t.filter(S=>S.popularity!=="headliner"),o=l.length>0?l:t.filter(S=>S.popularity==="popular"),n=l.length>0?p:t.filter(S=>S.popularity!=="popular");if(o.length===0||n.length===0)return{...r,reason:"Not enough ride variety for smart break analysis"};if(!o.some(S=>{const Y=Re(S,a),h=Math.max(...S.hourlyPredictions);return Y>=h*.8}))return{...r,reason:"Priority rides not at peak - good time to ride them"};if(!n.every(S=>{const Y=Re(S,a),h=sa(S.hourlyPredictions);return Y>=h})){const S=n.filter(Y=>{const h=Re(Y,a),u=sa(Y.hourlyPredictions);return h<u});return{...r,reason:`${S.length} smaller ride(s) have below-average waits now`}}let k=a,d=0;for(let S=a+1;S<=a+2&&!(S>21);S++){const Y=jt(t.map(j=>Re(j,a))),h=jt(t.map(j=>Re(j,S))),u=Y-h;u>d&&(d=u,k=S)}const w=(k-a)*60;if(d<w*.5)return{...r,reason:`Wait time savings (${Math.round(d)} min) don't justify ${w} min break`};const v=qs(a,Math.min(w,60)),M=s?Gs(v,s,a):Ks(v,a),E=o.map(S=>S.name).slice(0,2).join(", "),H=Math.round(sa(o.map(S=>Re(S,a))));return{shouldBreak:!0,reason:`${E} extremely busy (~${H} min). All selected rides have above-average waits. Break saves ~${Math.round(d)} min total.`,breakType:v,breakDuration:Math.min(w,60),resumeAtHour:k,waitTimeSavings:Math.round(d),suggestion:M}}function qs(t,a){return t>=11&&t<=13||t>=17&&t<=19?a>=30?"meal":"snack":t>=14&&t<=16?"rest":"snack"}function Ks(t,a){switch(t){case"meal":return a>=11&&a<=13?"Great time for lunch! Crowds will ease by the time you finish.":"Perfect time for dinner while peak crowds thin out.";case"rest":return"Take a rest - find some shade or AC. The afternoon heat brings out peak crowds.";case"snack":return"Grab a snack and hydrate. Wait times will improve soon.";default:return"Take a break and recharge."}}function Ys(t,a,i){const s=i+t.breakDuration,r=a+Math.floor(s/60),l=s%60;return{type:t.breakType,startTime:_t(a,i),endTime:_t(r,l),duration:t.breakDuration,reason:t.reason,suggestion:t.suggestion,waitTimeSavings:t.waitTimeSavings}}function Vs(t,a){return t>=90||a>=3}const zt={"tron lightcycle":{weight:100,mustDo:!0,category:"headliner",notes:"Newest headliner, extremely popular"},"seven dwarfs mine train":{weight:95,mustDo:!0,category:"headliner",notes:"Family coaster, always long waits"},"space mountain":{weight:90,mustDo:!0,category:"headliner",notes:"Classic indoor coaster"},"big thunder mountain":{weight:88,mustDo:!0,category:"headliner",notes:"Wildest ride in the wilderness"},"tiana's bayou adventure":{weight:92,mustDo:!0,category:"headliner",notes:"New in 2024, replaced Splash Mountain"},"splash mountain":{weight:92,mustDo:!0,category:"headliner",notes:"Classic log flume (now Tianas)"},"pirates of the caribbean":{weight:85,mustDo:!0,category:"popular",notes:"Iconic boat ride"},"haunted mansion":{weight:85,mustDo:!0,category:"popular",notes:"999 happy haunts"},"peter pan's flight":{weight:80,mustDo:!1,category:"popular",notes:"Classic dark ride, long waits"},"jungle cruise":{weight:75,mustDo:!1,category:"popular",notes:"Skipper jokes, recently updated"},"buzz lightyear":{weight:70,mustDo:!1,category:"popular",notes:"Interactive shooter ride"},"it's a small world":{weight:60,mustDo:!1,category:"family",notes:"Classic boat ride"},"small world":{weight:60,mustDo:!1,category:"family"},"the many adventures of winnie the pooh":{weight:55,mustDo:!1,category:"family"},"winnie the pooh":{weight:55,mustDo:!1,category:"family"},"under the sea":{weight:55,mustDo:!1,category:"family",notes:"Little Mermaid dark ride"},"little mermaid":{weight:55,mustDo:!1,category:"family"},"prince charming regal carrousel":{weight:40,mustDo:!1,category:"family"},carrousel:{weight:40,mustDo:!1,category:"family"},dumbo:{weight:50,mustDo:!1,category:"family",notes:"Classic spinner"},"magic carpets":{weight:45,mustDo:!1,category:"family"},barnstormer:{weight:50,mustDo:!1,category:"family",notes:"Kids first coaster"},"tomorrowland speedway":{weight:45,mustDo:!1,category:"family"},"astro orbiter":{weight:40,mustDo:!1,category:"standard"},peoplemover:{weight:55,mustDo:!1,category:"family",notes:"Relaxing tour of Tomorrowland"},"tomorrowland transit authority":{weight:55,mustDo:!1,category:"family"},"liberty square riverboat":{weight:35,mustDo:!1,category:"standard"},"tom sawyer island":{weight:30,mustDo:!1,category:"standard"},"country bear jamboree":{weight:40,mustDo:!1,category:"standard"},"walt disney's enchanted tiki room":{weight:40,mustDo:!1,category:"standard"},"tiki room":{weight:40,mustDo:!1,category:"standard"},"hall of presidents":{weight:35,mustDo:!1,category:"standard"},"mickey's philharmagic":{weight:50,mustDo:!1,category:"family",notes:"3D show"},philharmagic:{weight:50,mustDo:!1,category:"family"},"monsters inc laugh floor":{weight:45,mustDo:!1,category:"standard"},"laugh floor":{weight:45,mustDo:!1,category:"standard"},"guardians of the galaxy: cosmic rewind":{weight:100,mustDo:!0,category:"headliner",notes:"EPCOTs first coaster, reverse launch"},"cosmic rewind":{weight:100,mustDo:!0,category:"headliner"},"test track":{weight:92,mustDo:!0,category:"headliner",notes:"Fastest WDW ride at 65mph, reopened 2025"},"frozen ever after":{weight:88,mustDo:!0,category:"popular",notes:"Frozen boat ride, long waits"},"remy's ratatouille adventure":{weight:85,mustDo:!0,category:"popular",notes:"Trackless dark ride"},ratatouille:{weight:85,mustDo:!0,category:"popular"},"soarin' around the world":{weight:85,mustDo:!0,category:"popular",notes:"Hang glider simulator"},soarin:{weight:85,mustDo:!0,category:"popular"},"spaceship earth":{weight:70,mustDo:!1,category:"family",notes:"Iconic EPCOT ride, may be closed for refurb"},"living with the land":{weight:55,mustDo:!1,category:"family",notes:"Boat ride through greenhouses"},"the seas with nemo":{weight:50,mustDo:!1,category:"family"},nemo:{weight:50,mustDo:!1,category:"family"},"journey into imagination":{weight:45,mustDo:!1,category:"family",notes:"Figment ride"},figment:{weight:45,mustDo:!1,category:"family"},"gran fiesta tour":{weight:45,mustDo:!1,category:"family",notes:"Three Caballeros boat ride"},"three caballeros":{weight:45,mustDo:!1,category:"family"},"mission: space":{weight:60,mustDo:!1,category:"standard",notes:"Intense spinner, not for everyone"},"mission space":{weight:60,mustDo:!1,category:"standard"},"turtle talk with crush":{weight:40,mustDo:!1,category:"standard"},"rise of the resistance":{weight:100,mustDo:!0,category:"headliner",notes:"Best ride at WDW per many rankings"},"tower of terror":{weight:95,mustDo:!0,category:"headliner",notes:"Twilight Zone drop tower"},"rock 'n' roller coaster":{weight:90,mustDo:!0,category:"headliner",notes:"Launch coaster with inversions"},"rock n roller":{weight:90,mustDo:!0,category:"headliner"},aerosmith:{weight:90,mustDo:!0,category:"headliner"},"millennium falcon":{weight:85,mustDo:!0,category:"popular",notes:"Pilot the Falcon"},"smugglers run":{weight:85,mustDo:!0,category:"popular"},"slinky dog dash":{weight:82,mustDo:!0,category:"popular",notes:"Family coaster, long waits"},"mickey & minnie's runaway railway":{weight:80,mustDo:!0,category:"popular",notes:"Trackless dark ride"},"runaway railway":{weight:80,mustDo:!0,category:"popular"},"toy story mania":{weight:78,mustDo:!1,category:"popular",notes:"4D shooter game"},"alien swirling saucers":{weight:50,mustDo:!1,category:"family",notes:"Gentle spinner"},"muppet vision 3d":{weight:55,mustDo:!1,category:"family"},muppet:{weight:55,mustDo:!1,category:"family"},"star tours":{weight:65,mustDo:!1,category:"standard",notes:"Star Wars simulator"},"indiana jones stunt":{weight:50,mustDo:!1,category:"standard"},"avatar flight of passage":{weight:100,mustDo:!0,category:"headliner",notes:"Best ride at AK, possibly WDW"},"flight of passage":{weight:100,mustDo:!0,category:"headliner"},"expedition everest":{weight:92,mustDo:!0,category:"headliner",notes:"Yeti coaster, forwards and backwards"},everest:{weight:92,mustDo:!0,category:"headliner"},"kilimanjaro safaris":{weight:88,mustDo:!0,category:"popular",notes:"Real safari experience"},safari:{weight:88,mustDo:!0,category:"popular"},"na'vi river journey":{weight:75,mustDo:!1,category:"popular",notes:"Beautiful boat ride, amazing animatronic"},"navi river":{weight:75,mustDo:!1,category:"popular"},"kali river rapids":{weight:70,mustDo:!1,category:"popular",notes:"You will get soaked"},dinosaur:{weight:65,mustDo:!1,category:"family",notes:"Closing 2026"},"gorilla falls":{weight:50,mustDo:!1,category:"family"},"maharajah jungle trek":{weight:45,mustDo:!1,category:"family"},"wildlife express train":{weight:40,mustDo:!1,category:"family"},"triceratop spin":{weight:35,mustDo:!1,category:"standard"},zootopia:{weight:75,mustDo:!1,category:"popular",notes:"Opened Nov 2025"},"indiana jones adventure":{weight:98,mustDo:!0,category:"headliner",notes:"Unique to Disneyland"},"indiana jones":{weight:98,mustDo:!0,category:"headliner"},"matterhorn bobsleds":{weight:95,mustDo:!0,category:"headliner",notes:"First tubular steel coaster, unique"},matterhorn:{weight:95,mustDo:!0,category:"headliner"},"rise of the resistance dl":{weight:100,mustDo:!0,category:"headliner"},"mr. toad":{weight:75,mustDo:!1,category:"popular",notes:"Classic, unique to DL"},"mr. toad's wild ride":{weight:75,mustDo:!1,category:"popular"},"alice in wonderland":{weight:65,mustDo:!1,category:"family",notes:"Unique to DL"},"snow white's enchanted wish":{weight:60,mustDo:!1,category:"family"},"snow white's scary adventures":{weight:60,mustDo:!1,category:"family"},"pinocchio's daring journey":{weight:55,mustDo:!1,category:"family"},pinocchio:{weight:55,mustDo:!1,category:"family"},"finding nemo submarine voyage":{weight:60,mustDo:!1,category:"family"},submarine:{weight:60,mustDo:!1,category:"family"},"roger rabbit's car toon spin":{weight:65,mustDo:!1,category:"family"},"roger rabbit":{weight:65,mustDo:!1,category:"family"},"radiator springs racers":{weight:100,mustDo:!0,category:"headliner",notes:"Best DCA ride"},"guardians of the galaxy - mission: breakout":{weight:95,mustDo:!0,category:"headliner",notes:"Randomized drop tower"},"mission breakout":{weight:95,mustDo:!0,category:"headliner"},breakout:{weight:95,mustDo:!0,category:"headliner"},incredicoaster:{weight:88,mustDo:!0,category:"headliner",notes:"High-speed coaster"},"web slingers":{weight:82,mustDo:!0,category:"popular",notes:"Spider-Man shooter ride"},"spider-man":{weight:82,mustDo:!0,category:"popular"},"soarin over california":{weight:85,mustDo:!0,category:"popular"},"grizzly river run":{weight:75,mustDo:!1,category:"popular",notes:"River rapids, you will get wet"},"toy story midway mania":{weight:78,mustDo:!1,category:"popular"},"midway mania":{weight:78,mustDo:!1,category:"popular"},"monsters inc":{weight:55,mustDo:!1,category:"family"},"mike & sulley":{weight:55,mustDo:!1,category:"family"},"little mermaid dca":{weight:50,mustDo:!1,category:"family"},"ariel's undersea adventure":{weight:50,mustDo:!1,category:"family"},"goofy sky school":{weight:55,mustDo:!1,category:"family",notes:"Wild mouse coaster"},"sky school":{weight:55,mustDo:!1,category:"family"},"golden zephyr":{weight:35,mustDo:!1,category:"standard"},"silly symphony swings":{weight:40,mustDo:!1,category:"standard"},"jumpin jellyfish":{weight:35,mustDo:!1,category:"standard"},"luigi's rollickin' roadsters":{weight:50,mustDo:!1,category:"family"},luigi:{weight:50,mustDo:!1,category:"family"},"mater's junkyard jamboree":{weight:50,mustDo:!1,category:"family"},mater:{weight:50,mustDo:!1,category:"family"},"hagrid's magical creatures":{weight:100,mustDo:!0,category:"headliner",notes:"Best Universal ride"},hagrid:{weight:100,mustDo:!0,category:"headliner"},velocicoaster:{weight:98,mustDo:!0,category:"headliner",notes:"Intense coaster"},"harry potter and the forbidden journey":{weight:95,mustDo:!0,category:"headliner"},"forbidden journey":{weight:95,mustDo:!0,category:"headliner"},"revenge of the mummy":{weight:85,mustDo:!0,category:"popular"},mummy:{weight:85,mustDo:!0,category:"popular"},"the incredible hulk coaster":{weight:90,mustDo:!0,category:"headliner"},hulk:{weight:90,mustDo:!0,category:"headliner"},"the amazing adventures of spider-man":{weight:85,mustDo:!0,category:"popular"},"jurassic world velocicoaster":{weight:98,mustDo:!0,category:"headliner"},"starfall racers":{weight:95,mustDo:!0,category:"headliner",notes:"Dueling coaster"},"stardust racers":{weight:95,mustDo:!0,category:"headliner"},"harry potter and the battle at the ministry":{weight:98,mustDo:!0,category:"headliner"},"ministry of magic":{weight:98,mustDo:!0,category:"headliner"},"how to train your dragon":{weight:90,mustDo:!0,category:"headliner"},hiccup:{weight:90,mustDo:!0,category:"headliner"}};function ct(t){const a=t.toLowerCase().trim();if(zt[a])return zt[a];for(const[s,r]of Object.entries(zt))if(a.includes(s)||s.includes(a))return r;const i=a.split(/\s+/).filter(s=>s.length>3);for(const[s,r]of Object.entries(zt))for(const l of i)if(s.includes(l))return r;return{weight:50,mustDo:!1,category:"standard",notes:"Unknown ride - using default weight"}}function Nt(t,a){const i=ct(t);let s=0;switch(a){case"thrill":i.category==="headliner"&&(s=10),i.category==="family"&&(s=-10);break;case"family":i.category==="family"&&(s=15),i.category==="headliner"&&(s=-5);break}return Math.max(10,Math.min(100,i.weight+s))}function ti(t,a,i,s,r){const l=Re(t,a),p=120,o=t.hourlyPredictions.reduce((u,j)=>u+j,0)/t.hourlyPredictions.length,n=Math.min(...t.hourlyPredictions),c=Math.max(0,Math.round(150-l/p*150));let b=0;l<=n*1.1?b=30:l<o*.8?b=25:l<o?b=15:l>o*1.2?b=-20:b=0;let k=0;if(s===null)k=50;else if(t.land&&s){const u=t.land.toLowerCase().trim(),j=s.toLowerCase().trim();u===j?k=100:ai(u,j)?k=60:k=0}const d=Nt(t.name,r),w=Math.round(d/100*60);let v;const M=l<=o;switch(t.popularity){case"headliner":v=M?40:20;break;case"popular":v=M?25:15;break;case"moderate":v=10;break;case"low":v=5;break;default:v=5}const E=l+t.duration;let H;E<30?H=20:E<60?H=15:E<90?H=10:H=5;let S=0;r!=="balanced"&&(r==="thrill"&&t.category==="thrill"||r==="family"&&(t.category==="family"||t.category==="kids")||r==="shows"&&t.category==="show"?S=50:S=-15);const Y=0,h=c+k+w+v+H+b+S;return{ride:t,hour:a,totalScore:h,breakdown:{waitTimeScore:c,priorityScore:v,varietyScore:Y,efficiencyScore:H,proximityScore:k,rideWeightScore:w}}}function ai(t,a){const i={"main street, u.s.a.":["adventureland","tomorrowland"],adventureland:["main street, u.s.a.","frontierland"],frontierland:["adventureland","liberty square"],"liberty square":["frontierland","fantasyland"],fantasyland:["liberty square","tomorrowland"],tomorrowland:["fantasyland","main street, u.s.a."],"world celebration":["world nature","world showcase"],"world nature":["world celebration","world showcase"],"world discovery":["world celebration","world showcase"],"world showcase":["world celebration","world nature","world discovery"],"hollywood boulevard":["echo lake","sunset boulevard"],"sunset boulevard":["hollywood boulevard"],"echo lake":["hollywood boulevard","star wars: galaxy's edge"],"star wars: galaxy's edge":["echo lake","toy story land"],"toy story land":["star wars: galaxy's edge","animation courtyard"],"discovery island":["africa","asia","pandora","dinoland u.s.a."],africa:["discovery island","asia"],asia:["africa","discovery island","dinoland u.s.a."],"pandora - the world of avatar":["discovery island"],pandora:["discovery island"],"dinoland u.s.a.":["discovery island","asia"],"production central":["new york","hollywood"],"new york":["production central","san francisco"],"san francisco":["new york","the wizarding world of harry potter - diagon alley"],"the wizarding world of harry potter - diagon alley":["san francisco","world expo"],"diagon alley":["san francisco","world expo"],"world expo":["diagon alley","springfield"],springfield:["world expo","woody woodpecker's kidzone"],hollywood:["production central"],"port of entry":["marvel super hero island","seuss landing"],"marvel super hero island":["port of entry","toon lagoon"],"toon lagoon":["marvel super hero island","skull island"],"skull island":["toon lagoon","jurassic park"],"jurassic park":["skull island","the wizarding world of harry potter - hogsmeade"],"the wizarding world of harry potter - hogsmeade":["jurassic park","the lost continent"],hogsmeade:["jurassic park","the lost continent"],"the lost continent":["hogsmeade","seuss landing"],"seuss landing":["the lost continent","port of entry"],"celestial park":["super nintendo world","the wizarding world of harry potter - ministry of magic","dark universe","how to train your dragon - isle of berk"],"super nintendo world":["celestial park","the wizarding world of harry potter - ministry of magic"],"the wizarding world of harry potter - ministry of magic":["celestial park","super nintendo world","how to train your dragon - isle of berk"],"ministry of magic":["celestial park","super nintendo world","how to train your dragon - isle of berk"],"dark universe":["celestial park","how to train your dragon - isle of berk"],"how to train your dragon - isle of berk":["celestial park","dark universe","the wizarding world of harry potter - ministry of magic"],"isle of berk":["celestial park","dark universe","ministry of magic"],"new orleans square":["adventureland","critter country","frontierland"],"critter country":["new orleans square","star wars: galaxy's edge"],"mickey's toontown":["fantasyland"],"buena vista street":["hollywood land","grizzly peak"],"hollywood land":["buena vista street","avengers campus"],"avengers campus":["hollywood land","cars land"],"cars land":["avengers campus","pacific wharf"],"pacific wharf":["cars land","paradise gardens park","grizzly peak"],"paradise gardens park":["pacific wharf","pixar pier"],"pixar pier":["paradise gardens park"],"grizzly peak":["buena vista street","pacific wharf"],"upper lot":["lower lot"],"lower lot":["upper lot"]},s=i[t]||[],r=i[a]||[];return s.includes(a)||r.includes(t)}function vt(t,a){if(!t||!a)return 10;const i=t.toLowerCase().trim(),s=a.toLowerCase().trim();return i===s?3:ai(i,s)?8:15}function Js(t,a,i,s,r){if(t.length===0)return null;const l=t.map(p=>ti(p,a,i,s,r));return l.sort((p,o)=>o.totalScore-p.totalScore),l[0]?.ride??null}function Qs(t,a,i,s){const r=Re(t,a),l=Math.round(t.hourlyPredictions.reduce((n,c)=>n+c,0)/t.hourlyPredictions.length),p=Math.min(...t.hourlyPredictions),o=[];if(r<=p*1.15)o.push(`Optimal time - lowest wait of the day (~${r} min)`);else if(r<l*.8){const n=Math.round(l-r);o.push(`${n} min below daily average`)}else r<l&&o.push("Below average wait time");return t.popularity==="headliner"&&r<=l&&o.push("Headliner at optimal window"),i.breakdown.proximityScore>=80?o.push("Same area - no walking needed"):i.breakdown.proximityScore>=50&&o.push("Adjacent area - minimal walk"),i.breakdown.efficiencyScore>=18&&r<=l&&o.push("Quick experience"),o.length===0&&(r<=l?o.push(`Good timing (~${r} min wait)`):o.push(`~${r} min wait`)),o.join(". ")+"."}function Zs(t,a){return[...t].sort((i,s)=>{const r=Nt(i.name,a);return Nt(s.name,a)-r})}const ii={6:{parkId:6,parkName:"Magic Kingdom",generalTips:["Head to the back of the park first - Fantasyland and Tomorrowland fill up quickly","Seven Dwarfs Mine Train has the biggest wait time difference between rope drop and midday","Consider skipping Main Street shops on arrival - they'll be there all day"],targets:[{rideName:"Seven Dwarfs Mine Train",priority:1,typicalRopeDropWait:20,typicalMiddayWait:90,notes:"THE rope drop target at MK - wait difference of 70+ minutes"},{rideName:"TRON Lightcycle / Run",rideNameAliases:["TRON","Lightcycle"],priority:1,typicalRopeDropWait:30,typicalMiddayWait:100,requiresVirtualQueue:!0,boardingGroupTips:"Join virtual queue at 7 AM. If missed, try standby at rope drop."},{rideName:"Space Mountain",priority:2,typicalRopeDropWait:25,typicalMiddayWait:65},{rideName:"Big Thunder Mountain Railroad",priority:2,typicalRopeDropWait:15,typicalMiddayWait:55},{rideName:"Peter Pan's Flight",rideNameAliases:["Peter Pan"],priority:2,typicalRopeDropWait:25,typicalMiddayWait:70,notes:"Always has a line - rope drop is the best time"}],suggestedOrder:["Seven Dwarfs Mine Train","Peter Pan's Flight","Space Mountain","Big Thunder Mountain Railroad"]},5:{parkId:5,parkName:"EPCOT",generalTips:["Guardians of the Galaxy and Remy are the main rope drop targets","Test Track has single rider line that stays short most of the day","World Showcase doesn't open until 11 AM"],targets:[{rideName:"Guardians of the Galaxy: Cosmic Rewind",rideNameAliases:["Guardians","Cosmic Rewind"],priority:1,typicalRopeDropWait:35,typicalMiddayWait:120,requiresVirtualQueue:!0,boardingGroupTips:"Virtual queue at 7 AM is essential. Standby sometimes available."},{rideName:"Remy's Ratatouille Adventure",rideNameAliases:["Remy","Ratatouille"],priority:1,typicalRopeDropWait:25,typicalMiddayWait:75},{rideName:"Frozen Ever After",rideNameAliases:["Frozen"],priority:2,typicalRopeDropWait:30,typicalMiddayWait:70},{rideName:"Test Track",priority:2,typicalRopeDropWait:30,typicalMiddayWait:65,notes:"Single rider line is often faster than standby"}],suggestedOrder:["Guardians of the Galaxy: Cosmic Rewind","Remy's Ratatouille Adventure","Frozen Ever After","Test Track"]},7:{parkId:7,parkName:"Disney's Hollywood Studios",generalTips:["Rise of the Resistance is THE rope drop priority - run there first","Slinky Dog and Mickey & Minnie's Runaway Railway are also great rope drop targets","Tower of Terror and Rock 'n' Roller Coaster stay reasonable throughout the day"],targets:[{rideName:"Star Wars: Rise of the Resistance",rideNameAliases:["Rise of the Resistance","ROTR"],priority:1,typicalRopeDropWait:45,typicalMiddayWait:120,notes:"Most popular ride at WDW - rope drop essential"},{rideName:"Slinky Dog Dash",rideNameAliases:["Slinky Dog"],priority:1,typicalRopeDropWait:25,typicalMiddayWait:80},{rideName:"Mickey & Minnie's Runaway Railway",rideNameAliases:["Runaway Railway"],priority:2,typicalRopeDropWait:30,typicalMiddayWait:70},{rideName:"Millennium Falcon: Smugglers Run",rideNameAliases:["Millennium Falcon","Smugglers Run"],priority:2,typicalRopeDropWait:25,typicalMiddayWait:55}],suggestedOrder:["Star Wars: Rise of the Resistance","Slinky Dog Dash","Mickey & Minnie's Runaway Railway","Millennium Falcon: Smugglers Run"]},8:{parkId:8,parkName:"Disney's Animal Kingdom",generalTips:["Flight of Passage is the must-do rope drop - get there 30 min before open","Na'vi River Journey has shorter waits but still benefits from rope drop","Kilimanjaro Safaris is best early when animals are active"],targets:[{rideName:"Avatar Flight of Passage",rideNameAliases:["Flight of Passage"],priority:1,typicalRopeDropWait:35,typicalMiddayWait:120,notes:"THE rope drop target - saves 85+ minutes"},{rideName:"Na'vi River Journey",priority:2,typicalRopeDropWait:25,typicalMiddayWait:65},{rideName:"Kilimanjaro Safaris",priority:2,typicalRopeDropWait:15,typicalMiddayWait:45,notes:"Animals most active in early morning"},{rideName:"Expedition Everest",priority:3,typicalRopeDropWait:15,typicalMiddayWait:45}],suggestedOrder:["Avatar Flight of Passage","Na'vi River Journey","Kilimanjaro Safaris","Expedition Everest"]},16:{parkId:16,parkName:"Disneyland",generalTips:["Rise of the Resistance and Indiana Jones are top rope drop priorities","Matterhorn Bobsleds benefits significantly from rope drop","Space Mountain and Big Thunder stay moderate throughout the day"],targets:[{rideName:"Star Wars: Rise of the Resistance",rideNameAliases:["Rise of the Resistance"],priority:1,typicalRopeDropWait:40,typicalMiddayWait:100},{rideName:"Indiana Jones Adventure",rideNameAliases:["Indiana Jones"],priority:1,typicalRopeDropWait:25,typicalMiddayWait:75},{rideName:"Matterhorn Bobsleds",rideNameAliases:["Matterhorn"],priority:2,typicalRopeDropWait:20,typicalMiddayWait:60},{rideName:"Big Thunder Mountain Railroad",priority:2,typicalRopeDropWait:15,typicalMiddayWait:50}],suggestedOrder:["Star Wars: Rise of the Resistance","Indiana Jones Adventure","Matterhorn Bobsleds","Big Thunder Mountain Railroad"]},17:{parkId:17,parkName:"Disney California Adventure",generalTips:["Radiator Springs Racers is THE rope drop target - run to Cars Land first","Guardians of the Galaxy (tower) and WEB SLINGERS are also great early","Incredicoaster stays reasonable most of the day"],targets:[{rideName:"Radiator Springs Racers",rideNameAliases:["RSR","Radiator Springs"],priority:1,typicalRopeDropWait:30,typicalMiddayWait:90,notes:"THE rope drop target at DCA - saves 60+ minutes"},{rideName:"WEB SLINGERS: A Spider-Man Adventure",rideNameAliases:["WEB SLINGERS","Spider-Man"],priority:1,typicalRopeDropWait:25,typicalMiddayWait:65},{rideName:"Guardians of the Galaxy - Mission: BREAKOUT!",rideNameAliases:["Guardians","Mission Breakout","Tower of Terror"],priority:2,typicalRopeDropWait:20,typicalMiddayWait:50},{rideName:"Incredicoaster",priority:3,typicalRopeDropWait:15,typicalMiddayWait:40}],suggestedOrder:["Radiator Springs Racers","WEB SLINGERS: A Spider-Man Adventure","Guardians of the Galaxy - Mission: BREAKOUT!","Incredicoaster"]},65:{parkId:65,parkName:"Universal Studios Florida",generalTips:["Hagrid's is in Islands of Adventure, not this park","Revenge of the Mummy and Hollywood Rip Ride Rockit benefit from rope drop","Harry Potter and the Escape from Gringotts is the top target here"],targets:[{rideName:"Harry Potter and the Escape from Gringotts",rideNameAliases:["Gringotts","Escape from Gringotts"],priority:1,typicalRopeDropWait:30,typicalMiddayWait:75},{rideName:"Revenge of the Mummy",rideNameAliases:["Mummy"],priority:2,typicalRopeDropWait:15,typicalMiddayWait:45},{rideName:"Hollywood Rip Ride Rockit",rideNameAliases:["Rip Ride Rockit"],priority:2,typicalRopeDropWait:20,typicalMiddayWait:50}],suggestedOrder:["Harry Potter and the Escape from Gringotts","Revenge of the Mummy","Hollywood Rip Ride Rockit"]},64:{parkId:64,parkName:"Islands of Adventure",generalTips:["Hagrid's is THE rope drop target - be at the gate 30+ minutes early","VelociCoaster is also a great rope drop target","The Forbidden Journey stays reasonable if you miss rope drop"],targets:[{rideName:"Hagrid's Magical Creatures Motorbike Adventure",rideNameAliases:["Hagrid","Hagrid's"],priority:1,typicalRopeDropWait:35,typicalMiddayWait:120,notes:"Most popular ride at Universal - rope drop or very late evening"},{rideName:"VelociCoaster",priority:1,typicalRopeDropWait:25,typicalMiddayWait:70},{rideName:"Harry Potter and the Forbidden Journey",rideNameAliases:["Forbidden Journey"],priority:2,typicalRopeDropWait:20,typicalMiddayWait:55},{rideName:"The Amazing Adventures of Spider-Man",rideNameAliases:["Spider-Man"],priority:3,typicalRopeDropWait:10,typicalMiddayWait:35}],suggestedOrder:["Hagrid's Magical Creatures Motorbike Adventure","VelociCoaster","Harry Potter and the Forbidden Journey"]},334:{parkId:334,parkName:"Epic Universe",generalTips:["As a new park, all lands will be busy - pick your must-do world first","Ministry of Magic (Harry Potter) and Mario Kart will likely be top targets","Consider starting in the world furthest from the entrance"],targets:[{rideName:"Harry Potter and the Battle at the Ministry",rideNameAliases:["Battle at the Ministry","Ministry"],priority:1,typicalRopeDropWait:45,typicalMiddayWait:120,notes:"Expected to be the most popular ride at Epic Universe"},{rideName:"Mario Kart: Bowser's Challenge",rideNameAliases:["Mario Kart"],priority:1,typicalRopeDropWait:40,typicalMiddayWait:100},{rideName:"Donkey Kong Mine Cart Madness",rideNameAliases:["Donkey Kong","Mine Cart"],priority:2,typicalRopeDropWait:30,typicalMiddayWait:75},{rideName:"Curse of the Werewolf",priority:2,typicalRopeDropWait:25,typicalMiddayWait:60},{rideName:"Stardust Racers",priority:2,typicalRopeDropWait:25,typicalMiddayWait:55}],suggestedOrder:["Harry Potter and the Battle at the Ministry","Mario Kart: Bowser's Challenge","Donkey Kong Mine Cart Madness","Stardust Racers"]}};function ga(t){return ii[t]||null}function si(t,a){const i=ii[a];if(!i)return null;const s=t.toLowerCase();for(const r of i.targets)if(r.rideName.toLowerCase()===s||r.rideNameAliases?.some(l=>s.includes(l.toLowerCase()))||s.includes(r.rideName.toLowerCase().split(":")[0]))return r;return null}function Xs(t,a,i){const s=si(t,a);return s?s.typicalRopeDropWait:Math.max(5,Math.round(i*.4))}const ya=10,er=2,tr=20;function La(t){const a=t.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!a)return 0;let i=parseInt(a[1],10);const s=parseInt(a[2],10),r=a[3].toUpperCase();return r==="PM"&&i!==12&&(i+=12),r==="AM"&&i===12&&(i=0),i*60+s}function Ba(t){const a=Math.floor(t/60),i=t%60,s=a>=12?"PM":"AM";return`${a>12?a-12:a===0?12:a}:${i.toString().padStart(2,"0")} ${s}`}function ar(t){const a=t.filter(r=>r.type==="ride");if(a.length===0)return t;const i=a[0],s=a[a.length-1];return t.map(r=>r.type!=="ride"?r:r===i?r.reasoning?.includes("🎯")?r:{...r,reasoning:`🌅 Kick off your day with this ride! ${r.reasoning}`}:r===s&&s!==i?{...r,reasoning:`🌙 Wrap up your adventure with this ride! ${r.reasoning}`}:r)}function ir(t){if(t.length<2)return t;const a=[];for(let i=0;i<t.length;i++){const s=t[i];if(a.push(s),i<t.length-1){const r=t[i+1],l=La(s.time),p=(s.expectedWait??0)+(s.duration??0),o=l+p,n=La(r.time),c=n-o;if(c>=tr&&s.type==="ride"&&r.type==="ride"){const b=Ba(o);Ba(n);const k=Math.floor(o/60);let d,w;k>=10&&k<14?(d="Perfect time to explore nearby shops or grab a snack!",w="🛍️"):k>=14&&k<17?(d="Take a breather - explore the area or cool off with a treat!",w="☕"):k>=17&&k<20?(d="Enjoy the atmosphere! Browse shops or find a good spot for photos.",w="📸"):(d="Free time to explore, rest, or grab a quick bite!",w="✨"),a.push({time:b,type:"break",name:"Explore & Relax",duration:c,reasoning:`${w} ${Math.round(c)} minutes until your next ride. ${d}`})}}}return a}function sr(t,a,i){const s=Re(t,a);let r=s,l=a;for(let c=a+1;c<i;c++){const b=Re(t,c);b<r&&(r=b,l=c)}const p=s/Math.max(r,1),o=s-r;return{shouldDefer:p>=2&&o>=30||o>=45&&s>=60,bestLaterHour:l,currentWait:s,bestLaterWait:r}}function rr(t,a,i,s,r,l=!1,p,o){const n=[],c=new Set,b=new Set,k=new Set;let d=a,w=0,v=null,M=null,E=0,H=0;const S=l&&p?ga(p):null,Y=a+er;let h;for(l&&S?h=dr(t,S,s,o):h=Zs(t,s);d<i&&c.size<t.length;){const u=h.filter(_=>!c.has(_.id)&&!k.has(_.id));if(u.length===0)break;if(r&&Vs(E,H)){const _=Us(u,d,r,M);if(_.shouldBreak){const Ke=Ys(_,d,w);n.push({time:_t(d,w),type:_.breakType==="meal"?"meal":"break",name:_.breakType==="meal"?d>=17?"Dinner Break":"Lunch Break":_.breakType==="rest"?"Rest Break":"Snack Break",duration:_.breakDuration,reasoning:_.reason,breakInfo:Ke});const Te=ia(d,w,_.breakDuration);d=Te.hour,w=Te.minute,E=0,H=0;continue}}const j=[],N=[];for(const _ of u){const Ke=sr(_,d,i);Ke.shouldDefer?N.push({ride:_,deferInfo:Ke}):j.push(_)}const P=j.length>0?j:u,L=l&&d<Y;let $=null;if(L&&o&&n.length===0){const _=o.toLowerCase();$=u.find(Ke=>{const Te=Ke.name.toLowerCase();return Te===_||Te.includes(_)||_.includes(Te)})??null}if($||($=Js(P,d,v,M,s)),!$)break;const V=ti($,d,v,M,s);let W=Qs($,d,V),I;if(L&&p){const _=si($.name,p);if(o&&(()=>{const Te=o.toLowerCase(),dt=$.name.toLowerCase();return dt===Te||dt.includes(Te)||Te.includes(dt)})()&&_)I=_.typicalRopeDropWait,W=`🎯 Your rope drop priority! Hitting this first saves ~${_.typicalMiddayWait-_.typicalRopeDropWait} min vs midday.`;else if(_)I=_.typicalRopeDropWait;else{const Te=Re($,d);I=Xs($.name,p,Te)}}else I=Re($,d);const Se=i*60;if(d*60+w>=Se)break;const Xe=vt(M,$.land),$e=ia(d,w,I+$.duration+Xe);if($e.hour*60+$e.minute>Se){k.add($.id);continue}b.has($.id)&&(W=`Now optimal time for this ride. ${W}`),N.find(_=>_.ride.id===$.id)&&j.length===0&&(W=`Best option available right now. ${W}`),n.push({time:_t(d,w),type:"ride",name:$.name,expectedWait:I,duration:$.duration,reasoning:W,ride:$}),c.add($.id),b.delete($.id);const lt=M;v=$.category,M=$.land||null;const qt=vt(lt,$.land),et=I+$.duration+qt,Rt=ia(d,w,et);d=Rt.hour,w=Rt.minute,E+=et,H++;for(const{ride:_}of N)c.has(_.id)||b.add(_.id)}return n}function nr(t,a){let i=0,s=a;for(const r of t){const l=Re(r,Math.min(s,21));i+=l,s+=Math.ceil((l+r.duration+ya)/60)}return i}function or(t,a){if(t.length===0)return 0;const i=t[t.length-1];return i.expectedWait??0+(i.duration??0),t.reduce((s,r)=>r.type==="ride"?s+(r.expectedWait??0)+(r.duration??5)+ya:s+(r.duration??30),0)}function cr(t,a,i,s,r){const l=[];if(r.ropeDropMode&&r.parkId&&ga(r.parkId)){const w=t.filter(v=>v.type==="ride"&&v.reasoning?.includes("Rope drop target"));if(w.length>0){const v=w.reduce((M,E)=>{const H=E.reasoning?.match(/Save ~(\d+) min/);return M+(H?parseInt(H[1]):0)},0);l.push(`🎯 Rope drop strategy: ${w.length} high-value targets, ~${v} min saved vs midday.`)}}i>15&&l.push(`Optimized order saves ~${i} min of waiting (${s}% improvement).`);const p=a.filter(d=>d.popularity==="headliner");p.length>0&&t.filter(w=>w.type==="ride"&&p.some(v=>v.name===w.name)).length>0&&l.push("Headliner attractions scheduled during lower-wait windows.");const o=t.filter(d=>d.type!=="ride");if(o.length>0){const d=jt(o.map(w=>w.breakInfo?.waitTimeSavings??0));d>0&&l.push(`Strategic breaks save ~${d} min while crowds thin out.`)}const n=t.filter(d=>d.type==="ride"&&d.ride?.land).map(d=>d.ride.land);if(n.length>=3){let d=0;for(let v=1;v<n.length;v++)n[v].toLowerCase()===n[v-1].toLowerCase()&&d++;const w=Math.round(d/(n.length-1)*100);d>=2&&l.push(`${w}% of rides grouped by location - minimizes walking time.`)}const c=t.filter(d=>d.type==="ride"&&d.ride),b=c.filter(d=>{if(!d.ride)return!1;const w=d.ride.hourlyPredictions.reduce((v,M)=>v+M,0)/d.ride.hourlyPredictions.length;return(d.expectedWait||0)<w}).length;b>c.length*.6&&l.push(`${b} of ${c.length} rides scheduled at below-average wait times.`);const k=t.filter(d=>d.type==="ride");if(k.length>0){const d=k[0];(d.time?.includes("9:")||d.time?.includes("10:"))&&l.push("Arriving early captures the lowest wait times of the day.")}return l}function lr(t){return{items:[],totalWaitTime:0,totalWalkingTime:0,totalDuration:0,ridesScheduled:0,breaksScheduled:0,insights:[t],comparisonToBaseline:{waitTimeSaved:0,percentImprovement:0}}}function dr(t,a,i,s){const r=new Map;for(const n of a.targets)if(r.set(n.rideName.toLowerCase(),n.priority),n.rideNameAliases)for(const c of n.rideNameAliases)r.set(c.toLowerCase(),n.priority);const l=new Map;a.suggestedOrder.forEach((n,c)=>{l.set(n.toLowerCase(),c)});const p=s?.toLowerCase(),o=n=>{if(!p)return!1;const c=n.toLowerCase();return c===p||c.includes(p)||p.includes(c)};return[...t].sort((n,c)=>{const b=n.name.toLowerCase(),k=c.name.toLowerCase(),d=o(n.name),w=o(c.name);if(d&&!w)return-1;if(!d&&w)return 1;const v=r.has(b)||[...r.keys()].some(S=>b.includes(S)),M=r.has(k)||[...r.keys()].some(S=>k.includes(S));if(v&&!M)return-1;if(!v&&M)return 1;if(v&&M){const S=r.get(b)??[...r.entries()].find(([j])=>b.includes(j))?.[1]??99,Y=r.get(k)??[...r.entries()].find(([j])=>k.includes(j))?.[1]??99;if(S!==Y)return S-Y;const h=l.get(b)??[...l.entries()].find(([j])=>b.includes(j))?.[1]??99,u=l.get(k)??[...l.entries()].find(([j])=>k.includes(j))?.[1]??99;return h-u}const E=Nt(n.name,i);return Nt(c.name,i)-E})}async function Fa(t,a){const{selectedRides:i,preferences:s}=t,r=Fs(s.arrivalTime),l=_s(r,s.duration,s.parkCloseHour),p=new Date(s.visitDate),o=await Bs(a,i.map(h=>({id:h.id,name:h.name,land:h.land,isOpen:h.isOpen,waitTime:h.waitTime})),p),n=o.filter(h=>h.isOpen);if(n.length===0)return lr("No open rides available");let c=rr(n,r,l,s.priority,s.includeBreaks,s.ropeDropMode??!1,s.parkId,s.ropeDropTarget);s.skipFirstLastEnhancement||(c=ar(c)),c=ir(c);const b=c.filter(h=>h.type==="ride"),k=c.filter(h=>h.type!=="ride"),d=jt(b.map(h=>h.expectedWait??0)),w=b.length*ya,v=or(c),M=nr(n,r),E=Math.max(0,M-d),H=M>0?Math.round(E/M*100):0,S=cr(c,n,E,H,{includeBreaks:s.includeBreaks,duration:s.duration,ropeDropMode:s.ropeDropMode,parkId:s.parkId}),Y=o.filter(h=>h.predictionSource==="convex"||h.predictionSource==="blended");return Y.length>0&&S.unshift(`Predictions powered by ${Y.length} rides with historical data.`),{items:c,totalWaitTime:d,totalWalkingTime:w,totalDuration:v,ridesScheduled:b.length,breaksScheduled:k.length,insights:S,comparisonToBaseline:{waitTimeSaved:E,percentImprovement:H}}}const pr={"TRON Lightcycle / Run":"","Seven Dwarfs Mine Train":"","Space Mountain":"","Big Thunder Mountain Railroad":"","Tiana's Bayou Adventure":"","Pirates of the Caribbean":"","Haunted Mansion":""},hr={"Guardians of the Galaxy: Cosmic Rewind":"","Test Track":"","Frozen Ever After":"","Remy's Ratatouille Adventure":"","Soarin' Around the World":""},mr={"Star Wars: Rise of the Resistance":"","The Twilight Zone Tower of Terror":"","Rock 'n' Roller Coaster Starring Aerosmith":"","Millennium Falcon: Smugglers Run":"","Slinky Dog Dash":"","Mickey & Minnie's Runaway Railway":""},ur={"Avatar Flight of Passage":"","Expedition Everest":"","Kilimanjaro Safaris":""},gr={"Indiana Jones Adventure":"https://d23.com/app/uploads/2025/02/1180w_664h_.jpg","Matterhorn Bobsleds":"https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/630/354/75/dam/wdpro-assets/dlr/parks-and-tickets/attractions/disneyland/matterhorn-bobsleds/matterhorn-bobsleds-00.jpg?1726240582369","Star Wars: Rise of the Resistance":"https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/1600/900/75/dam/disneyland/attractions/disneyland/star-wars-rise-of-the-resistance/rise-of-the-resisstance-interior-16x9.jpg?1762865005140","Space Mountain":"https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/410/205/75/dam/disneyland/destinations/disneyland/tomorrowland/space-mountain-night-16x9.jpg?1747061483711","Big Thunder Mountain Railroad":"https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/1600/900/75/dam/wdpro-assets/dlr/parks-and-tickets/attractions/disneyland/big-thunder-mountain-railroad/big-thunder-mountain-railroad-00.jpg?1726239725975","Pirates of the Caribbean":"https://sites.disney.com/app/uploads/sites/55/2019/11/Pirates01.png","Haunted Mansion":"https://i.ytimg.com/vi/pP708F223tA/maxresdefault.jpg","Tiana's Bayou Adventure":"https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/1600/900/75/vision-dam/digital/parks-platform/parks-global-assets/disney-world/attractions/tianas-bayou-adventure/Tianas-Bayou-Adventure-16x9.jpg?2024-08-09T14:36:22+00:00","Mickey & Minnie's Runaway Railway":"https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/1600/900/75/vision-dam/digital/parks-platform/parks-global-assets/disneyland/attractions/mickey-minnies-runaway-railway/MMRR-Exterior-16x9.jpg?2023-02-03T17:34:52+00:00","Millennium Falcon: Smugglers Run":"https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/630/354/75/dam/disneyland/attractions/disneyland/millennium-falcon-smugglers-run/smugglers-run-interior-16x9.jpg?1726239762399"},yr={"Radiator Springs Racers":"","Guardians of the Galaxy - Mission: BREAKOUT!":"",Incredicoaster:"","WEB SLINGERS: A Spider-Man Adventure":"","Soarin' Over California":""},fr={"Hagrid's Magical Creatures Motorbike Adventure":"","Revenge of the Mummy":"","Harry Potter and the Escape from Gringotts":""},wr={VelociCoaster:"","The Incredible Hulk Coaster":"","Harry Potter and the Forbidden Journey":"","Hagrid's Magical Creatures Motorbike Adventure":""},kr={"Starfall Racers":"","Harry Potter and the Battle at the Ministry":"","How to Train Your Dragon - Untrainable":"","Mario Kart: Bowser's Challenge":"","Curse of the Werewolf":""},vr={"Harry Potter and the Forbidden Journey":"","Jurassic World - The Ride":"","Revenge of the Mummy - The Ride":"","The Secret Life of Pets: Off the Leash!":""},br={magicKingdom:pr,epcot:hr,hollywoodStudios:mr,animalKingdom:ur,disneyland:gr,californiaAdventure:yr,universalStudiosOrlando:fr,islandsOfAdventure:wr,epicUniverse:kr,universalStudiosHollywood:vr},ri={6:"75ea578a-adc8-4116-a54d-dccb60765ef9",5:"47f90d2c-e191-4239-a466-5892ef59a88b",7:"288747d1-8b4f-4a64-867e-ea7c9b27bad8",8:"1c84a229-8862-4648-9c71-378ddd2c7693",16:"7340550b-c14d-4def-80bb-acdb51d49a66",17:"832fcd51-ea19-4e77-85c7-75d5843b127c",64:"267615cc-8943-4c2a-ae2c-5da728ca591f",65:"eb3f4560-2383-4a36-9152-6b3e5ed6bc57",334:"12dbb85b-265f-44e6-bccf-f1faa17211fc",66:"bc4005c5-8c7e-41d7-b349-cdddf1796427"},ni={5:"America/New_York",6:"America/New_York",7:"America/New_York",8:"America/New_York",64:"America/New_York",65:"America/New_York",334:"America/New_York",16:"America/Los_Angeles",17:"America/Los_Angeles",66:"America/Los_Angeles"};function Oa(t,a){const i=t>12?t-12:t===0?12:t,s=t>=12?"PM":"AM";return`${i}:${a.toString().padStart(2,"0")} ${s}`}function ra(t){const a=t.match(/T(\d{2}):(\d{2})/);if(a)return{hour:parseInt(a[1],10),minute:parseInt(a[2],10)};const i=new Date(t);return{hour:i.getHours(),minute:i.getMinutes()}}function xr(t){return ri[t]||null}async function jr(t,a){const i=xr(t);if(!i)return console.warn(`No ThemeParks.wiki mapping for park ID: ${t}`),null;try{const s=await fetch(`https://api.themeparks.wiki/v1/entity/${i}/schedule`);if(!s.ok)throw new Error(`ThemeParks.wiki API error: ${s.status}`);const r=await s.json(),l=a?a.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],p=r.schedule.find(k=>k.date===l&&k.type==="OPERATING"),o=r.schedule.find(k=>k.date===l&&k.type==="EXTRA_HOURS");if(!p)return console.warn(`No operating schedule found for date: ${l}`),null;const n=ra(p.openingTime),c=ra(p.closingTime),b={parkId:t,parkName:oi(t),date:l,timezone:ni[t]||"America/New_York",openHour:n.hour,openMinute:n.minute,closeHour:c.hour,closeMinute:c.minute,openingTimeFormatted:Oa(n.hour,n.minute),closingTimeFormatted:Oa(c.hour,c.minute),hasExtendedHours:!!o};if(o){const k=ra(o.closingTime);b.extendedCloseHour=k.hour,b.extendedCloseMinute=k.minute}return b}catch(s){return console.error(`Error fetching park schedule for ID ${t}:`,s),null}}function oi(t){return{6:"Magic Kingdom",5:"EPCOT",7:"Disney's Hollywood Studios",8:"Disney's Animal Kingdom",16:"Disneyland",17:"Disney California Adventure",64:"Islands of Adventure",65:"Universal Studios Florida",334:"Epic Universe",66:"Universal Studios Hollywood"}[t]||"Unknown Park"}function Nr(t){const a=[5,6,7,8,16,17].includes(t);return{parkId:t,parkName:oi(t),date:new Date().toISOString().split("T")[0],timezone:ni[t]||"America/New_York",openHour:9,openMinute:0,closeHour:a?21:22,closeMinute:0,openingTimeFormatted:"9:00 AM",closingTimeFormatted:a?"9:00 PM":"10:00 PM",hasExtendedHours:!1}}async function _a(t,a){return await jr(t,a)||Nr(t)}const ci=["fireworks","happily ever after","luminous","wondrous journeys","enchantment","harmonious","epcot forever","illuminations","remember... dreams come true","wishes"],li=["world of color","fantasmic","rivers of light","fountains"],di=["parade","festival of fantasy","magic happens","boo to you","once upon a christmastime","electrical parade","main street electrical","paint the night","spectromagic"],Dr=["cavalcade","character","meet","greeting"],Rr=[...ci,...li,"starlight","cinematic celebration","nighttime"],Sr=["fantasmic","world of color","happily ever after","luminous","wondrous journeys","festival of fantasy","magic happens","cinematic celebration","enchantment"];function Tr(t,a){const i=t.toLowerCase();return di.some(s=>i.includes(s))?"parade":ci.some(s=>i.includes(s))?"fireworks":li.some(s=>i.includes(s))?"water-show":Dr.some(s=>i.includes(s))?"character":a.length>0&&a.every(r=>new Date(r.startTime).getHours()>=19)?"projection":i.includes("show")||i.includes("musical")||i.includes("live")?"stage-show":"other"}function pi(t,a){const i=t.toLowerCase();return!!(Rr.some(s=>i.includes(s))||a.length>0&&a.every(r=>new Date(r.startTime).getHours()>=19))}function hi(t){const a=t.toLowerCase();return di.some(i=>a.includes(i))}function Mr(t){const a=t.toLowerCase();return Sr.some(i=>a.includes(i))?"must-see":pi(t,[])||hi(t)?"recommended":"optional"}function Pr(t){return t.filter(a=>a.startTime).map(a=>({startTime:a.startTime,endTime:a.endTime,type:a.type||"Performance"}))}async function mi(t,a){const i=ri[t];if(!i)return console.warn(`No ThemeParks.wiki mapping for park ID: ${t}`),null;try{const s=await fetch(`https://api.themeparks.wiki/v1/entity/${i}/live`);if(!s.ok)throw new Error(`ThemeParks.wiki API error: ${s.status}`);const r=await s.json(),l=[];let p=null,o=null;const n=a?a.toISOString().split("T")[0]:new Date().toISOString().split("T")[0];for(const c of r.liveData||[]){if(c.entityType!=="SHOW"||!c.showtimes?.length)continue;const b=c.showtimes.filter(E=>E.startTime?E.startTime.split("T")[0]===n:!1);if(b.length===0)continue;const k=Pr(b),d=pi(c.name,k),w=hi(c.name),v=Tr(c.name,k),M={id:c.id,name:c.name,entityType:c.entityType,status:c.status||"OPERATING",showTimes:k,isNighttime:d,isParade:w,isFireworks:v==="fireworks",category:v,priority:Mr(c.name)};l.push(M),d&&M.priority==="must-see"&&!p&&(p=M),w&&M.priority==="must-see"&&!o&&(o=M)}return{parkId:t,parkName:ui(t),date:n,entertainment:l,nighttimeSpectacular:p,parade:o}}catch(s){return console.error(`Error fetching entertainment for park ID ${t}:`,s),null}}function ui(t){return{6:"Magic Kingdom",5:"EPCOT",7:"Disney's Hollywood Studios",8:"Disney's Animal Kingdom",16:"Disneyland",17:"Disney California Adventure",64:"Islands of Adventure",65:"Universal Studios Florida",334:"Epic Universe",66:"Universal Studios Hollywood"}[t]||"Unknown Park"}function Gt(t){const a={6:{nighttime:{name:"Happily Ever After",isNighttime:!0,isFireworks:!0,category:"fireworks",priority:"must-see",showTimes:[{startTime:"21:00",type:"Performance"}]},parade:{name:"Festival of Fantasy Parade",isParade:!0,category:"parade",priority:"must-see",showTimes:[{startTime:"15:00",type:"Performance"}]}},5:{nighttime:{name:"Luminous",isNighttime:!0,isFireworks:!0,category:"fireworks",priority:"must-see",showTimes:[{startTime:"21:00",type:"Performance"}]}},7:{nighttime:{name:"Fantasmic!",isNighttime:!0,isFireworks:!1,category:"water-show",priority:"must-see",showTimes:[{startTime:"20:00",type:"Performance"},{startTime:"21:30",type:"Performance"}]}},8:{},16:{nighttime:{name:"Wondrous Journeys",isNighttime:!0,isFireworks:!0,category:"fireworks",priority:"must-see",showTimes:[{startTime:"21:30",type:"Performance"}]},parade:{name:"Magic Happens Parade",isParade:!0,category:"parade",priority:"must-see",showTimes:[{startTime:"17:30",type:"Performance"}]}},17:{nighttime:{name:"World of Color",isNighttime:!0,isFireworks:!1,category:"water-show",priority:"must-see",showTimes:[{startTime:"21:00",type:"Performance"}]}}};return{parkId:t,parkName:ui(t),nighttimeSpectacular:a[t]?.nighttime,parade:a[t]?.parade}}const Ar="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/630/354/75/dam/disney-world/destinations/hollywood-studios/star-wars-galaxys-edge/rise-resistance-16x9.jpg?1703167709482";function Ga(t){return t.toLowerCase().replace(/[™®©]/g,"").replace(/['']/g,"'").replace(/[–—]/g,"-").replace(/\s+/g," ").trim()}function $r(t){const a=Ga(t);for(const i of Object.values(br))for(const[s,r]of Object.entries(i)){const l=Ga(s);if(l===a){if(r)return r;continue}if(a.includes(l)||l.includes(a)){if(r)return r;continue}const p=l.split(/\s+/).filter(c=>c.length>3&&!["the","and","of"].includes(c)),o=a.split(/\s+/).filter(c=>c.length>3&&!["the","and","of"].includes(c)),n=p.filter(c=>o.some(b=>b.includes(c)||c.includes(b)));if(n.length>=2||p.length===1&&n.length===1){if(r)return r;continue}}return Ar}const na=[{key:"park",label:"Select Park",icon:e.jsx(xt,{size:18})},{key:"ticket-type",label:"Ticket Type",icon:e.jsx(ha,{size:18})},{key:"schedule-style",label:"Schedule Style",icon:e.jsx(Ka,{size:18})},{key:"dates",label:"Choose Dates",icon:e.jsx(Ut,{size:18})},{key:"entertainment",label:"Shows",icon:e.jsx(Qe,{size:18})},{key:"rides",label:"Select Rides",icon:e.jsx(Ye,{size:18})},{key:"report",label:"Your Plan",icon:e.jsx(Ft,{size:18})}],la={6:{hasFireworks:!0,hasParade:!0,fireworksName:"Happily Ever After",paradeName:"Festival of Fantasy"},5:{hasFireworks:!0,hasParade:!1,fireworksName:"Luminous"},7:{hasFireworks:!0,hasParade:!1,fireworksName:"Fantasmic!"},8:{hasFireworks:!1,hasParade:!1},16:{hasFireworks:!0,hasParade:!0,fireworksName:"Wondrous Journeys",paradeName:"Magic Happens"},17:{hasFireworks:!0,hasParade:!1,fireworksName:"World of Color"},64:{hasFireworks:!1,hasParade:!1},65:{hasFireworks:!1,hasParade:!1},334:{hasFireworks:!1,hasParade:!1},66:{hasFireworks:!1,hasParade:!1}},Cr={6:"https://images.pexels.com/photos/8183994/pexels-photo-8183994.jpeg?auto=compress&cs=tinysrgb&w=600",5:"https://media.cntraveler.com/photos/5cb5f5d38ae5d86a66e28b32/master/pass/Epcot-1.jpg",7:"https://images.pexels.com/photos/14243455/pexels-photo-14243455.jpeg?auto=compress&cs=tinysrgb&w=600",8:"https://images.pexels.com/photos/3617464/pexels-photo-3617464.jpeg?auto=compress&cs=tinysrgb&w=600",16:"https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/1349/464/75/dam/disneyland/attractions/disneyland/sleeping-beauty-castle-walkthrough/sleeping-beauty-castle-exterior-16x9.jpg",17:"https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/480/1280/90/media/disneyparksjapan-prod/disneyparksjapan_v0001/1/media/dlr/events/pixar-pier-sunset-render-16x9.jpg",64:"https://www.disneydining.com/wp-content/uploads/2024/02/universal-orlando-islands-of-adventure.jpg",65:"https://cache.undercovertourist.com/blog/2022/10/1022-best-time-visit-uor-globe.jpg",67:"https://www.thetopvillas.com/blog/wp-content/uploads/2017/06/rsz_1volcano_bay_orlando-1.jpg",334:"https://www.universalorlando.com/webdata/k2/en/us/files/Images/gds/ueu-theme-park-chronos-daytime-with-guests-c.jpg",66:"https://res.cloudinary.com/simpleview/image/upload/v1612197440/clients/anaheimca/uni_studios_hollywood_max_res_default2_3f15e0a6-8283-470c-8870-1f2a89c02952.jpg"},da={};for(const t of Object.values(Bi))for(const[a,i]of Object.entries(t)){const s=i;s.image&&(da[Number(a)]=s.image)}function Wr(t){return da[t]?da[t]:Cr[t]||Ir}const Ir="https://images.pexels.com/photos/8183994/pexels-photo-8183994.jpeg?auto=compress&cs=tinysrgb&w=600",fa="parkpulse_saved_plans_v2",Ua=[{value:"rope-drop",label:"Rope Drop",sublabel:"Park Opening"},{value:"10am",label:"10:00 AM",sublabel:"Mid-morning"},{value:"12pm",label:"12:00 PM",sublabel:"Afternoon"}];function bt(){if(typeof window>"u")return[];try{const t=localStorage.getItem(fa);return t?JSON.parse(t):[]}catch{return[]}}function Er(t){const a=bt(),i=a.findIndex(s=>s.id===t.id);i>=0?a[i]=t:a.unshift(t),localStorage.setItem(fa,JSON.stringify(a.slice(0,10)))}function Hr(t){const a=bt().filter(i=>i.id!==t);localStorage.setItem(fa,JSON.stringify(a))}function zr(){return`plan_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function Lr(t){return t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function pa(t){return t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function Bt(t,a){return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()}function Br(t,a){const i=[],s=new Date(t,a,1),r=new Date(t,a+1,0),l=s.getDay();for(let o=l-1;o>=0;o--){const n=new Date(t,a,-o);i.push(n)}for(let o=1;o<=r.getDate();o++)i.push(new Date(t,a,o));const p=6-r.getDay();for(let o=1;o<=p;o++)i.push(new Date(t,a+1,o));return i}function Fr({currentStep:t}){const a=na.findIndex(r=>r.key===t),i=na.length,s=i>1?a/(i-1)*100:0;return e.jsxs("div",{className:"pw-stepper",children:[e.jsx("div",{className:"pw-stepper-track",children:e.jsx("div",{className:"pw-stepper-progress",style:{width:`${s}%`}})}),e.jsx("div",{className:"pw-stepper-steps",children:na.map((r,l)=>{const p=l<a,o=l===a;return e.jsxs("div",{className:"pw-stepper-step",children:[e.jsx("div",{className:`pw-stepper-circle ${p?"completed":""} ${o?"active":""}`,children:p?e.jsx(Ae,{size:16}):e.jsx("span",{children:l+1})}),e.jsx("span",{className:`pw-stepper-label ${p?"completed":""} ${o?"active":""}`,children:r.label})]},r.key)})})]})}function Or({parks:t,selectedPark:a,onSelect:i}){const s=t.filter(p=>p.operator.toLowerCase()==="disney"),r=t.filter(p=>p.operator.toLowerCase()==="universal"),l=({park:p})=>{const o=a===p.id;return e.jsxs("button",{className:`pw-park-card ${o?"selected":""}`,onClick:()=>i(p.id),children:[e.jsx("div",{className:"pw-park-image",style:{backgroundImage:`url(${Wr(p.id)})`}}),e.jsx("div",{className:"pw-park-overlay"}),e.jsxs("div",{className:"pw-park-content",children:[e.jsx("span",{className:"pw-park-name",children:p.name}),o&&e.jsx("span",{className:"pw-park-check",children:e.jsx(Ae,{size:16})})]})]})};return e.jsxs("div",{className:"pw-section",children:[e.jsxs("div",{className:"pw-section-header",children:[e.jsx("h2",{children:"Where's your adventure?"}),e.jsx("p",{children:"Select the park you're planning to visit"})]}),e.jsxs("div",{className:"pw-park-group",children:[e.jsx("span",{className:"pw-group-label",children:"Disney Parks"}),e.jsx("div",{className:"pw-park-grid",children:s.map(p=>e.jsx(l,{park:p},p.id))})]}),e.jsxs("div",{className:"pw-park-group",children:[e.jsx("span",{className:"pw-group-label",children:"Universal Parks"}),e.jsx("div",{className:"pw-park-grid",children:r.map(p=>e.jsx(l,{park:p},p.id))})]})]})}function _r({selectedPark:t,parks:a,isParkHopper:i,secondParkId:s,transitionTime:r,onParkHopperChange:l,onSecondParkChange:p,onTransitionTimeChange:o}){const n=a.find(d=>d.id===t),c=qa(t),b=c.length>1,k=Fi(t);return e.jsxs("div",{className:"pw-section",children:[e.jsxs("div",{className:"pw-section-header",children:[e.jsx("h2",{children:"What type of ticket?"}),e.jsxs("p",{children:["Are you visiting just ",n?.name,", or hopping between parks?"]})]}),e.jsxs("div",{className:"pw-ticket-options",children:[e.jsxs("button",{className:`pw-ticket-card ${i?"":"selected"}`,onClick:()=>l(!1),children:[e.jsx("div",{className:"pw-ticket-icon",children:e.jsx(xt,{size:32})}),e.jsxs("div",{className:"pw-ticket-content",children:[e.jsx("span",{className:"pw-ticket-title",children:"Single Park"}),e.jsxs("span",{className:"pw-ticket-desc",children:["Spend your day at ",n?.name]})]}),e.jsx("div",{className:"pw-ticket-check",children:!i&&e.jsx(Ae,{size:20})})]}),e.jsxs("button",{className:`pw-ticket-card ${i?"selected":""}`,onClick:()=>l(!0),children:[e.jsx("div",{className:"pw-ticket-icon",children:e.jsx(ha,{size:32})}),e.jsxs("div",{className:"pw-ticket-content",children:[e.jsx("span",{className:"pw-ticket-title",children:"Park Hopper"}),e.jsxs("span",{className:"pw-ticket-desc",children:["Start at ",n?.name,", then hop to another park"]})]}),e.jsx("div",{className:"pw-ticket-check",children:i&&e.jsx(Ae,{size:20})})]})]}),i&&e.jsxs("div",{className:"pw-hopper-config",children:[b&&e.jsxs("div",{className:"pw-hopper-field",children:[e.jsx("label",{children:"Which park will you hop to?"}),e.jsx("div",{className:"pw-hopper-park-options",children:c.map(d=>e.jsxs("button",{className:`pw-hopper-park-btn ${s===d.id?"selected":""}`,onClick:()=>p(d.id),children:[e.jsx("span",{className:"pw-hopper-park-name",children:d.name}),e.jsx("span",{className:"pw-hopper-park-short",children:d.shortName}),s===d.id&&e.jsx(Ae,{size:16})]},d.id))})]}),!b&&c.length===1&&e.jsxs("div",{className:"pw-hopper-auto-select",children:[e.jsx(Ae,{size:16}),e.jsxs("span",{children:["You'll hop to ",e.jsx("strong",{children:c[0].name})]})]}),e.jsxs("div",{className:"pw-hopper-field",children:[e.jsx("label",{children:"When will you switch parks?"}),e.jsx("div",{className:"pw-hopper-time-options",children:Oi.map(d=>e.jsx("button",{className:`pw-hopper-time-btn ${r===d.value?"selected":""}`,onClick:()=>o(d.value),children:d.label},d.value))}),e.jsxs("span",{className:"pw-hopper-time-hint",children:["Travel time between parks: ~",k?.transitionTime||15," minutes"]})]})]})]})}function Gr({selectedPark:t,secondParkId:a,isParkHopper:i,selectedDates:s,wantFireworks:r,wantParade:l,onFireworksChange:p,onParadeChange:o}){const[n,c]=C.useState([]),[b,k]=C.useState(!0),d=t?la[t]:null,w=a?la[a]:null,v=d?.hasFireworks||w?.hasFireworks,M=d?.hasParade||w?.hasParade,E=N=>{let P,L;if(N.includes("T")){const W=new Date(N);P=W.getHours(),L=W.getMinutes()}else{const W=N.split(":");P=parseInt(W[0]),L=parseInt(W[1])||0}const $=P>=12?"PM":"AM";return`${P>12?P-12:P===0?12:P}:${L.toString().padStart(2,"0")} ${$}`},H=N=>N.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});if(C.useEffect(()=>{(async()=>{if(!t||s.length===0){k(!1);return}k(!0);const P=await Promise.all(s.map(async L=>{const $=H(L.date);try{const V=await mi(t,L.date),W=Gt(t);let I=null;if(v){const Be=V?.nighttimeSpectacular,Xe=W?.nighttimeSpectacular,$e=Be||Xe;if($e){const Ce=$e.showTimes?.[0]?.startTime;I={name:$e.name||d?.fireworksName||"Nighttime Spectacular",time:Ce||"21:00",timeFormatted:Ce?E(Ce):"~9:00 PM",isLive:!!Be?.showTimes?.[0]?.startTime}}}let Se=null;if(M){const Be=V?.parade,Xe=W?.parade,$e=Be||Xe;if($e){const Ce=$e.showTimes?.[0]?.startTime;Se={name:$e.name||d?.paradeName||"Parade",time:Ce||"17:30",timeFormatted:Ce?E(Ce):"~5:30 PM",isLive:!!Be?.showTimes?.[0]?.startTime}}}return{date:L.date,dateFormatted:$,fireworks:I,parade:Se,loading:!1,error:!1}}catch(V){console.warn(`Failed to fetch entertainment for ${$}:`,V);const W=Gt(t);return{date:L.date,dateFormatted:$,fireworks:v?{name:d?.fireworksName||"Nighttime Spectacular",time:W?.nighttimeSpectacular?.showTimes?.[0]?.startTime||"21:00",timeFormatted:"~9:00 PM",isLive:!1}:null,parade:M?{name:d?.paradeName||"Parade",time:W?.parade?.showTimes?.[0]?.startTime||"17:30",timeFormatted:"~5:30 PM",isLive:!1}:null,loading:!1,error:!0}}}));c(P),k(!1)})()},[t,s,v,M,d]),!v&&!M)return e.jsxs("div",{className:"pw-section",children:[e.jsxs("div",{className:"pw-section-header",children:[e.jsx("h2",{children:"Shows & Entertainment"}),e.jsx("p",{children:"This park doesn't have scheduled fireworks or parades."})]}),e.jsxs("div",{className:"pw-entertainment-none",children:[e.jsx(Qe,{size:48,strokeWidth:1}),e.jsx("p",{children:"No nighttime spectaculars are available at this park."}),e.jsx("p",{className:"pw-entertainment-tip",children:"More time for rides!"})]})]});if(b)return e.jsxs("div",{className:"pw-section",children:[e.jsxs("div",{className:"pw-section-header",children:[e.jsx("h2",{children:"Shows & Entertainment"}),e.jsx("p",{children:"Checking show schedules for your dates..."})]}),e.jsxs("div",{className:"pw-entertainment-loading",children:[e.jsx("div",{className:"pw-spinner"}),e.jsx("p",{children:"Fetching live showtimes..."})]})]});const S=n.some(N=>N.fireworks),Y=n.some(N=>N.parade),h=n.some(N=>N.fireworks?.isLive||N.parade?.isLive),u=!r&&!l,j=s.length>1;return e.jsxs("div",{className:"pw-section",children:[e.jsxs("div",{className:"pw-section-header",children:[e.jsx("h2",{children:"Shows & Entertainment"}),e.jsx("p",{children:h?"Here are the shows scheduled for your visit:":"Select shows to include in your schedule:"})]}),e.jsxs("div",{className:"pw-entertainment-options",children:[S&&e.jsxs("button",{className:`pw-entertainment-card ${r?"selected":""}`,onClick:()=>p(!r),children:[e.jsx("div",{className:"pw-entertainment-icon",children:e.jsx(Qe,{size:32})}),e.jsxs("div",{className:"pw-entertainment-content",children:[e.jsx("span",{className:"pw-entertainment-title",children:"Nighttime Spectacular"}),e.jsx("div",{className:"pw-entertainment-showtimes",children:n.map((N,P)=>N.fireworks&&e.jsxs("div",{className:"pw-showtime-row",children:[j&&e.jsxs("span",{className:"pw-showtime-date",children:[N.dateFormatted,":"]}),e.jsx("span",{className:"pw-showtime-name",children:N.fireworks.name}),e.jsxs("span",{className:`pw-showtime-time ${N.fireworks.isLive?"live":""}`,children:[N.fireworks.timeFormatted,N.fireworks.isLive&&e.jsx("span",{className:"pw-live-badge",children:"Live"})]})]},P))}),e.jsx("span",{className:"pw-entertainment-note",children:r?"✓ Added to your schedule":"Tap to add to your plan"})]}),e.jsx("div",{className:"pw-entertainment-check",children:r&&e.jsx(Ae,{size:20})})]}),Y&&e.jsxs("button",{className:`pw-entertainment-card ${l?"selected":""}`,onClick:()=>o(!l),children:[e.jsx("div",{className:"pw-entertainment-icon",children:e.jsx(Ye,{size:32})}),e.jsxs("div",{className:"pw-entertainment-content",children:[e.jsx("span",{className:"pw-entertainment-title",children:"Parade"}),e.jsx("div",{className:"pw-entertainment-showtimes",children:n.map((N,P)=>N.parade&&e.jsxs("div",{className:"pw-showtime-row",children:[j&&e.jsxs("span",{className:"pw-showtime-date",children:[N.dateFormatted,":"]}),e.jsx("span",{className:"pw-showtime-name",children:N.parade.name}),e.jsxs("span",{className:`pw-showtime-time ${N.parade.isLive?"live":""}`,children:[N.parade.timeFormatted,N.parade.isLive&&e.jsx("span",{className:"pw-live-badge",children:"Live"})]})]},P))}),e.jsx("span",{className:"pw-entertainment-note",children:l?"✓ Added to your schedule":"Tap to add to your plan"})]}),e.jsx("div",{className:"pw-entertainment-check",children:l&&e.jsx(Ae,{size:20})})]})]}),(r||l)&&e.jsxs("div",{className:"pw-entertainment-summary",children:[e.jsx(Ae,{size:16}),e.jsx("span",{children:r&&l?"We'll schedule both the parade and nighttime spectacular":r?"We'll end your day with the nighttime spectacular":"We'll fit the parade into your schedule"})]}),e.jsx("button",{className:"pw-entertainment-skip-link",onClick:()=>{p(!1),o(!1)},children:u?"✓ Skipping entertainment — more time for rides!":"Skip entertainment and maximize ride time"})]})}function Ur({allowRerides:t,onReridePrefChange:a}){return e.jsxs("div",{className:"pw-section",children:[e.jsxs("div",{className:"pw-section-header",children:[e.jsx("h2",{children:"Schedule Style"}),e.jsx("p",{children:"How would you like us to fill your day?"})]}),e.jsxs("div",{className:"pw-schedule-style-options",children:[e.jsxs("button",{className:`pw-schedule-style-card ${t?"selected":""}`,onClick:()=>a(!0),children:[e.jsx("div",{className:"pw-schedule-style-icon",children:e.jsx(Ka,{size:32})}),e.jsxs("div",{className:"pw-schedule-style-content",children:[e.jsx("span",{className:"pw-schedule-style-title",children:"Maximize Ride Time"}),e.jsx("span",{className:"pw-schedule-style-desc",children:"Fill any free time with re-rides of your favorite attractions"}),e.jsx("span",{className:"pw-schedule-style-note",children:t?"✓ We'll suggest re-rides to keep you busy":"Perfect for thrill-seekers who want non-stop action"})]}),e.jsx("div",{className:"pw-schedule-style-check",children:t&&e.jsx(Ae,{size:20})})]}),e.jsxs("button",{className:`pw-schedule-style-card ${t?"":"selected"}`,onClick:()=>a(!1),children:[e.jsx("div",{className:"pw-schedule-style-icon",children:e.jsx(Ot,{size:32})}),e.jsxs("div",{className:"pw-schedule-style-content",children:[e.jsx("span",{className:"pw-schedule-style-title",children:"Relaxed Pace"}),e.jsx("span",{className:"pw-schedule-style-desc",children:"Stick to your selected rides with free time to explore and relax"}),e.jsx("span",{className:"pw-schedule-style-note",children:t?"Great for families or those who prefer a slower day":"✓ More time to explore, shop, and take breaks"})]}),e.jsx("div",{className:"pw-schedule-style-check",children:!t&&e.jsx(Ae,{size:20})})]})]}),e.jsxs("div",{className:"pw-schedule-style-summary",children:[e.jsx(ca,{size:16}),e.jsx("span",{children:t?"If you've selected fewer rides than we can fit, we'll suggest re-rides of popular attractions during open slots.":"Your schedule will include only your selected rides with breaks and meals. You'll have more free time for spontaneous exploration."})]})]})}function qr({selectedDates:t,onToggleDate:a,onUpdateDate:i,selectedPark:s,parkHoursMap:r}){const l=new Date,[p,o]=C.useState(l.getMonth()),[n,c]=C.useState(l.getFullYear()),b=h=>h.getFullYear()===l.getFullYear()&&h.getMonth()===l.getMonth()&&h.getDate()===l.getDate(),k=h=>{if(!b(h))return Ua;const u=new Date,j=u.getHours(),N=u.getMinutes(),P=j*60+N,L=h.toISOString().split("T")[0],$=r[L],V=$?$.openHour*60+($.openMinute||0):540;return Ua.filter(W=>{switch(W.value){case"rope-drop":return P<V-15;case"10am":return P<585;case"12pm":return P<705;default:return!0}})};C.useEffect(()=>{for(const h of t)if(b(h.date)){const u=k(h.date);!u.some(N=>N.value===h.arrivalTime)&&u.length>0&&i(h.date,{arrivalTime:u[0].value,ropeDropTarget:u[0].value==="rope-drop"?h.ropeDropTarget:void 0})}},[t,r]);const d=C.useMemo(()=>Br(n,p),[n,p]),w=new Date(n,p).toLocaleDateString("en-US",{month:"long",year:"numeric"}),v=h=>t.some(u=>Bt(u.date,h)),M=h=>h.getMonth()===p,E=h=>{const u=new Date(l.getFullYear(),l.getMonth(),l.getDate());return h<u},H=()=>{p===0?(o(11),c(n-1)):o(p-1)},S=()=>{p===11?(o(0),c(n+1)):o(p+1)},Y=[...t].sort((h,u)=>h.date.getTime()-u.date.getTime());return e.jsxs("div",{className:"pw-section",children:[e.jsxs("div",{className:"pw-section-header",children:[e.jsx("h2",{children:"When are you visiting?"}),e.jsx("p",{children:"Select the dates you'll be at the park. You can choose multiple non-consecutive days."})]}),e.jsxs("div",{className:"pw-date-layout",children:[e.jsxs("div",{className:"pw-calendar",children:[e.jsxs("div",{className:"pw-calendar-header",children:[e.jsx("button",{className:"pw-cal-nav",onClick:H,children:e.jsx(Va,{size:20})}),e.jsx("span",{className:"pw-cal-month",children:w}),e.jsx("button",{className:"pw-cal-nav",onClick:S,children:e.jsx(Ui,{size:20})})]}),e.jsx("div",{className:"pw-calendar-weekdays",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>e.jsx("span",{children:h},h))}),e.jsx("div",{className:"pw-calendar-days",children:d.map((h,u)=>{const j=v(h),N=M(h),P=E(h),L=Ze(h);return e.jsxs("button",{className:`pw-cal-day ${j?"selected":""} ${N?"":"other-month"} ${P?"past":""}`,onClick:()=>!P&&a(h),disabled:P,children:[e.jsx("span",{className:"pw-cal-day-num",children:h.getDate()}),N&&!P&&e.jsxs("span",{className:`pw-cal-day-type ${L}`,children:[L==="weekend"&&e.jsx("span",{className:"pw-dot orange"}),L==="holiday"&&e.jsx("span",{className:"pw-dot red"})]})]},u)})}),e.jsxs("div",{className:"pw-calendar-legend",children:[e.jsxs("span",{children:[e.jsx("span",{className:"pw-dot green"})," Weekday (Lower crowds)"]}),e.jsxs("span",{children:[e.jsx("span",{className:"pw-dot orange"})," Weekend"]}),e.jsxs("span",{children:[e.jsx("span",{className:"pw-dot red"})," Holiday/Peak"]})]})]}),e.jsxs("div",{className:"pw-selected-dates",children:[e.jsx("h3",{children:"Your Visit Days"}),Y.length===0?e.jsxs("div",{className:"pw-no-dates",children:[e.jsx(Ut,{size:32}),e.jsx("p",{children:"Click on the calendar to select your visit dates"})]}):e.jsx("div",{className:"pw-date-cards",children:Y.map((h,u)=>{const j=Ze(h.date);return e.jsxs("div",{className:"pw-date-card",children:[e.jsxs("div",{className:"pw-date-card-header",children:[e.jsxs("div",{className:"pw-date-card-info",children:[e.jsxs("span",{className:"pw-date-card-day",children:["Day ",u+1]}),e.jsx("span",{className:"pw-date-card-date",children:pa(h.date)}),e.jsxs("span",{className:`pw-date-card-type ${j}`,children:[j==="weekday"&&"Lower crowds expected",j==="weekend"&&"Weekend crowds",j==="holiday"&&"Peak day - plan carefully"]})]}),e.jsx("button",{className:"pw-date-card-remove",onClick:()=>a(h.date),children:e.jsx(Za,{size:14})})]}),e.jsxs("div",{className:"pw-date-card-options",children:[e.jsxs("div",{className:"pw-option-group",children:[e.jsx("label",{children:"Duration"}),e.jsxs("div",{className:"pw-toggle-buttons",children:[e.jsxs("button",{className:h.duration==="full-day"?"active":"",onClick:()=>i(h.date,{duration:"full-day"}),children:[e.jsx(Ja,{size:14}),"Full Day"]}),e.jsxs("button",{className:h.duration==="half-day"?"active":"",onClick:()=>i(h.date,{duration:"half-day"}),children:[e.jsx(Qa,{size:14}),"Half Day"]})]})]}),e.jsxs("div",{className:"pw-option-group",children:[e.jsxs("label",{children:["Arrival",b(h.date)&&e.jsx("span",{className:"pw-today-badge",children:"Today"})]}),(()=>{const N=k(h.date);return N.length===0?e.jsxs("div",{className:"pw-no-times-message",children:[e.jsx(oa,{size:14}),e.jsx("span",{children:"It's too late to plan a visit for today. Please select a future date."})]}):e.jsx("div",{className:"pw-arrival-options",children:N.map(L=>e.jsx("button",{className:`pw-arrival-btn ${h.arrivalTime===L.value?"active":""}`,onClick:()=>i(h.date,{arrivalTime:L.value}),children:L.label},L.value))})})()]}),h.arrivalTime==="rope-drop"&&s&&(()=>{const N=ga(s);return N?e.jsxs("div",{className:"pw-rope-drop-selector",children:[e.jsxs("div",{className:"pw-rope-drop-header",children:[e.jsx(Ya,{size:16}),e.jsx("span",{children:"Your Rope Drop Target"})]}),e.jsx("p",{className:"pw-rope-drop-subtitle",children:"Choose one ride to prioritize when the gates open"}),e.jsx("div",{className:"pw-rope-drop-targets",children:N.targets.map(P=>{const L=P.typicalMiddayWait-P.typicalRopeDropWait,$=h.ropeDropTarget===P.rideName;return e.jsxs("button",{className:`pw-rope-drop-target ${$?"selected":""}`,onClick:()=>i(h.date,{ropeDropTarget:$?void 0:P.rideName}),children:[e.jsxs("div",{className:"pw-target-priority",children:["P",P.priority]}),e.jsxs("div",{className:"pw-target-info",children:[e.jsx("span",{className:"pw-target-name",children:P.rideName}),e.jsxs("div",{className:"pw-target-stats",children:[e.jsxs("span",{className:"pw-target-wait",children:[e.jsx(ms,{size:12}),"~",P.typicalRopeDropWait," min"]}),e.jsxs("span",{className:"pw-target-savings",children:["Save ",L,"+ min"]})]})]}),e.jsx("div",{className:"pw-target-check",children:$&&e.jsx(Ae,{size:14})})]},P.rideName)})}),N.generalTips[0]&&e.jsxs("p",{className:"pw-rope-drop-tip",children:["💡 ",N.generalTips[0]]})]}):null})()]})]},h.date.toISOString())})})]})]})]})}function Kr({rides:t,selectedRides:a,onToggle:i,onToggleLand:s,preferences:r,onPreferencesChange:l,ropeDropTargets:p=[],isParkHopper:o=!1,maxRideLimit:n,isAtLimit:c,isNearLimit:b}){const[k,d]=C.useState(""),[w,v]=C.useState(!1),M=u=>{const j=u.toLowerCase();return p.some(N=>{const P=N.toLowerCase();return j===P||j.includes(P)||P.includes(j)})},E=t.reduce((u,j)=>{const N=j.land||"Other",P=o&&j.parkShortName?`${j.parkShortName}|${N}`:N;return u[P]||(u[P]=[]),u[P].push(j),u},{}),H=Object.entries(E).reduce((u,[j,N])=>{const P=N.filter(L=>L.name.toLowerCase().includes(k.toLowerCase()));return P.length>0&&(u[j]=P),u},{}),S=u=>{if(u.includes("|")){const[j,N]=u.split("|");return{landName:N,parkBadge:j}}return{landName:u,parkBadge:null}},Y=u=>u.every(j=>a.includes(j.id)),h=u=>{const j=u.filter(N=>a.includes(N.id)).length;return j>0&&j<u.length};return e.jsxs("div",{className:"pw-section",children:[e.jsxs("div",{className:"pw-section-header",children:[e.jsx("h2",{children:"What do you want to experience?"}),e.jsx("p",{children:"Select your must-do attractions. We'll optimize your schedule around these."})]}),e.jsxs("div",{className:"pw-rides-layout",children:[e.jsxs("div",{className:"pw-rides-main",children:[e.jsx("div",{className:"pw-rides-search",children:e.jsx("input",{type:"text",placeholder:"Search attractions...",value:k,onChange:u=>d(u.target.value)})}),e.jsx("div",{className:"pw-rides-list",children:Object.entries(H).map(([u,j])=>{const{landName:N,parkBadge:P}=S(u),L=Y(j),$=h(j),V=j.map(W=>W.id);return e.jsxs("div",{className:"pw-ride-group",children:[e.jsxs("div",{className:`pw-ride-group-header ${o?"sticky":""}`,children:[e.jsxs("label",{className:"pw-land-select-all",onClick:W=>W.stopPropagation(),children:[e.jsx("input",{type:"checkbox",checked:L,ref:W=>{W&&(W.indeterminate=$)},onChange:()=>s(V,!L)}),e.jsxs("span",{className:"pw-land-checkbox",children:[L&&e.jsx(Ae,{size:12}),$&&!L&&e.jsx("span",{className:"pw-checkbox-partial"})]})]}),e.jsx(xt,{size:14}),e.jsx("span",{children:N}),P&&e.jsx("span",{className:"pw-land-park-badge",children:P}),e.jsxs("span",{className:"pw-land-count",children:[j.filter(W=>a.includes(W.id)).length,"/",j.length]})]}),e.jsx("div",{className:"pw-ride-items",children:j.map(W=>{const I=a.includes(W.id),Se=M(W.name);return e.jsxs("button",{className:`pw-ride-item ${I?"selected":""} ${Se?"rope-drop-target":""}`,onClick:()=>i(W.id),children:[e.jsxs("span",{className:"pw-ride-name",children:[W.name,Se&&e.jsxs("span",{className:"pw-rope-drop-badge",children:[e.jsx(Ya,{size:10}),"Rope Drop"]})]}),e.jsx("span",{className:"pw-ride-check",children:I&&e.jsx(Ae,{size:14})})]},W.id)})})]},u)})})]}),e.jsxs("div",{className:"pw-rides-sidebar",children:[e.jsxs("div",{className:`pw-rides-counter-card ${c?"at-limit":b?"near-limit":""}`,children:[e.jsxs("div",{className:"pw-rides-counter-header",children:[e.jsx(Ye,{size:18}),e.jsx("span",{children:"Rides Selected"})]}),e.jsxs("div",{className:"pw-rides-counter-display",children:[e.jsx("span",{className:"pw-rides-counter-current",children:a.length}),e.jsx("span",{className:"pw-rides-counter-separator",children:"/"}),e.jsx("span",{className:"pw-rides-counter-max",children:n})]}),e.jsx("div",{className:"pw-rides-counter-remaining",children:c?e.jsxs("span",{className:"pw-rides-limit-reached",children:[e.jsx(kt,{size:14}),"Limit reached"]}):e.jsxs("span",{children:[n-a.length," more available"]})}),b&&!c&&e.jsx("div",{className:"pw-rides-counter-hint",children:"Choose your favorites!"}),e.jsx("p",{className:"pw-rides-counter-note",children:o?"*Reduced limit because you're visiting two parks. Travel time between parks means less ride time at each.":"*Based on average wait times and park hours to ensure a realistic, enjoyable schedule."})]}),e.jsxs("div",{className:"pw-preferences-card",children:[e.jsx("h4",{children:"Optimization Preferences"}),e.jsxs("div",{className:"pw-pref-group",children:[e.jsx("label",{children:"Experience Priority"}),e.jsx("div",{className:"pw-pref-options",children:[{value:"balanced",label:"Balanced Mix",icon:e.jsx(kt,{size:16})},{value:"thrill",label:"Thrill Seeker",icon:e.jsx(Ft,{size:16})},{value:"family",label:"Family Fun",icon:e.jsx(Ye,{size:16})},{value:"shows",label:"Shows First",icon:e.jsx(Qe,{size:16})}].map(u=>e.jsxs("button",{className:`pw-pref-btn ${r.priority===u.value?"active":""}`,onClick:()=>l({...r,priority:u.value}),children:[u.icon,u.label]},u.value))})]}),e.jsx("div",{className:"pw-pref-toggle",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:r.includeBreaks,onChange:u=>l({...r,includeBreaks:u.target.checked})}),e.jsx(Ot,{size:16}),"Include meal & rest breaks"]})})]})]}),e.jsxs("div",{className:"pw-mobile-selection-bar",children:[e.jsxs("div",{className:"pw-mobile-selection-count",children:[e.jsx("div",{className:`pw-mobile-count-badge ${c?"at-limit":b?"near-limit":""}`,children:a.length}),e.jsxs("div",{className:"pw-mobile-count-text",children:[e.jsx("span",{className:"pw-mobile-count-label",children:"Rides Selected"}),e.jsx("span",{className:"pw-mobile-count-remaining",children:c?"Limit reached":`${n-a.length} more available`})]})]}),e.jsxs("button",{className:`pw-mobile-expand-btn ${w?"expanded":""}`,onClick:()=>v(!0),children:[e.jsx(_i,{size:18}),e.jsx("span",{children:"Options"})]})]}),e.jsx("div",{className:`pw-mobile-drawer-overlay ${w?"open":""}`,onClick:()=>v(!1)}),e.jsxs("div",{className:`pw-mobile-drawer ${w?"open":""}`,children:[e.jsx("div",{className:"pw-mobile-drawer-handle",onClick:()=>v(!1)}),e.jsxs("div",{className:"pw-mobile-drawer-header",children:[e.jsx("h3",{children:"Your Selection"}),e.jsx("button",{className:"pw-mobile-drawer-close",onClick:()=>v(!1),children:e.jsx(vs,{size:20})})]}),e.jsxs("div",{className:"pw-mobile-drawer-content",children:[e.jsxs("div",{className:`pw-rides-counter-card ${c?"at-limit":b?"near-limit":""}`,children:[e.jsxs("div",{className:"pw-rides-counter-header",children:[e.jsx(Ye,{size:18}),e.jsx("span",{children:"Rides Selected"})]}),e.jsxs("div",{className:"pw-rides-counter-display",children:[e.jsx("span",{className:"pw-rides-counter-current",children:a.length}),e.jsx("span",{className:"pw-rides-counter-separator",children:"/"}),e.jsx("span",{className:"pw-rides-counter-max",children:n})]}),e.jsx("div",{className:"pw-rides-counter-remaining",children:c?e.jsxs("span",{className:"pw-rides-limit-reached",children:[e.jsx(kt,{size:14}),"Limit reached"]}):e.jsxs("span",{children:[n-a.length," more available"]})}),b&&!c&&e.jsx("div",{className:"pw-rides-counter-hint",children:"Choose your favorites!"}),e.jsx("p",{className:"pw-rides-counter-note",children:o?"*Reduced limit because you're visiting two parks.":"*Based on average wait times and park hours."})]}),e.jsxs("div",{className:"pw-preferences-card",children:[e.jsx("h4",{children:"Optimization Preferences"}),e.jsxs("div",{className:"pw-pref-group",children:[e.jsx("label",{children:"Experience Priority"}),e.jsx("div",{className:"pw-pref-options",children:[{value:"balanced",label:"Balanced Mix",icon:e.jsx(kt,{size:16})},{value:"thrill",label:"Thrill Seeker",icon:e.jsx(Ft,{size:16})},{value:"family",label:"Family Fun",icon:e.jsx(Ye,{size:16})},{value:"shows",label:"Shows First",icon:e.jsx(Qe,{size:16})}].map(u=>e.jsxs("button",{className:`pw-pref-btn ${r.priority===u.value?"active":""}`,onClick:()=>l({...r,priority:u.value}),children:[u.icon,u.label]},u.value))})]}),e.jsx("div",{className:"pw-pref-toggle",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:r.includeBreaks,onChange:u=>l({...r,includeBreaks:u.target.checked})}),e.jsx(Ot,{size:16}),"Include meal & rest breaks"]})})]})]})]})]})]})}function Yr({report:t,parkName:a,onSave:i,isSaved:s}){const[r,l]=C.useState(0);C.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const p=()=>{let n=`${a} - Trip Plan
${"=".repeat(50)}

`;n+=`STRATEGIC SUMMARY
${"-".repeat(30)}
`,t.strategySummary.forEach(d=>n+=`• ${d}
`),n+=`
`,t.headlinerStrategy.length>0&&(n+=`HEADLINER PLACEMENT
${"-".repeat(30)}
`,t.headlinerStrategy.forEach(d=>n+=`• ${d}
`),n+=`
`),t.days.forEach(d=>{n+=`
${"=".repeat(50)}
`,n+=`${d.dayLabel.toUpperCase()}
`,n+=`${d.duration==="full-day"?"Full Day":"Half Day"} • ${d.ridesCount} attractions
`,n+=`${"=".repeat(50)}

`,d.items.forEach(w=>{n+=`${w.time} - ${w.name}`,w.expectedWait&&(n+=` (~${w.expectedWait} min wait)`),n+=`
`,w.notes&&(n+=`         ${w.notes}
`)})}),n+=`
${"=".repeat(50)}
`,n+=`Total: ${t.totalRides} attractions, ~${t.totalWaitTime} min wait
`,n+=`Estimated time saved vs peak hours: ~${t.waitTimeSaved} min (~${t.percentImprovement}%)
`,n+=`
Generated by ParkPlannerAI
`;const c=new Blob([n],{type:"text/plain"}),b=URL.createObjectURL(c),k=document.createElement("a");k.href=b,k.download=`${a.replace(/\s+/g,"-").toLowerCase()}-trip-plan.txt`,k.click(),URL.revokeObjectURL(b)},o=t.days[r];return e.jsxs("div",{className:"pw-report",children:[e.jsxs("div",{className:"pw-report-header",children:[e.jsxs("div",{className:"pw-report-title",children:[e.jsx(Qe,{size:24}),e.jsxs("div",{children:[e.jsx("h2",{children:"Your Optimized Trip Plan"}),e.jsx("p",{children:a})]})]}),e.jsxs("div",{className:"pw-report-actions",children:[e.jsxs("button",{className:`pw-action-btn ${s?"saved":""}`,onClick:i,children:[s?e.jsx(Ae,{size:16}):e.jsx(ls,{size:16}),s?"Saved":"Save Plan"]}),e.jsxs("button",{className:"pw-action-btn",onClick:p,children:[e.jsx(Xi,{size:16}),"Download"]})]})]}),t.predictionSource==="hardcoded"&&e.jsxs("div",{className:"pw-prediction-notice",children:[e.jsx("div",{className:"pw-prediction-notice-icon",children:e.jsx(oa,{size:16})}),e.jsxs("div",{className:"pw-prediction-notice-content",children:[e.jsx("span",{className:"pw-prediction-notice-title",children:"Using estimated wait times"}),e.jsx("span",{className:"pw-prediction-notice-text",children:"We're still collecting historical data for smarter predictions. These estimates are based on typical patterns for this time of year."})]})]}),e.jsxs("div",{className:"pw-report-layout",children:[o&&e.jsxs("div",{className:"pw-day-schedule",children:[e.jsx("div",{className:"pw-day-header",children:e.jsxs("div",{className:"pw-day-info",children:[e.jsx("h3",{children:o.dayLabel}),e.jsxs("div",{className:"pw-day-meta",children:[e.jsxs("span",{className:`pw-day-type-badge ${o.dayType}`,children:[o.dayType==="weekday"&&"Weekday",o.dayType==="weekend"&&"Weekend",o.dayType==="holiday"&&"Holiday/Peak"]}),e.jsx("span",{children:o.duration==="full-day"?"Full Day":"Half Day"}),e.jsxs("span",{children:[o.ridesCount," attractions"]})]})]})}),e.jsxs("div",{className:"pw-timeline",children:[o.parkHours&&e.jsxs("div",{className:"pw-timeline-item pw-park-hours-indicator pw-park-open",children:[e.jsx("div",{className:"pw-timeline-time",children:o.parkHours.openingTimeFormatted}),e.jsxs("div",{className:"pw-timeline-marker",children:[e.jsx("div",{className:"pw-timeline-dot pw-park-dot",children:e.jsx(Ja,{size:10})}),e.jsx("div",{className:"pw-timeline-line pw-park-line"})]}),e.jsxs("div",{className:"pw-park-hours-content",children:[e.jsx("span",{className:"pw-park-hours-label",children:"Park Opens"}),e.jsx("span",{className:"pw-park-hours-name",children:o.parkHours.parkName})]})]}),o.items.map((n,c)=>{const b=n.isReride?"reride":n.type,k=n.type==="meal"||n.type==="break",d=n.name?.includes("Park Transition"),w=n.type==="ride"&&!n.isReride&&(()=>{const v=ct(n.name);return v.mustDo||v.weight>=85})();if(d)return e.jsxs("div",{className:"pw-timeline-item pw-park-transition",children:[e.jsx("div",{className:"pw-timeline-time",children:n.time}),e.jsxs("div",{className:"pw-timeline-marker",children:[e.jsx("div",{className:"pw-timeline-dot",children:e.jsx(ha,{size:12})}),c<o.items.length-1&&e.jsx("div",{className:"pw-timeline-line"})]}),e.jsxs("div",{className:"pw-timeline-content",children:[e.jsx("span",{className:"pw-timeline-name",children:n.name}),n.notes&&e.jsx("p",{className:"pw-timeline-notes",children:n.notes})]})]},c);if(k){const v=n.name.toLowerCase().includes("lunch")||n.name.toLowerCase().includes("dinner"),M=n.name.toLowerCase().includes("lunch")?"lunch":n.name.toLowerCase().includes("dinner")?"dinner":"a snack",E=()=>{const H=[];return n.peakWaitTime&&n.peakWaitTime>20?H.push(`Skip the ~${Math.round(n.peakWaitTime)} minute waits during this peak period. `):H.push("Great time to recharge while the park is busy. "),n.diningName?H.push(e.jsxs("span",{children:["Try grabbing ",M," at ",e.jsx("strong",{children:n.diningName})," or a nearby spot."," "]},"dining")):v&&H.push(`Grab ${M} at a nearby restaurant. `),n.shoppingName&&H.push(e.jsxs("span",{children:["While you're at it, check out ",e.jsx("strong",{children:n.shoppingName})," for some shopping."]},"shopping")),H};return e.jsxs("div",{className:"pw-timeline-item pw-break-block",children:[e.jsx("div",{className:"pw-timeline-time",children:n.time}),e.jsxs("div",{className:"pw-timeline-marker",children:[e.jsx("div",{className:"pw-timeline-dot pw-break-dot",children:e.jsx(ns,{size:10})}),c<o.items.length-1&&e.jsx("div",{className:"pw-timeline-line pw-break-line"})]}),e.jsxs("div",{className:"pw-break-card",children:[e.jsxs("div",{className:"pw-break-header",children:[e.jsxs("div",{className:"pw-break-title-row",children:[e.jsx("span",{className:"pw-break-icon",children:v?e.jsx(ws,{size:18}):e.jsx(Ot,{size:18})}),e.jsxs("div",{className:"pw-break-title-content",children:[e.jsx("span",{className:"pw-break-name",children:n.name}),e.jsxs("span",{className:"pw-break-duration",children:[n.breakDuration||45," min"]})]})]}),n.land&&e.jsxs("span",{className:"pw-break-location",children:[e.jsx(xt,{size:12})," ",n.land]})]}),e.jsx("p",{className:"pw-break-description",children:E()})]})]},c)}if(n.type==="entertainment"){const v=n.entertainmentCategory||"other",M=()=>{switch(v){case"fireworks":return e.jsx(is,{size:20});case"water-show":return e.jsx(ts,{size:20});case"parade":return e.jsx(Gi,{size:20});default:return e.jsx(Qe,{size:20})}},E=()=>{switch(v){case"fireworks":return"Fireworks Show";case"water-show":return"Water Spectacular";case"parade":return"Parade";case"projection":return"Light Show";default:return"Entertainment"}};return e.jsxs("div",{className:`pw-timeline-item pw-entertainment-block pw-entertainment-${v}`,children:[e.jsx("div",{className:"pw-timeline-time",children:n.time}),e.jsxs("div",{className:"pw-timeline-marker",children:[e.jsx("div",{className:`pw-timeline-dot pw-entertainment-dot pw-entertainment-dot-${v}`,children:e.jsx(Qe,{size:12})}),c<o.items.length-1&&e.jsx("div",{className:"pw-timeline-line pw-entertainment-line"})]}),e.jsxs("div",{className:`pw-entertainment-card pw-entertainment-card-${v}`,children:[e.jsxs("div",{className:"pw-entertainment-card-inner",children:[e.jsx("div",{className:"pw-entertainment-icon-wrapper",children:M()}),e.jsxs("div",{className:"pw-entertainment-content",children:[e.jsx("span",{className:"pw-entertainment-badge",children:E()}),e.jsx("h4",{className:"pw-entertainment-name",children:n.name}),n.notes&&e.jsx("p",{className:"pw-entertainment-notes",children:n.notes})]})]}),e.jsxs("div",{className:"pw-entertainment-sparkles",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]})]},c)}return w?e.jsxs("div",{className:"pw-timeline-item pw-headliner-block",children:[e.jsx("div",{className:"pw-timeline-time",children:n.time}),e.jsxs("div",{className:"pw-timeline-marker",children:[e.jsx("div",{className:"pw-timeline-dot pw-headliner-dot",children:e.jsx(Ye,{size:10})}),c<o.items.length-1&&e.jsx("div",{className:"pw-timeline-line pw-headliner-line"})]}),e.jsxs("div",{className:"pw-headliner-wrapper",children:[e.jsxs("div",{className:"pw-headliner-card",children:[e.jsx("div",{className:"pw-headliner-bg",style:{backgroundImage:`url(${$r(n.name)})`}}),e.jsx("div",{className:"pw-headliner-overlay"}),e.jsxs("div",{className:"pw-headliner-content",children:[e.jsxs("div",{className:"pw-headliner-badge",children:[e.jsx(Ye,{size:12}),e.jsx("span",{children:"Headliner"})]}),e.jsxs("div",{className:"pw-headliner-header",children:[e.jsx("span",{className:"pw-headliner-name",children:n.name}),n.expectedWait!==void 0&&n.expectedWait>0&&e.jsxs("span",{className:"pw-headliner-wait",children:["~",n.expectedWait," min wait"]})]}),n.land&&e.jsxs("span",{className:"pw-headliner-land",children:[e.jsx(xt,{size:12})," ",n.land]})]})]}),n.notes&&e.jsx("p",{className:"pw-headliner-notes",children:n.notes})]})]},c):e.jsxs("div",{className:`pw-timeline-item ${b}`,children:[e.jsx("div",{className:"pw-timeline-time",children:n.time}),e.jsxs("div",{className:"pw-timeline-marker",children:[e.jsx("div",{className:"pw-timeline-dot"}),c<o.items.length-1&&e.jsx("div",{className:"pw-timeline-line"})]}),e.jsxs("div",{className:"pw-timeline-content",children:[e.jsxs("div",{className:"pw-timeline-header",children:[e.jsx("span",{className:"pw-timeline-name",children:n.name}),n.isReride&&e.jsx("span",{className:"pw-reride-badge",children:"Re-ride"}),n.expectedWait!==void 0&&n.expectedWait>0&&e.jsxs("span",{className:"pw-timeline-wait",children:["est. ",n.expectedWait," min"]})]}),n.land&&e.jsx("span",{className:"pw-timeline-land",children:n.land}),n.notes&&e.jsx("p",{className:"pw-timeline-notes",children:n.notes})]})]},c)}),o.parkHours&&e.jsxs("div",{className:"pw-timeline-item pw-park-hours-indicator pw-park-close",children:[e.jsx("div",{className:"pw-timeline-time",children:o.parkHours.closingTimeFormatted}),e.jsx("div",{className:"pw-timeline-marker",children:e.jsx("div",{className:"pw-timeline-dot pw-park-dot pw-park-close-dot",children:e.jsx(Qa,{size:10})})}),e.jsxs("div",{className:"pw-park-hours-content",children:[e.jsx("span",{className:"pw-park-hours-label",children:"Park Closes"}),o.parkHours.hasExtendedHours&&e.jsx("span",{className:"pw-park-hours-extended",children:"Extended hours available"})]})]})]}),o.skippedRides&&o.skippedRides.length>0&&e.jsxs("div",{className:"pw-skipped-rides",children:[e.jsxs("div",{className:"pw-skipped-rides-header",children:[e.jsx(oa,{size:16}),e.jsx("span",{children:"Rides That Didn't Fit"})]}),e.jsx("p",{className:"pw-skipped-rides-desc",children:"The following rides from your selection couldn't be scheduled due to time constraints. Consider visiting on a less busy day or arriving earlier."}),e.jsx("div",{className:"pw-skipped-rides-list",children:o.skippedRides.map((n,c)=>e.jsxs("div",{className:`pw-skipped-ride ${n.category}`,children:[e.jsx("span",{className:"pw-skipped-ride-name",children:n.name}),e.jsxs("span",{className:`pw-skipped-ride-category ${n.category}`,children:[n.category==="headliner"&&"Headliner",n.category==="popular"&&"Popular",n.category==="family"&&"Family",n.category==="standard"&&"Standard"]})]},c))}),e.jsxs("p",{className:"pw-skipped-rides-tip",children:[e.jsx(ca,{size:14}),"Tip: Try selecting fewer rides or extending your visit to fit these attractions."]})]})]}),e.jsxs("div",{className:"pw-report-sidebar",children:[e.jsxs("div",{className:"pw-sidebar-stats",children:[e.jsxs("div",{className:"pw-sidebar-stats-header",children:[e.jsx(kt,{size:16}),e.jsx("span",{children:"Trip Summary"})]}),e.jsxs("div",{className:"pw-sidebar-stats-grid",children:[e.jsxs("div",{className:"pw-sidebar-stat",children:[e.jsx("span",{className:"pw-sidebar-stat-value",children:t.days.length}),e.jsxs("span",{className:"pw-sidebar-stat-label",children:["Day",t.days.length>1?"s":""]})]}),e.jsxs("div",{className:"pw-sidebar-stat",children:[e.jsx("span",{className:"pw-sidebar-stat-value",children:t.totalRides}),e.jsx("span",{className:"pw-sidebar-stat-label",children:"Attractions"})]}),e.jsxs("div",{className:"pw-sidebar-stat",children:[e.jsxs("span",{className:"pw-sidebar-stat-value",children:["~",t.totalWaitTime]}),e.jsx("span",{className:"pw-sidebar-stat-label",children:"Est. Wait (min)"})]}),t.waitTimeSaved>0&&e.jsxs("div",{className:"pw-sidebar-stat highlight",children:[e.jsxs("span",{className:"pw-sidebar-stat-value",children:["~",t.waitTimeSaved]}),e.jsx("span",{className:"pw-sidebar-stat-label",children:"Min Saved vs Peak"})]})]}),t.waitTimeSaved>0&&t.percentImprovement>0&&e.jsxs("div",{className:"pw-sidebar-improvement",children:[e.jsx(ys,{size:14}),e.jsxs("span",{children:["~",t.percentImprovement,"% less wait vs peak times"]})]})]}),t.days.length>1&&e.jsxs("div",{className:"pw-sidebar-days",children:[e.jsxs("div",{className:"pw-sidebar-section-header",children:[e.jsx(Ut,{size:14}),e.jsx("span",{children:"Your Days"})]}),e.jsx("div",{className:"pw-sidebar-day-list",children:t.days.map((n,c)=>e.jsxs("button",{className:`pw-sidebar-day-btn ${r===c?"active":""}`,onClick:()=>{l(c),window.scrollTo({top:0,behavior:"smooth"})},children:[e.jsxs("span",{className:"pw-sidebar-day-num",children:["Day ",c+1]}),e.jsx("span",{className:"pw-sidebar-day-date",children:Lr(n.date)}),e.jsx("span",{className:`pw-sidebar-day-type ${n.dayType}`,children:n.dayType==="weekday"?"Weekday":n.dayType==="weekend"?"Weekend":"Peak"})]},c))})]}),e.jsxs("div",{className:"pw-sidebar-strategy",children:[e.jsxs("div",{className:"pw-sidebar-section-header",children:[e.jsx(ca,{size:14}),e.jsx("span",{children:"Why This Works"})]}),e.jsx("ul",{className:"pw-sidebar-strategy-list",children:t.strategySummary.map((n,c)=>e.jsx("li",{children:n},c))})]}),t.headlinerStrategy.length>0&&e.jsxs("div",{className:"pw-sidebar-strategy accent",children:[e.jsxs("div",{className:"pw-sidebar-section-header",children:[e.jsx(Ft,{size:14}),e.jsx("span",{children:"Headliner Strategy"})]}),e.jsx("ul",{className:"pw-sidebar-strategy-list",children:t.headlinerStrategy.map((n,c)=>e.jsx("li",{children:n},c))})]}),e.jsxs("div",{className:"pw-sidebar-tips",children:[e.jsxs("div",{className:"pw-sidebar-section-header",children:[e.jsx(Ye,{size:14}),e.jsx("span",{children:"Pro Tips"})]}),e.jsxs("ul",{className:"pw-sidebar-tips-list",children:[e.jsx("li",{children:"Arrive 15-30 min before park opening"}),e.jsx("li",{children:"Download the park's official app"}),e.jsx("li",{children:"Stay flexible - conditions change"})]}),e.jsx("p",{className:"pw-sidebar-disclaimer",children:"*Estimates based on historical patterns. Actual wait times may vary."})]})]})]})]})}function Vr({plans:t,onLoad:a,onDelete:i}){return t.length===0?null:e.jsxs("div",{className:"pw-saved-plans",children:[e.jsx("h3",{children:"Your Saved Plans"}),e.jsx("div",{className:"pw-saved-list",children:t.map(s=>e.jsxs("div",{className:"pw-saved-card",children:[e.jsxs("div",{className:"pw-saved-info",children:[e.jsx("span",{className:"pw-saved-park",children:s.parkName}),e.jsxs("span",{className:"pw-saved-dates",children:[e.jsx(Ut,{size:12}),s.dates.length," day",s.dates.length>1?"s":""]})]}),e.jsxs("div",{className:"pw-saved-actions",children:[e.jsx("button",{className:"pw-saved-btn view",onClick:()=>a(s),children:"View"}),e.jsx("button",{className:"pw-saved-btn delete",onClick:()=>i(s.id),children:e.jsx(Za,{size:14})})]})]},s.id))})]})}function Jr(){let t=null;try{t=zi()}catch{}const[a,i]=C.useState("park"),[s,r]=C.useState([]),[l,p]=C.useState([]),[o,n]=C.useState(null),[c,b]=C.useState([]),[k,d]=C.useState([]),[w,v]=C.useState({priority:"balanced",includeBreaks:!0}),[M,E]=C.useState(null),[H,S]=C.useState(!0),[Y,h]=C.useState([]),[u,j]=C.useState(null),[N,P]=C.useState(!1),[L,$]=C.useState({}),[V,W]=C.useState(!1),[I,Se]=C.useState(null),[Be,Xe]=C.useState("11:00 AM"),[$e,Ce]=C.useState([]),[Dt,wa]=C.useState(!1),[lt,qt]=C.useState(!1),[et,Rt]=C.useState(!0);C.useEffect(()=>{h(bt())},[]),C.useEffect(()=>{fetch("/api/parks.json").then(m=>m.json()).then(m=>{r(m.parks||[]),S(!1)}).catch(()=>S(!1))},[]),C.useEffect(()=>{if(s.length>0&&!o){const A=new URLSearchParams(window.location.search).get("park");if(A){const B=parseInt(A,10);s.some(q=>q.id===B)&&Ht(B)&&(n(B),i("ticket-type"))}}},[s,o]),C.useEffect(()=>{o&&(S(!0),fetch(`/api/parks/${o}.json`).then(m=>m.json()).then(m=>{p(m.rides||[]),S(!1)}).catch(()=>S(!1)))},[o]),C.useEffect(()=>{V&&I?fetch(`/api/parks/${I}.json`).then(m=>m.json()).then(m=>{Ce(m.rides||[])}).catch(()=>Ce([])):Ce([])},[V,I]),C.useEffect(()=>{W(!1),Se(null),Ce([])},[o]),C.useEffect(()=>{o&&c.length>0&&(async()=>{const A={};for(const B of c){const X=B.date.toISOString().split("T")[0];try{const q=await _a(o,B.date);if(V&&I)try{const ae=await _a(I,B.date);A[X]={...q,closeHour:ae.closeHour,closeMinute:ae.closeMinute,closingTimeFormatted:ae.closingTimeFormatted}}catch(ae){console.error(`Failed to fetch second park hours for ${X}:`,ae),A[X]=q}else A[X]=q}catch(q){console.error(`Failed to fetch park hours for ${X}:`,q)}}$(A)})()},[o,I,V,c]);const _=m=>{const A=new Date;if(!(m.getFullYear()===A.getFullYear()&&m.getMonth()===A.getMonth()&&m.getDate()===A.getDate()))return"rope-drop";const X=new Date,q=X.getHours(),ae=X.getMinutes(),Fe=q*60+ae,mt=m.toISOString().split("T")[0],ye=L[mt],tt=ye?ye.openHour*60+(ye.openMinute||0):540,Oe=15;return Fe<tt-Oe?"rope-drop":Fe<600-Oe?"10am":(Fe<720-Oe,"12pm")},Ke=m=>{c.find(B=>Bt(B.date,m))?b(c.filter(B=>!Bt(B.date,m))):c.length<5&&b([...c,{date:m,duration:"full-day",arrivalTime:_(m)}])},Te=(m,A)=>{b(c.map(B=>Bt(B.date,m)?{...B,...A}:B))},dt=13,gi=10,ht=C.useMemo(()=>c.length===0?dt:c.reduce((m,A)=>{const B=V?gi:dt,X=A.duration==="half-day"?.5:1;return m+Math.floor(B*X)},0),[c,V]),yi=k.length>=ht,fi=k.length>=ht-2,wi=m=>{d(A=>A.includes(m)?A.filter(B=>B!==m):A.length>=ht?A:[...A,m])},ki=(m,A)=>{d(B=>{if(A){const X=m.filter(Fe=>!B.includes(Fe)),q=ht-B.length,ae=X.slice(0,q);return[...B,...ae]}else return B.filter(X=>!m.includes(X))})},ka=C.useMemo(()=>{if(!V||!I||$e.length===0){if(o&&Ht(o)){const q=ta(o);return l.map(ae=>({...ae,parkId:o,parkShortName:q}))}return l}const m=ta(o),A=ta(I),B=l.map(q=>({...q,parkId:o,parkShortName:m})),X=$e.map(q=>({...q,parkId:I,parkShortName:A}));return[...B,...X]},[l,$e,V,o,I]),vi=async()=>{const m=[...c].sort((g,T)=>g.date.getTime()-T.date.getTime()),A={};if(o&&(Dt||lt)){const g=[...new Set(m.map(T=>T.date.toISOString().split("T")[0]))];await Promise.all(g.map(async T=>{const K=new Date(T);try{const G=await mi(o,K);A[T]=G}catch(G){console.warn(`Failed to fetch entertainment for ${T}:`,G),A[T]=null}}))}const B=ka.filter(g=>k.includes(g.id)).map(g=>({id:g.id,name:g.name,land:g.land,isOpen:g.is_open,waitTime:g.wait_time,parkId:g.parkId,parkShortName:g.parkShortName})),X=["battle","ministry","hagrid","velocicoaster","forbidden journey","gringotts","kong","mummy","transformers","jimmy fallon","mario kart","donkey kong","yoshi","toadstool","bowser","how to train","hiccup","dragon","starfall","stardust"],q=g=>{const T=g.toLowerCase();return X.some(K=>T.includes(K))?"headliner":T.includes("coaster")||T.includes("mountain")||T.includes("flight")?"popular":"moderate"},ae=m.map(g=>g.duration==="full-day"?12:6);ae.reduce((g,T)=>g+T,0);const Fe=[...B].sort((g,T)=>{const K=q(g.name),G=q(T.name),Z={headliner:0,popular:1,moderate:2};return Z[K]-Z[G]}),mt={};for(const g of Fe){const T=g.land||"Other";mt[T]||(mt[T]=[]),mt[T].push(g)}const ye=m.map(()=>[]),tt=m.map(()=>new Set),Oe=new Set;for(let g=0;g<m.length;g++){const T=m[g];if(T.ropeDropTarget){const K=T.ropeDropTarget.toLowerCase(),G=B.find(Z=>{const fe=Z.name.toLowerCase();return fe===K||fe.includes(K)||K.includes(fe)});G&&!Oe.has(G.id)&&(ye[g].push(G),tt[g].add(G.land||"Other"),Oe.add(G.id))}}Fe.filter(g=>q(g.name)==="headliner"&&!Oe.has(g.id)).forEach((g,T)=>{const K=T%m.length;ye[K].length<ae[K]&&(ye[K].push(g),tt[K].add(g.land||"Other"),Oe.add(g.id))});const Ti=Fe.filter(g=>q(g.name)!=="headliner"&&!Oe.has(g.id));for(const g of Ti){const T=g.land||"Other";let K=-1,G=-1;for(let Z=0;Z<m.length;Z++){if(ye[Z].length>=ae[Z])continue;const fe=Math.ceil(B.length/m.length),ee=ye[Z].length<fe+2,se=tt[Z].has(T);let ge=0;se&&(ge+=10),ee&&(ge+=5),ge+=3-Math.min(3,ye[Z].length),ge>G&&(G=ge,K=Z)}K===-1&&(K=ye.map((Z,fe)=>({idx:fe,len:Z.length})).filter(Z=>Z.len<ae[Z.idx]).sort((Z,fe)=>Z.len-fe.len)[0]?.idx??0),ye[K].length<ae[K]&&(ye[K].push(g),tt[K].add(T),Oe.add(g.id))}const ba=m.map(()=>[]);if(et)for(let g=0;g<m.length;g++){const T=ye[g].length;let G=ae[g]-T;const Z=tt[g];if(G>0){const fe=Fe.filter(ee=>{const se=q(ee.name);return se==="headliner"||se==="popular"}).sort((ee,se)=>{const ge=q(ee.name),_e=q(se.name),st=ee.land||"Other",D=se.land||"Other",Ie=Z.has(st),Jt=Z.has(D),ft=ye[g].some(we=>we.id===ee.id),Qt=ye[g].some(we=>we.id===se.id);return Ie!==Jt?Ie?-1:1:ge!==_e?ge==="headliner"?-1:1:ft!==Qt?ft?1:-1:0});for(const ee of fe){if(G<=0)break;ba[g].push(ee),G--}}}const at=new Set,St=[];let Kt=0,ut=0,Yt=0,gt=0;const Mi=(g,T)=>{const[K,G]=g.split(" "),[Z,fe]=K.split(":");let ee=parseInt(Z),se=parseInt(fe)+T;G==="PM"&&ee!==12&&(ee+=12),G==="AM"&&ee===12&&(ee=0),ee+=Math.floor(se/60),se=se%60;const ge=ee>=12?"PM":"AM";return`${ee>12?ee-12:ee===0?12:ee}:${se.toString().padStart(2,"0")} ${ge}`};for(let g=0;g<m.length;g++){const T=m[g],K=Ze(T.date),G=[...ye[g]].sort((_e,st)=>{const D=ct(_e.name).weight;return ct(st.name).weight-D}),Z=new Set(G.map(_e=>_e.id)),fe=ba[g].filter(_e=>!Z.has(_e.id)),ee=[...G,...fe],se=T.date.toISOString().split("T")[0],ge=L[se];if(ee.length>0){const _e=T.arrivalTime==="rope-drop",st=ge?.closeHour,D=[],Ie=[],Jt=y=>{const x=y.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!x)return 11;let f=parseInt(x[1]);const F=x[3].toUpperCase();return F==="PM"&&f!==12&&(f+=12),F==="AM"&&f===12&&(f=0),f};if(V&&I&&o){const y=G.filter(R=>R.parkId===o),x=G.filter(R=>R.parkId===I),f=new Set,F=Ea(o,I),J=s.find(R=>R.id===o)?.name||"Park 1",O=s.find(R=>R.id===I)?.name||"Park 2",re=ge?.openHour||9,ke=R=>{const z=Math.floor(R/60),oe=R%60,He=z>=12?"PM":"AM";return`${z>12?z-12:z===0?12:z}:${oe.toString().padStart(2,"0")} ${He}`},ie=R=>R>=12?`${R>12?R-12:12}pm`:`${R}am`,We=async(R,z,oe,He,ce,Le,ot)=>{if(R.length===0)return;const ze=await Fa({selectedRides:R,preferences:{visitDate:se,arrivalTime:ie(oe),duration:"full-day",priority:w.priority,includeBreaks:!1,ropeDropMode:ce,parkId:z,ropeDropTarget:Le,parkCloseHour:He,skipFirstLastEnhancement:!0}},t);for(const le of ze.items)if(le.type==="ride"&&le.ride){const pt=typeof le.ride.id=="number"?le.ride.id:parseInt(String(le.ride.id)),Et=at.has(pt);if(le.ride.hourlyPredictions&&le.ride.hourlyPredictions.length>0&&!Et){const Xt=le.ride.hourlyPredictions,Ii=Math.max(...Xt);Math.round(Xt.reduce((Ei,Hi)=>Ei+Hi,0)/Xt.length),ut+=Ii}D.push({time:le.time,type:le.type,name:Et?`${le.name} ★`:le.name,expectedWait:le.expectedWait,notes:Et?"Re-ride! Great choice to experience this attraction again.":le.reasoning||void 0,land:le.ride?.land,isReride:Et}),f.add(pt),at.add(pt)}Ie.push(...ze.insights)},ve=(R,z)=>{D.push({time:ke(z),type:"break",name:`🚶 Travel to ${R}`,notes:`Park transition (~${F} min). Head to ${R}!`,breakDuration:F})},xe=R=>R.map(z=>({...z,predictions:ei({id:z.id,name:z.name,land:z.land,isOpen:z.isOpen,waitTime:z.waitTime},T.date)})),Ge=(R,z)=>R.length===0?0:R.reduce((He,ce)=>He+Re(ce.predictions,z),0)/R.length,rt=R=>{if(R.length===0)return 0;let z=0,oe=0;for(const He of R)for(let ce=9;ce<=21;ce++)z+=Re(He.predictions,ce),oe++;return oe>0?z/oe:30},Ue=xe(y),Ct=xe(x),U=Jt(Be),pe=Math.max(re+2,U-2),he=Math.min((st||22)-3,U+2);let me=U,ne=-1/0;for(let R=pe;R<=he;R++){const z=Ge(Ue,R),oe=Ge(Ct,R),He=rt(Ue),ce=rt(Ct),Le=z-He,ot=ce-oe,le=(2-Math.abs(R-U))*5,pt=Le+ot+le;pt>ne&&(ne=pt,me=R)}const Me=Ge(Ue,me),je=rt(Ue);if(Me<je*.9&&me<he){for(let R=me;R<=he;R++)if(Ge(Ue,R)>=je){me=R;break}}const qe=(()=>{let oe=0;for(let ce=0;ce<y.length;ce++){const Le=Ue[ce],ot=Math.floor((re*60+oe)/60),ze=Math.min(Math.max(ot,9),21),le=Re(Le.predictions,ze);oe+=le+10+8}const He=re*60+oe+15;return Math.ceil(He/60)})();let Q=Math.max(me,qe);if(Q=Math.min(Q,he),qe>me&&Ie.push(`Extended time at ${J} to complete all selected rides before hopping`),Q!==U){const R=Q-U,z=R>0?"later":"earlier";Ie.push(`Adjusted hop time ${Math.abs(R)} hour${Math.abs(R)>1?"s":""} ${z} based on predicted wait times`)}const te=T.ropeDropTarget&&y.some(R=>{const z=T.ropeDropTarget.toLowerCase(),oe=R.name.toLowerCase();return oe===z||oe.includes(z)||z.includes(oe)})?T.ropeDropTarget:void 0;await We(y,o,re,Q,!0,te);const Ee=Q*60;ve(O,Ee);const Ne=Q+Math.ceil(F/60);await We(x,I,Ne,st||22,!1,void 0);const De=D.filter(R=>R.type==="ride");if(De.length>0){const R=De[0],z=D.indexOf(R);z>=0&&(D[z]={...D[z],notes:`🌅 Kick off your day! ${D[z].notes||""}`.trim()});const oe=D.findIndex(Le=>Le.type==="break"&&Le.name?.includes("Travel to"));if(oe>=0){const Le=De.filter((ot,ze)=>D.indexOf(De[ze])>oe);if(Le.length>0){const ot=Le[0],ze=D.indexOf(ot);ze>=0&&ze!==z&&(D[ze]={...D[ze],notes:`🎢 Start your ${O} adventure! ${D[ze].notes||""}`.trim()})}}const He=De[De.length-1],ce=D.indexOf(He);ce>=0&&ce!==z&&(D[ce]={...D[ce],notes:`🌙 Wrap up your adventure! ${D[ce].notes||""}`.trim()})}const Pe=y.filter(R=>f.has(R.id)).length,Wt=x.filter(R=>f.has(R.id)).length,nt=f.size,It=y.length+x.length;if(Ie.push(`Park Hopper: ${Pe} rides at ${J}, ${Wt} rides at ${O}`),nt<It){const R=It-nt;Ie.push(`Note: ${R} ride${R>1?"s":""} couldn't fit in the schedule`)}}else{let y=T.arrivalTime;if(T.arrivalTime==="rope-drop"&&ge?.openHour){const f=ge.openHour;y=`${f>12?f-12:f}${f>=12?"pm":"am"}`}const x=await Fa({selectedRides:G,preferences:{visitDate:se,arrivalTime:y,duration:T.duration,priority:w.priority,includeBreaks:!1,ropeDropMode:_e,parkId:o||void 0,ropeDropTarget:T.ropeDropTarget,parkCloseHour:st}},t);for(const f of x.items)if(f.type==="ride"&&f.ride){const F=typeof f.ride.id=="number"?f.ride.id:parseInt(String(f.ride.id)),J=at.has(F);if(f.ride.hourlyPredictions&&f.ride.hourlyPredictions.length>0&&!J){const O=f.ride.hourlyPredictions,re=Math.max(...O);Math.round(O.reduce((ke,ie)=>ke+ie,0)/O.length),ut+=re}D.push({time:f.time,type:f.type,name:J?`${f.name} ★`:f.name,expectedWait:f.expectedWait,notes:J?"Re-ride! Great choice to experience this attraction again.":f.reasoning||void 0,land:f.ride?.land,isReride:J}),at.add(F)}else D.push({time:f.time,type:f.type,name:f.name,expectedWait:f.expectedWait,notes:f.reasoning||f.breakInfo?.suggestion,land:f.ride?.land,isReride:!1});Ie.push(...x.insights)}let ft=D.length-1;for(let y=D.length-1;y>=0;y--)if(D[y].type==="ride"){ft=y;break}const Qt=y=>{const x=y.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!x)return 0;let f=parseInt(x[1]);const F=parseInt(x[2]),J=x[3].toUpperCase();return J==="PM"&&f!==12&&(f+=12),J==="AM"&&f===12&&(f=0),f*60+F},we=ge?ge.closeHour*60+(ge.closeMinute||0):1320;if(et&&fe.length>0&&!V){const y=D[ft];let x=y?.time||"4:00 PM",f=y?.expectedWait||30,F=y?.land||null;const J=8;for(const O of fe){const re=vt(F,O.land),ke=f+J+re;x=Mi(x,ke);const ie=Math.max(15,(O.waitTime||30)*.8),We=Qt(x);if(We>=we||We+ie+J>we)break;const xe=at.has(O.id);D.push({time:x,type:"ride",name:xe?`${O.name} ★`:O.name,expectedWait:Math.round(ie),notes:xe?"Re-ride! Great choice to experience this attraction again.":"Added to maximize your day - enjoy!",land:O.land,isReride:xe}),at.add(O.id),f=Math.round(ie),F=O.land||null}}const de=y=>{const x=y.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!x)return 0;let f=parseInt(x[1]);const F=parseInt(x[2]),J=x[3].toUpperCase();return J==="PM"&&f!==12&&(f+=12),J==="AM"&&f===12&&(f=0),f*60+F},Ve=y=>{let x=Math.floor(y/60);const f=y%60,F=x>=12?"PM":"AM";return x>12&&(x-=12),x===0&&(x=12),`${x}:${f.toString().padStart(2,"0")} ${F}`};if(w.includeBreaks){const y=U=>{const pe=de(U);let he="the park";for(const me of D)if(me.type==="ride"&&me.land)if(de(me.time)<=pe)he=me.land;else break;return he},F=(U,pe)=>{const he=de(U.time),me=U.expectedWait||0;return he+me+10+8},J=(U,pe,he,me)=>{const ne=[];for(let Q=0;Q<D.length;Q++){const te=D[Q];te.type==="ride"&&ne.push({item:te,actualIndex:Q,start:de(te.time),end:F(te),wait:te.expectedWait||0})}if(ne.sort((Q,te)=>Q.start-te.start),ne.length===0)return{time:Ve(he),avgWait:0,note:"Good time for a break while you recharge.",insertAfterIndex:0};let Me=-1,je=he,be=0;for(let Q=0;Q<ne.length;Q++){const te=ne[Q],Ee=te.end;if(Ee>=U-30&&Ee<=pe){const Ne=ne.slice(Q+1),De=Ne.length>0?Ne.reduce((Pe,Wt)=>Pe+Wt.wait,0)/Ne.length:0;if(De>=be||Me===-1){const Pe=Math.max(Ee,U);Pe<=pe&&(be=De,je=Pe,Me=te.actualIndex)}}}if(Me===-1){const Q=ne.filter(Ne=>Ne.end<=U),te=Q.length>0?Q[Q.length-1]:null,Ee=ne.filter(Ne=>Ne.start<=pe&&Ne.end>=U);if(Ee.length>0){const Ne=Ee[Ee.length-1];Me=Ne.actualIndex,je=Math.min(Ne.end,pe)}else te?(Me=te.actualIndex,je=U):(Me=-1,je=U)}const qe=be>30?`Skip the ~${Math.round(be)} min waits - break while crowds are highest.`:"Great time to recharge before continuing.";return{time:Ve(je),avgWait:be,note:qe,insertAfterIndex:Me}},O=(U,pe,he)=>{D.splice(pe,0,U);let Me=de(U.time)+he;U.land;for(let je=pe+1;je<D.length;je++){const be=D[je];if(be.type!=="ride")continue;const qe=de(be.time),Q=Math.max(qe+he,Me);be.time=Ve(Q);const te=D[je+1],Ee=te?.type==="ride"?te.land:null,Ne=vt(be.land,Ee),De=be.expectedWait||0;Me=Q+De+10+Ne,be.land}},ve=J(660,780,720),xe=y(ve.time),Ge=Lt(xe),rt=Ge?.dining.find(U=>U.type==="quick-service"||U.type==="table-service"),Ue=Ge?.shopping[0],Ct=ve.insertAfterIndex>=0?ve.insertAfterIndex+1:0;if(O({time:ve.time,type:"meal",name:"Lunch Break",expectedWait:0,notes:ve.note,land:xe,isReride:!1,breakDuration:45,peakWaitTime:ve.avgWait,diningName:rt?.name,diningDetail:rt?.specialty||"Grab a bite to eat",diningImage:rt?.image,shoppingName:Ue?.name,shoppingDetail:Ue?.highlights,shoppingImage:Ue?.image},Ct,45),T.duration==="full-day"){let U=1020,pe=1140,he=1050;const me=60;if(lt){const te=A[se],Ee=o?Gt(o):null,De=(te?.parade||Ee?.parade)?.showTimes?.[0]?.startTime;if(De){let Pe;if(De.includes("T")){const nt=new Date(De);Pe=nt.getHours()*60+nt.getMinutes()}else{const[nt,It]=De.split(":").map(Number);Pe=nt*60+(It||0)}Pe>=U-30&&Pe<=pe&&(Pe>=1020?(U=960,pe=Pe-50,he=975):(U=Pe+30,pe=1170,he=Math.max(Pe+45,1110)))}}const ne=J(U,pe,he),Me=y(ne.time),je=Lt(Me),be=je?.dining.find(te=>te.type==="table-service"||te.type==="quick-service"),qe=je?.shopping[0],Q=ne.insertAfterIndex>=0?ne.insertAfterIndex+1:D.length;O({time:ne.time,type:"meal",name:"Dinner Break",expectedWait:0,notes:ne.note,land:Me,isReride:!1,breakDuration:me,peakWaitTime:ne.avgWait,diningName:be?.name,diningDetail:be?.specialty||"Enjoy a sit-down meal",diningImage:be?.image,shoppingName:qe?.name,shoppingDetail:qe?.highlights,shoppingImage:qe?.image},Q,me)}D.sort((U,pe)=>de(U.time)-de(pe.time))}const Na=y=>{const x=de(y.time);if(y.type==="ride"){const f=y.expectedWait||0;return x+f+10}else if(y.type==="meal"||y.type==="break")return x+(y.breakDuration||45);return x+30},Zt=D[D.length-1],Da=Zt?Na(Zt):de(T.arrivalTime),Ra=we-Da;if(et&&Ra>60){let y=Da+10,x=Zt?.land||null;const f=Math.floor((Ra-30)/40),F=[...ee].filter(O=>at.has(O.id)).sort((O,re)=>(re.waitTime||0)-(O.waitTime||0)),J=F.slice(0,Math.max(2,Math.ceil(F.length/2)));for(let O=0;O<Math.min(f,5)&&!(y+45>we);O++)if(O%2===0&&J.length>0){const ke=O%J.length,ie=J[ke],We=vt(x,ie.land),ve=Math.max(10,Math.round((ie.waitTime||30)*.6)),xe=10;if(y>=we||y+We+ve+xe>we)break;y+=We,D.push({time:Ve(y),type:"ride",name:`${ie.name} ★`,expectedWait:ve,notes:"Evening re-ride - shorter lines as the day winds down!",land:ie.land,isReride:!0}),y+=ve+xe,x=ie.land||null}else{if(y+30>we)break;const ie=x||ee[0]?.land||"the park",We=Lt(ie),ve=We?.shopping[0],xe=We?.dining.find(Ge=>Ge.type==="snack");D.push({time:Ve(y),type:"break",name:"Evening Exploration",expectedWait:0,notes:"Perfect time to browse shops and grab a snack before the park closes.",land:ie,isReride:!1,breakDuration:30,shoppingName:ve?.name||"Nearby shops",shoppingDetail:ve?.highlights||"End-of-day souvenirs and gifts",shoppingImage:ve?.image,diningName:xe?.name,diningDetail:xe?.specialty,diningImage:xe?.image}),y+=30}D.sort((O,re)=>de(O.time)-de(re.time))}const Sa=A[se],Ta=o?Gt(o):null,Ma=V&&I?I:o,At=Ma?la[Ma]:null,Pa=y=>{if(y.includes("T")){const x=new Date(y);return x.getHours()*60+x.getMinutes()}else{const x=y.match(/(\d+):(\d+)\s*(AM|PM)?/i);if(!x)return 0;let f=parseInt(x[1]);const F=parseInt(x[2]);if(x[3]){const J=x[3].toUpperCase();J==="PM"&&f!==12&&(f+=12),J==="AM"&&f===12&&(f=0)}return f*60+F}},Aa=de(T.arrivalTime);if(lt&&At?.hasParade){const y=Sa?.parade||Ta?.parade,x=y?.name||At.paradeName||"Parade",f=y?.showTimes?.[0]?.startTime,F=f?Pa(f):1050;if(F>=Aa&&F<we-30){for(let re=D.length-1;re>=0;re--){const ke=D[re];if(ke.type==="ride"){const ie=de(ke.time);Math.abs(ie-F)<30&&D.splice(re,1)}}const O=Ve(F);D.push({time:O,type:"entertainment",name:x,notes:f?"Live showtime! Find a good viewing spot 15-20 minutes early.":"Find a good viewing spot 15-20 minutes early for the best experience!",isReride:!1,expectedWait:0,entertainmentCategory:"parade"}),Ie.push(`Parade: ${x} at ${O}${f?" (live schedule)":""}`)}}if(Dt&&At?.hasFireworks){const y=Sa?.nighttimeSpectacular||Ta?.nighttimeSpectacular,x=y?.name||At.fireworksName||"Nighttime Spectacular",f=y?.showTimes?.[0]?.startTime,F=f?Pa(f):Math.max(we-45,1200);if(F>=Aa){for(let ke=D.length-1;ke>=0;ke--){const ie=D[ke];if(ie.type==="ride"){const We=de(ie.time);Math.abs(We-F)<30&&D.splice(ke,1)}}const O=Ve(F),re=y?.category||(x.toLowerCase().includes("fantasmic")||x.toLowerCase().includes("world of color")?"water-show":"fireworks");D.push({time:O,type:"entertainment",name:x,notes:f?"Live showtime! Arrive 30-45 minutes early for a prime viewing spot.":"Arrive 30-45 minutes early for a prime viewing location. Main Street/Hub area usually has the best views!",isReride:!1,expectedWait:0,entertainmentCategory:re}),Ie.push(`Nighttime Spectacular: ${x} at ${O}${f?" (live schedule)":""}`)}}D.sort((y,x)=>de(y.time)-de(x.time));const $a=D[D.length-1],Ca=$a?Na($a):de(T.arrivalTime),$i=we-Ca;D.length>0&&$i>30&&we-Ca>15&&D.push({time:Ve(we-15),type:"suggestion",name:"Head Towards Exit",notes:"Park closes soon! Great time for last-minute photos and to beat the exit crowds.",isReride:!1});const Ci=D.filter(y=>y.type!=="ride"?!0:de(y.time)<we);D.length=0,D.push(...Ci);const wt=D.filter(y=>y.type==="ride"),$t=wt.filter(y=>y.isReride),Wa=wt.reduce((y,x)=>y+(x.expectedWait||0),0),Wi=new Set(wt.filter(y=>!y.isReride).map(y=>y.name.replace(" ★","").toLowerCase())),Ia=G.filter(y=>!Wi.has(y.name.toLowerCase())).map(y=>{const x=ct(y.name),f=x.mustDo;return{name:y.name,reason:f?"High-priority attraction that couldn't fit due to time constraints":"Not enough time in the day due to wait times at other attractions",category:x.category}}).sort((y,x)=>{const f=ct(y.name).weight;return ct(x.name).weight-f});St.push({date:T.date,dayNumber:g+1,dayLabel:`Day ${g+1} - ${pa(T.date)}`,dayType:K,duration:T.duration,items:D,totalWaitTime:Wa,ridesCount:wt.length,insights:[...Ie,...$t.length>0?[`${$t.length} re-ride${$t.length>1?"s":""} added to fill your day`]:[]],parkHours:L[se],skippedRides:Ia.length>0?Ia:void 0}),Kt+=Wa,Yt+=wt.length,gt+=$t.length}else St.push({date:T.date,dayNumber:g+1,dayLabel:`Day ${g+1} - ${pa(T.date)}`,dayType:K,duration:T.duration,items:[],totalWaitTime:0,ridesCount:0,insights:[],parkHours:L[se]})}const it=[],yt=m.filter(g=>Ze(g.date)==="weekday").length,Tt=m.filter(g=>Ze(g.date)==="weekend").length;yt>0&&Tt>0?it.push(`Your trip includes ${yt} weekday${yt>1?"s":""} and ${Tt} weekend day${Tt>1?"s":""}. Higher-demand attractions are placed on weekdays when crowds tend to be lighter.`):yt===m.length&&it.push("All your visit days are weekdays - great choice! You'll likely experience lower wait times compared to weekends.");const xa=Yt-gt;it.push(`${xa} unique attraction${xa!==1?"s":""} scheduled across ${m.length} day${m.length>1?"s":""}.`),gt>0&&it.push(`${gt} re-ride${gt!==1?"s":""} added to help maximize your park time. These are marked with ★ in your schedule.`);const Vt=m.filter(g=>g.duration==="half-day").length;if(Vt>0&&it.push(`${Vt} half-day visit${Vt>1?"s":""} scheduled with focused morning experiences when wait times tend to be lowest.`),V&&I){const g=s.find(G=>G.id===o),T=s.find(G=>G.id===I),K=Ea(o,I);it.push(`Park Hopper: Starting at ${g?.name||"first park"}, then transitioning to ${T?.name||"second park"} at ${Be} (~${K} min travel).`)}const Mt=[],Pt=B.filter(g=>q(g.name)==="headliner").length;Pt>0&&(Mt.push(`${Pt} headliner attraction${Pt>1?"s":""} distributed across your visit days`),Mt.push("Headliners scheduled early each day to help reduce wait times during peak hours")),yt>0&&Tt>0&&Pt>0&&Mt.push("More headliners placed on weekdays when crowds are typically 20-30% lower");const ja=Math.max(0,ut-Kt),Pi=ut>0?Math.round(ja/ut*100):0,Ai=St.flatMap(g=>g.insights).some(g=>g.toLowerCase().includes("predictions powered by")||g.toLowerCase().includes("historical data"))?"convex":"hardcoded";E({days:St,strategySummary:it,headlinerStrategy:Mt,totalWaitTime:Kt,totalRides:Yt,waitTimeSaved:ja,percentImprovement:Pi,predictionSource:Ai}),j(zr()),P(!1),i("report")},bi=()=>{if(!o||!u||!M)return;const m={id:u,parkId:o,parkName:va?.name||"Theme Park",dates:c.map(A=>A.date.toISOString()),createdAt:new Date().toISOString(),report:M,selectedRides:k};Er(m),h(bt()),P(!0)},xi=m=>{n(m.parkId),d(m.selectedRides),b(m.dates.map(A=>({date:new Date(A),duration:"full-day",arrivalTime:"rope-drop"}))),E(m.report),j(m.id),P(!0),i("report")},ji=m=>{Hr(m),h(bt())},Ni=()=>{i("park"),n(null),b([]),d([]),E(null),j(null),P(!1),v({priority:"balanced",includeBreaks:!0})},Di=()=>{switch(a){case"park":return o!==null;case"ticket-type":return!V||I!==null;case"entertainment":return!0;case"schedule-style":return!0;case"dates":return c.length>0;case"rides":return k.length>0;default:return!1}},Ri=()=>{if(a!=="park")if(a==="ticket-type")i("schedule-style");else if(a==="schedule-style")i("dates");else if(a==="dates")i("entertainment");else if(a==="entertainment"){const m=c.filter(A=>A.ropeDropTarget).map(A=>A.ropeDropTarget.toLowerCase());if(m.length>0){const A=l.filter(X=>{const q=X.name.toLowerCase();return m.some(ae=>q===ae||q.includes(ae)||ae.includes(q))}),B=[...k];for(const X of A)B.includes(X.id)||B.push(X.id);d(B)}i("rides")}else a==="rides"&&vi()},Si=()=>{a==="ticket-type"?i("park"):a==="schedule-style"?o&&Ht(o)?i("ticket-type"):i("park"):a==="dates"?i("schedule-style"):a==="entertainment"?i("dates"):a==="rides"?i("entertainment"):a==="report"&&i("rides")},va=s.find(m=>m.id===o);return H&&a==="park"?e.jsx("div",{className:"pw-container",children:e.jsxs("div",{className:"pw-loading",children:[e.jsx("div",{className:"pw-spinner"}),e.jsx("span",{children:"Loading parks..."})]})}):e.jsxs("div",{className:"pw-container",children:[e.jsx(Fr,{currentStep:a}),e.jsxs("div",{className:"pw-content",children:[a==="park"&&e.jsxs(e.Fragment,{children:[e.jsx(Or,{parks:s,selectedPark:o,onSelect:m=>{n(m),Ht(m)?i("ticket-type"):(W(!1),Se(null),i("schedule-style"))}}),e.jsx(Vr,{plans:Y,onLoad:xi,onDelete:ji})]}),a==="ticket-type"&&o&&e.jsx(_r,{selectedPark:o,parks:s,isParkHopper:V,secondParkId:I,transitionTime:Be,onParkHopperChange:m=>{if(W(m),m){const A=qa(o);(A.length===1||A.length>1&&!I)&&Se(A[0].id)}else Se(null),Ce([])},onSecondParkChange:Se,onTransitionTimeChange:Xe}),a==="entertainment"&&e.jsx(Gr,{selectedPark:o,secondParkId:I,isParkHopper:V,selectedDates:c,wantFireworks:Dt,wantParade:lt,onFireworksChange:wa,onParadeChange:qt}),a==="schedule-style"&&e.jsx(Ur,{allowRerides:et,onReridePrefChange:Rt}),a==="dates"&&e.jsx(qr,{selectedDates:c,onToggleDate:Ke,onUpdateDate:Te,selectedPark:o,parkHoursMap:L}),a==="rides"&&e.jsx(Kr,{rides:ka,selectedRides:k,onToggle:wi,onToggleLand:ki,preferences:w,onPreferencesChange:v,ropeDropTargets:c.filter(m=>m.ropeDropTarget).map(m=>m.ropeDropTarget),isParkHopper:V,maxRideLimit:ht,isAtLimit:yi,isNearLimit:fi}),a==="report"&&M&&e.jsx(Yr,{report:M,parkName:va?.name||"Theme Park",onSave:bi,isSaved:N})]}),e.jsxs("div",{className:"pw-footer",children:[a!=="park"&&e.jsx("button",{className:"pw-btn secondary",onClick:a==="report"?Ni:Si,children:a==="report"?"Start Over":e.jsxs(e.Fragment,{children:[e.jsx(Va,{size:18}),"Back"]})}),a!=="report"&&e.jsxs("button",{className:"pw-btn primary",onClick:Ri,disabled:!Di(),children:[a==="rides"?"Generate Plan":"Continue",e.jsx(Ki,{size:18})]})]})]})}function cn(){return e.jsx(Li,{children:e.jsx(Jr,{})})}export{cn as default};
